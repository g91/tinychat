<script> 

(function () {
	"use strict";

	function a(b) {
		L = !(b && b.shimcssproperties) && (t || !navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/) && window.CSS && CSS.supports && CSS.supports("box-shadow", "0 0 0 var(--foo)"))
	}

	function b() {
		this.end = this.start = 0, this.rules = this.parent = this.previous = null, this.cssText = this.parsedCssText = "", this.atRule = !1, this.type = 0, this.parsedSelector = this.selector = this.keyframesName = ""
	}

	function c(j) {
		j = j.replace(C, "").replace(N, "");
		var a = j,
			c = new b;
		c.start = 0, c.end = a.length;
		for (var e = c, d = 0, f = a.length; d < f; d++)
			if ("{" === a[d]) {
				e.rules || (e.rules = []);
				var g = e,
					h = g.rules[g.rules.length - 1] || null;
				e = new b, e.start = d + 1, e.parent = g, e.previous = h, g.rules.push(e)
			}
		else "}" === a[d] && (e.end = d + 1, e = e.parent || c);
		return i(c, j)
	}

	function i(h, a) {
		var b = a.substring(h.start, h.end - 1);
		if (h.parsedCssText = h.cssText = b.trim(), h.parent && (b = a.substring(h.previous ? h.previous.end : h.parent.start, h.start - 1), b = g(b), b = b.replace(X, " "), b = b.substring(b.lastIndexOf(";") + 1), b = h.parsedSelector = h.selector = b.trim(), h.atRule = 0 === b.indexOf("@"), h.atRule ? 0 === b.indexOf("@media") ? h.type = B : b.match(W) && (h.type = D, h.keyframesName = h.selector.split(X).pop()) : h.type = 0 === b.indexOf("--") ? A : v), b = h.rules)
			for (var c = 0, e = b.length, d = void 0; c < e && (d = b[c]); c++) i(d, a);
		return h
	}

	function g(b) {
		return b.replace(/\\([0-9a-f]{1,6})\s/gi, function (b, a) {
			for (b = a, a = 6 - b.length; a--;) b = "0" + b;
			return "\\" + b
		})
	}

	function j(i, a, b) {
		b = void 0 === b ? "" : b;
		var c = "";
		if (i.cssText || i.rules) {
			var e, f = i.rules;
			if ((e = f) && (e = f[0], e = !(e && e.selector && 0 === e.selector.indexOf("--"))), e) {
				e = 0;
				for (var d = f.length, g = void 0; e < d && (g = f[e]); e++) c = j(g, a, c)
			}
			else a ? a = i.cssText : (a = i.cssText, a = a.replace(P, "").replace(R, ""), a = a.replace(S, "").replace(T, "")), (c = a.trim()) && (c = "  " + c + "\n")
		}
		return c && (i.selector && (b += i.selector + " {\n"), b += c, i.selector && (b += "}\n\n")), b
	}

	function d(b) {
		return b ? ("string" === typeof b && (b = c(b)), j(b, M)) : ""
	}

	function e(b) {
		return !b.__cssRules && b.textContent && (b.__cssRules = c(b.textContent)), b.__cssRules || null
	}

	function h(i, a, b, c) {
		if (i) {
			var e = !1,
				d = i.type;
			if (c && 4 === d) {
				var f = i.selector.match(H);
				f && (window.matchMedia(f[1]).matches || (e = !0))
			}
			if (1 === d ? a(i) : b && 7 === d ? b(i) : 1000 === d && (e = !0), (i = i.rules) && !e)
				for (e = 0, d = i.length, f = void 0; e < d && (f = i[e]); e++) h(f, a, b, c)
		}
	}

	function o(g, a) {
		var b = g.indexOf("var(");
		if (-1 === b) return a(g, "", "", "");
		a: {
			for (var c = 0, e = b + 3, d = g.length; e < d; e++)
				if ("(" === g[e]) c++;
				else if (")" === g[e] && 0 === --c) break a;e = -1
		}
		return c = g.substring(b + 4, e), b = g.substring(0, b), g = o(g.substring(e + 1), a), e = c.indexOf(","), -1 === e ? a(b, c.trim(), "", g) : a(b, c.substring(0, e).trim(), c.substring(e + 1).trim(), g)
	}

	function f(d) {
		if (void 0 !== u) return u;
		if (void 0 === d.__cssBuild) {
			var a = d.getAttribute("css-build");
			if (a) d.__cssBuild = a;
			else {
				a: {
					if (a = "template" === d.localName ? d.content.firstChild : d.firstChild, a instanceof Comment && (a = a.textContent.trim().split(":"), "css-build" === a[0])) {
						a = a[1];
						break a
					}
					a = ""
				}
				if ("" !== a) {
					var b = "template" === d.localName ? d.content.firstChild : d.firstChild;
					b.parentNode.removeChild(b)
				}
				d.__cssBuild = a
			}
		}
		return d.__cssBuild || ""
	}

	function k() {
		this.a = {}
	}

	function m() {
		this.b = this.c = null, this.a = new k
	}

	function n(e, a, h) {
		return a = a.replace(z, function (a, b, c, d) {
			return q(e, a, b, c, d, h)
		}), s(e, a, h)
	}

	function r(f, a) {
		for (var b = a; b.parent;) b = b.parent;
		var g = {},
			e = !1;
		return h(b, function (b) {
			(e = e || b === a) || b.selector === a.selector && Object.assign(g, w(f, b.parsedCssText))
		}), g
	}

	function s(i, a, b) {
		for (var c; c = G.exec(a);) {
			var e = c[0],
				d = c[1];
			c = c.index;
			var f = a.slice(0, c + e.indexOf("@apply"));
			a = a.slice(c + e.length);
			var g = b ? r(i, b) : {};
			Object.assign(g, w(i, f)), e = void 0;
			var h = i;
			d = d.replace(I, "");
			var j = [],
				k = h.a.get(d);
			if (k || (h.a.set(d, {}), k = h.a.get(d)), k) {
				h.c && (k.i[h.c] = !0);
				var l = k.h;
				for (e in l) h = g && g[e], k = [e, ": var(", d, "_-_", e], h && k.push(",", h.replace(_, "")), k.push(")"), _.test(l[e]) && k.push(" !important"), j.push(k.join(""))
			}
			e = j.join("; "), a = f + e + a, G.lastIndex = c + e.length
		}
		return a
	}

	function w(i, a, b) {
		b = void 0 !== b && b, a = a.split(";");
		for (var c, e, d, h = {}, f = 0; f < a.length; f++)
			if ((c = a[f]) && (d = c.split(":"), 1 < d.length)) {
				if (c = d[0].trim(), e = d.slice(1).join(":"), b) {
					var g = i;
					d = c;
					var j = $.exec(e);
					j && (j[1] ? (g.b || (g.b = document.createElement("meta"), g.b.setAttribute("apply-shim-measure", ""), g.b.style.all = "initial", document.head.appendChild(g.b)), d = window.getComputedStyle(g.b).getPropertyValue(d)) : d = "apply-shim-inherit", e = d)
				}
				h[c] = e
			}
		return h
	}

	function x(d, a) {
		if (O)
			for (var b in a.i) b !== d.c && O(b)
	}

	function q(i, a, b, c, e, d) {
		if (c && o(c, function (a, b) {
				b && i.a.get(b) && (e = "@apply " + b + ";")
			}), !e) return a;
		var f = s(i, "" + e, d);
		d = a.slice(0, a.indexOf("--"));
		var g = f = w(i, f, !0),
			h = i.a.get(b),
			j = h && h.h;
		j ? g = Object.assign(Object.create(j), f) : i.a.set(b, g);
		var k, l = [],
			m = !1;
		for (k in g) {
			var n = f[k];
			void 0 === n && (n = "initial"), !j || k in j || (m = !0), l.push(b + "_-_" + k + ": " + n)
		}
		return m && x(i, h), h && (h.h = g), c && (d = a + ";" + d), d + l.join("; ") + ";"
	}

	function y(b) {
		(b = Q[b]) && (b._applyShimCurrentVersion = b._applyShimCurrentVersion || 0, b._applyShimValidatingVersion = b._applyShimValidatingVersion || 0, b._applyShimNextVersion = (b._applyShimNextVersion || 0) + 1)
	}

	function E(b) {
		return b._applyShimCurrentVersion === b._applyShimNextVersion
	}

	function F(b) {
		b._applyShimValidatingVersion = b._applyShimNextVersion, b._validating || (b._validating = !0, U.then(function () {
			b._applyShimCurrentVersion = b._applyShimNextVersion, b._validating = !1
		}))
	}

	function J() {
		this.a = null, aa.invalidCallback = y
	}

	function K(b) {
		!b.a && window.ShadyCSS.CustomStyleInterface && (b.a = window.ShadyCSS.CustomStyleInterface, b.a.transformCallback = function (b) {
			aa.f(b)
		}, b.a.validateCallback = function () {
			requestAnimationFrame(function () {
				b.a.enqueued && b.flushCustomStyles()
			})
		})
	}
	var L, p, t = !(window.ShadyDOM && window.ShadyDOM.inUse);
	window.ShadyCSS && void 0 !== window.ShadyCSS.cssBuild && (p = window.ShadyCSS.cssBuild);
	var l = window.ShadyCSS && window.ShadyCSS.disableRuntime;
	window.ShadyCSS && void 0 !== window.ShadyCSS.nativeCss ? L = window.ShadyCSS.nativeCss : window.ShadyCSS ? (a(window.ShadyCSS), window.ShadyCSS = void 0) : a(window.WebComponents && window.WebComponents.flags);
	var M = L,
		u = p,
		v = 1,
		D = 7,
		B = 4,
		A = 1E3,
		C = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,
		N = /@import[^;]*;/gim,
		P = /(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,
		R = /(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,
		S = /@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,
		T = /[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,
		W = /^@[^\s]*keyframes/,
		X = /\s+/g,
		z = /(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,
		G = /(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,
		H = /@media\s(.*)/,
		Z = new Set,
		I = /;\s*/m,
		$ = /^\s*(initial)|(inherit)\s*$/,
		_ = /\s*!important/;
	k.prototype.set = function (c, a) {
		c = c.trim(), this.a[c] = {
			h: a,
			i: {}
		}
	}, k.prototype.get = function (b) {
		return b = b.trim(), this.a[b] || null
	};
	var O = null;
	m.prototype.o = function (b) {
		return b = G.test(b) || z.test(b), G.lastIndex = 0, z.lastIndex = 0, b
	}, m.prototype.m = function (h, a) {
		if (void 0 === h._gatheredStyle) {
			for (var b, f = [], c = h.content.querySelectorAll("style"), e = 0; e < c.length; e++)
				if (b = c[e], !b.hasAttribute("shady-unscoped")) f.push(b.textContent), b.parentNode.removeChild(b);
				else if (!t) {
				var d = b.textContent;
				Z.has(d) || (Z.add(d), d = b.cloneNode(!0), document.head.appendChild(d)), b.parentNode.removeChild(b)
			}(f = f.join("").trim()) ? (c = document.createElement("style"), c.textContent = f, h.content.insertBefore(c, h.content.firstChild), f = c) : f = null, h._gatheredStyle = f
		}
		return (h = h._gatheredStyle) ? this.j(h, a) : null
	}, m.prototype.j = function (f, a) {
		a = void 0 === a ? "" : a;
		var b = e(f);
		return this.l(b, a), f.textContent = d(b), b
	}, m.prototype.f = function (f) {
		var g = this,
			a = e(f);
		return h(a, function (b) {
			":root" === b.selector && (b.selector = "html"), g.g(b)
		}), f.textContent = d(a), a
	}, m.prototype.l = function (d, a) {
		var b = this;
		this.c = a, h(d, function (c) {
			b.g(c)
		}), this.c = null
	}, m.prototype.g = function (b) {
		b.cssText = n(this, b.parsedCssText, b), ":root" === b.selector && (b.selector = ":host > *")
	}, m.prototype.detectMixin = m.prototype.o, m.prototype.transformStyle = m.prototype.j, m.prototype.transformCustomStyle = m.prototype.f, m.prototype.transformRules = m.prototype.l, m.prototype.transformRule = m.prototype.g, m.prototype.transformTemplate = m.prototype.m, m.prototype._separator = "_-_", Object.defineProperty(m.prototype, "invalidCallback", {
		get: function () {
			return O
		},
		set: function (b) {
			O = b
		}
	});
	var Q = {},
		U = Promise.resolve(),
		aa = new m;
	if (J.prototype.prepareTemplate = function (c, a) {
			K(this), "" === f(c) && (Q[a] = c, a = aa.m(c, a), c._styleAst = a)
		}, J.prototype.flushCustomStyles = function () {
			if (K(this), this.a) {
				var d = this.a.processStyles();
				if (this.a.enqueued) {
					for (var a, c = 0; c < d.length; c++) a = this.a.getStyleForCustomStyle(d[c]), a && aa.f(a);
					this.a.enqueued = !1
				}
			}
		}, J.prototype.styleSubtree = function (d, a) {
			if (K(this), a)
				for (var b in a) null === b ? d.style.removeProperty(b) : d.style.setProperty(b, a[b]);
			if (d.shadowRoot)
				for (this.styleElement(d), d = d.shadowRoot.children || d.shadowRoot.childNodes, a = 0; a < d.length; a++) this.styleSubtree(d[a]);
			else
				for (d = d.children || d.childNodes, a = 0; a < d.length; a++) this.styleSubtree(d[a])
		}, J.prototype.styleElement = function (e) {
			K(this);
			var a, c = e.localName;
			a = c ? -1 < c.indexOf("-") ? c : e.getAttribute && e.getAttribute("is") || "" : e.is, c = Q[a], c && "" !== f(c) || !c || E(c) || ((E(c) || c._applyShimValidatingVersion !== c._applyShimNextVersion) && (this.prepareTemplate(c, a), F(c)), (e = e.shadowRoot) && (e = e.querySelector("style")) && (e.__cssRules = c._styleAst, e.textContent = d(c._styleAst)))
		}, J.prototype.styleDocument = function (b) {
			K(this), this.styleSubtree(document.body, b)
		}, !window.ShadyCSS || !window.ShadyCSS.ScopingShim) {
		var V = new J,
			Y = window.ShadyCSS && window.ShadyCSS.CustomStyleInterface;
		window.ShadyCSS = {
			prepareTemplate: function (c, a) {
				V.flushCustomStyles(), V.prepareTemplate(c, a)
			},
			prepareTemplateStyles: function (d, a, b) {
				window.ShadyCSS.prepareTemplate(d, a, b)
			},
			prepareTemplateDom: function () {},
			styleSubtree: function (c, a) {
				V.flushCustomStyles(), V.styleSubtree(c, a)
			},
			styleElement: function (b) {
				V.flushCustomStyles(), V.styleElement(b)
			},
			styleDocument: function (b) {
				V.flushCustomStyles(), V.styleDocument(b)
			},
			getComputedStyleValue: function (c, a) {
				return (c = window.getComputedStyle(c).getPropertyValue(a)) ? c.trim() : ""
			},
			flushCustomStyles: function () {
				V.flushCustomStyles()
			},
			nativeCss: M,
			nativeShadow: t,
			cssBuild: u,
			disableRuntime: l
		}, Y && (window.ShadyCSS.CustomStyleInterface = Y)
	}
	window.ShadyCSS.ApplyShim = aa
}).call(this); < /script><script>(function(){"use strict";const a=window.Polymer;window.Polymer=function(a){return window.Polymer._polymerFn(a)},a&&Object.assign(Polymer,a),window.Polymer._polymerFn=function(){throw new Error("Load polymer.html to use the Polymer() function.")},window.Polymer.version="2.0.0",window.JSCompiler_renameProperty=function(a){return a}})();</script > < script > (function () {
	"use strict";

	function a(a) {
		return function (b) {
			a.__mixinApplications || (a.__mixinApplications = new WeakMap);
			let c = a.__mixinApplications,
				d = c.get(b);
			return d || (d = a(b), c.set(b, d)), d
		}
	}
	let b = 0;
	Polymer.dedupingMixin = function (c) {
		return c = a(c), c.__dedupeId = ++b,
			function (a) {
				let b = a.__mixinSet;
				if (b && b[c.__dedupeId]) return a;
				let d = c(a);
				return d.__mixinSet = Object.create(d.__mixinSet || b || null), d.__mixinSet[c.__dedupeId] = !0, d
			}
	}
})(); < /script><script>(function(){"use strict";const a={},b=/ - [a - z] / g, c = /([A-Z])/g, d = {
	dashToCamelCase(c) {
		return a[c] || (a[c] = 0 > c.indexOf("-") ? c : c.replace(b, a => a[1].toUpperCase()))
	},
	camelToDashCase(b) {
		return a[b] || (a[b] = b.replace(c, "-$1").toLowerCase())
	}
};
Polymer.CaseMap = d
})(); < /script>


< script > (function () {
			"use strict";

			function a(a, d) {
				if (a && e.test(a)) return a;
				if (void 0 === b) {
					b = !1;
					try {
						const a = new URL("b", "http:/ / a ");
						a.pathname = "
						c % 20 d ",b="
						http: //a/c%20d"===a.href}catch(a){}}return(d||(d=document.baseURI||window.location.href),b)?new URL(a,d).href:(c||(c=document.implementation.createHTMLDocument("temp"),c.base=c.createElement("base"),c.head.appendChild(c.base),





c.anchor = c.createElement("a"),
	c.body.appendChild(c.anchor)), c.base.href = d, c.anchor.href = a, c.anchor.href || a)
}
let b, c, d = /(url\()([^)]*)(\))/g,
	e = /(^\/)|(^#)|(^[\w-\d]*:)/;
Polymer.ResolveUrl = {
resolveCss: function (b, c) {
	return b.replace(d, function (b, d, e, f) {
		return d + "'" + a(e.replace(/["']/g, ""), c) + "'" + f
	})
},
resolveUrl: a,
pathFromUrl: function (a) {
	return a.substring(0, a.lastIndexOf("/") + 1)
}
}
})(); < /script><script>(function(){"use strict";function a(a){return Polymer.DomModule?Polymer.DomModule.import(a):null}const b={cssFromModules(a){let b=a.trim().split(" "),c="";for(let d=0;d<b.length;d++)c+=this.cssFromModule(b[d]);return c},cssFromModule(b){let c=a(b);if(c&&void 0===c._cssText){let a="",d=c.querySelector("template");d&&(a+=this.cssFromTemplate(d,c.assetpath)),a+=this.cssFromModuleImports(b),c._cssText=a||null}return c||console.warn("Could not find style data in module named",b),c&&c._cssText||""},cssFromTemplate(a,b){let c="",d=a.content.querySelectorAll("style");for(let f=0;f<d.length;f++){let a=d[f],e=a.getAttribute("include");e&&(c+=this.cssFromModules(e)),a.parentNode.removeChild(a),c+=b?Polymer.ResolveUrl.resolveCss(a.textContent,b):a.textContent}return c},cssFromModuleImports(b){let c="",d=a(b);if(!d)return c;let e=d.querySelectorAll("link[rel=import][type~=css]");for(let a,d=0;d<e.length;d++)if(a=e[d],a.import){let b=a.import,d=b.body?b.body:b;c+=Polymer.ResolveUrl.resolveCss(d.textContent,b.baseURI)}return c}};Polymer.StyleGather=b})();</script > < script > (function () {
	"use strict";

	function a(a) {
		return c[a] || d[a.toLowerCase()]
	}

	function b(a) {
		a.querySelector("style") && console.warn("dom-module %s has style outside template", a.id)
	}
	let c = {},
		d = {};
	class e extends HTMLElement {
		static get observedAttributes() {
			return ["id"]
		}
		static
		import (b, c) {
			if (b) {
				let d = a(b);
				return d && c ? d.querySelector(c) : d
			}
			return null
		}
		attributeChangedCallback(a, b, c) {
			b !== c && this.register()
		}
		get assetpath() {
			if (!this.__assetpath) {
				const a = window.HTMLImports && HTMLImports.importForElement ? HTMLImports.importForElement(this) || document : this.ownerDocument,
					b = Polymer.ResolveUrl.resolveUrl(this.getAttribute("assetpath") || "", a.baseURI);
				this.__assetpath = Polymer.ResolveUrl.pathFromUrl(b)
			}
			return this.__assetpath
		}
		register(a) {
			a = a || this.id, a && (this.id = a, c[a] = this, d[a.toLowerCase()] = this, b(this))
		}
	}
	e.prototype.modules = c, customElements.define("dom-module", e), Polymer.DomModule = e
})(); < /script><script>(function(){"use strict";const a={isPath:function(a){return 0<=a.indexOf(".")},root:function(a){let b=a.indexOf(".");return-1===b?a:a.slice(0,b)},isAncestor:function(a,b){return 0===a.indexOf(b+".")},isDescendant:function(a,b){return 0===b.indexOf(a+".")},translate:function(a,b,c){return b+c.slice(a.length)},matches:function(a,b){return a===b||this.isAncestor(a,b)||this.isDescendant(a,b)},normalize:function(a){if(Array.isArray(a)){let b=[];for(let c,d=0;d<a.length;d++){c=a[d].toString().split(".");for(let a=0;a<c.length;a++)b.push(c[a])}return b.join(".")}return a},split:function(a){return Array.isArray(a)?this.normalize(a).split("."):a.toString().split(".")},get:function(a,b,c){let d=a,e=this.split(b);for(let f=0;f<e.length;f++){if(!d)return;let a=e[f];d=d[a]}return c&&(c.path=e.join(".")),d},set:function(a,b,c){let d=a,e=this.split(b),f=e[e.length-1];if(1<e.length){for(let a,b=0;b<e.length-1;b++)if(a=e[b],d=d[a],!d)return;d[f]=c}else d[b]=c;return e.join(".")}};a.isDeep=a.isPath,Polymer.Path=a})();</script > < script > (function () {
	"use strict";
	let a = 0,
		b = 0,
		c = [],
		d = 0,
		e = document.createTextNode("");
	new window.MutationObserver(function () {
		const a = c.length;
		for (let b, d = 0; d < a; d++)
			if (b = c[d], b) try {
				b()
			}
		catch (a) {
			setTimeout(() => {
				throw a
			})
		}
		c.splice(0, a), b += a
	}).observe(e, {
		characterData: !0
	}), Polymer.Async = {
		timeOut: {
			after(a) {
				return {
					run(b) {
						return setTimeout(b, a)
					},
					cancel: window.clearTimeout.bind(window)
				}
			},
			run: window.setTimeout.bind(window),
			cancel: window.clearTimeout.bind(window)
		},
		animationFrame: {
			run: window.requestAnimationFrame.bind(window),
			cancel: window.cancelAnimationFrame.bind(window)
		},
		idlePeriod: {
			run(a) {
				return window.requestIdleCallback ? window.requestIdleCallback(a) : window.setTimeout(a, 16)
			},
			cancel(a) {
				window.cancelIdleCallback ? window.cancelIdleCallback(a) : window.clearTimeout(a)
			}
		},
		microTask: {
			run(b) {
				return e.textContent = d++, c.push(b), a++
			},
			cancel(a) {
				const d = a - b;
				if (0 <= d) {
					if (!c[d]) throw new Error("invalid async handle: " + a);
					c[d] = null
				}
			}
		}
	}
})(); < /script>

<script> 
(function () {
	"use strict";

	function a(a, b) {
		if (!d[b]) {
			let c = a[b];
			c !== void 0 && (a.__data ? a._setPendingProperty(b, c) : (a.__dataProto ? !a.hasOwnProperty(JSCompiler_renameProperty("__dataProto", a)) && (a.__dataProto = Object.create(a.__dataProto)) : a.__dataProto = {}, a.__dataProto[b] = c))
		}
	}
	let b = Polymer.CaseMap,
		c = Polymer.Async.microTask;
	const d = {};
	for (let a = HTMLElement.prototype; a;) {
		let b = Object.getOwnPropertyNames(a);
		for (let a = 0; a < b.length; a++) d[b[a]] = !0;
		a = Object.getPrototypeOf(a)
	}
	Polymer.PropertyAccessors = Polymer.dedupingMixin(d => {
		return class extends d {
			static createPropertiesForAttributes() {
				let a = this.observedAttributes;
				for (let c = 0; c < a.length; c++) this.prototype._createPropertyAccessor(b.dashToCamelCase(a[c]))
			}
			constructor() {
				super(), this._initializeProperties()
			}
			attributeChangedCallback(a, b, c) {
				b !== c && this._attributeToProperty(a, c)
			}
			_initializeProperties() {
				for (let a in this.__serializing = !1, this.__dataCounter = 0, this.__dataEnabled = !1, this.__dataInitialized = !1, this.__dataInvalid = !1, this.__data = {}, this.__dataPending = null, this.__dataOld = null, this.__dataProto && (this._initializeProtoProperties(this.__dataProto), this.__dataProto = null), this.__dataHasAccessor) this.hasOwnProperty(a) && (this.__dataInstanceProps = this.__dataInstanceProps || {}, this.__dataInstanceProps[a] = this[a], delete this[a])
			}
			_initializeProtoProperties(a) {
				for (let b in a) this._setProperty(b, a[b])
			}
			_initializeInstanceProperties(a) {
				Object.assign(this, a)
			}
			_ensureAttribute(a, b) {
				this.hasAttribute(a) || this._valueToNodeAttribute(this, b, a)
			}
			_attributeToProperty(a, c, d) {
				if (!this.__serializing) {
					let e = b.dashToCamelCase(a);
					this[e] = this._deserializeValue(c, d)
				}
			}
			_propertyToAttribute(a, c, d) {
				this.__serializing = !0, d = 3 > arguments.length ? this[a] : d, this._valueToNodeAttribute(this, d, c || b.camelToDashCase(a)), this.__serializing = !1
			}
			_valueToNodeAttribute(a, b, c) {
				let d = this._serializeValue(b);
				d === void 0 ? a.removeAttribute(c) : a.setAttribute(c, d)
			}
			_serializeValue(a) {
				switch (typeof a) {
					case "boolean":
						return a ? "" : void 0;
					case "object":
						if (a instanceof Date) return a.toString();
						if (a) try {
							return JSON.stringify(a)
						}
						catch (a) {
							return ""
						}
					default:
						return null == a ? void 0 : a.toString();
				}
			}
			_deserializeValue(a, b) {
				let c;
				switch (b) {
					case Number:
						c = +a;
						break;
					case Boolean:
						c = null !== a;
						break;
					case Object:
						try {
							c = JSON.parse(a)
						}
						catch (a) {}
						break;
					case Array:
						try {
							c = JSON.parse(a)
						}
						catch (b) {
							c = null, console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${a}`)
						}
						break;
					case Date:
						c = new Date(a);
						break;
					case String:
					default:
						c = a;
				}
				return c
			}
			_createPropertyAccessor(b, c) {
				this.hasOwnProperty("__dataHasAccessor") || (this.__dataHasAccessor = Object.assign({}, this.__dataHasAccessor)), this.__dataHasAccessor[b] || (this.__dataHasAccessor[b] = !0, a(this, b), Object.defineProperty(this, b, {
					get: function () {
						return this.__data[b]
					},
					set: c ? function () {} : function (a) {
						this._setProperty(b, a)
					}
				}))
			}
			_hasAccessor(a) {
				return this.__dataHasAccessor && this.__dataHasAccessor[a]
			}
			_setProperty(a, b) {
				this._setPendingProperty(a, b) && this._invalidateProperties()
			}
			_setPendingProperty(a, b) {
				let c = this.__data[a];
				if (this._shouldPropertyChange(a, b, c)) return this.__dataPending || (this.__dataPending = {}, this.__dataOld = {}), a in this.__dataOld || (this.__dataOld[a] = c), this.__data[a] = b, this.__dataPending[a] = b, !0
			}
			_isPropertyPending(a) {
				return this.__dataPending && a in this.__dataPending
			}
			_invalidateProperties() {
				!this.__dataInvalid && this.__dataInitialized && (this.__dataInvalid = !0, c.run(() => {
					this.__dataInvalid && (this.__dataInvalid = !1, this._flushProperties())
				}))
			}
			_enableProperties() {
				this.__dataEnabled || (this.__dataEnabled = !0, this.__dataInstanceProps && (this._initializeInstanceProperties(this.__dataInstanceProps), this.__dataInstanceProps = null), this.ready())
			}
			_flushProperties() {
				if (this.__dataPending) {
					let a = this.__dataPending;
					this.__dataPending = null, this.__dataCounter++, this._propertiesChanged(this.__data, a, this.__dataOld), this.__dataCounter--
				}
			}
			ready() {
				this.__dataInitialized = !0, this._flushProperties()
			}
			_propertiesChanged() {}
			_shouldPropertyChange(a, b, c) {
				return c !== b && (c === c || b === b)
			}
		}
	})
})(); 
</script>

<script> 
(function () {
	"use strict";

	function a(a) {
		let b = a.getAttribute("is");
		if (b && g[b]) {
			let c = a;
			for (c.removeAttribute("is"), a = c.ownerDocument.createElement(b), c.parentNode.replaceChild(a, c), a.appendChild(c); c.attributes.length;) a.setAttribute(c.attributes[0].name, c.attributes[0].value), c.removeAttribute(c.attributes[0].name)
		}
		return a
	}

	function b(a, c) {
		let d = c.parentInfo && b(a, c.parentInfo);
		if (d) {
			for (let a = d.firstChild, b = 0; a; a = a.nextSibling)
				if (c.parentIndex === b++) return a;
		}
		else return a
	}

	function c(a, b, c, d) {
		d.id && (b[d.id] = c)
	}

	function d(a, b, c) {
		if (c.events && c.events.length)
			for (let d, e = 0, f = c.events; e < f.length && (d = f[e]); e++) a._addMethodEventListenerToNode(b, d.name, d.value, a)
	}

	function e(a, b, c) {
		c.templateInfo && (b._templateInfo = c.templateInfo)
	}

	function f(a, b, c) {
		a = a._methodHost || a;
		let d = function (b) {
			a[c] ? a[c](b, b.detail) : console.warn("listener method `" + c + "` not defined")
		};
		return d
	}
	const g = {
		"dom-if": !0,
		"dom-repeat": !0
	};
	Polymer.TemplateStamp = Polymer.dedupingMixin(g => {
		return class extends g {
			static _parseTemplate(a, b) {
				if (!a._templateInfo) {
					let c = a._templateInfo = {};
					c.nodeInfoList = [], c.stripWhiteSpace = b && b.stripWhiteSpace || a.hasAttribute("strip-whitespace"), this._parseTemplateContent(a, c, {
						parent: null
					})
				}
				return a._templateInfo
			}
			static _parseTemplateContent(a, b, c) {
				return this._parseTemplateNode(a.content, b, c)
			}
			static _parseTemplateNode(a, b, c) {
				let d;
				return "template" != a.localName || a.hasAttribute("preserve-content") ? "slot" === a.localName && (b.hasInsertionPoint = !0) : d = this._parseTemplateNestedTemplate(a, b, c) || d, a.firstChild && (d = this._parseTemplateChildNodes(a, b, c) || d), a.hasAttributes && a.hasAttributes() && (d = this._parseTemplateNodeAttributes(a, b, c) || d), d
			}
			static _parseTemplateChildNodes(b, c, d) {
				for (let e, f = b.firstChild, g = 0; f; f = e) {
					if ("template" == f.localName && (f = a(f)), e = f.nextSibling, f.nodeType === Node.TEXT_NODE) {
						for (let a = e; a && a.nodeType === Node.TEXT_NODE;) f.textContent += a.textContent, e = a.nextSibling, b.removeChild(a), a = e;
						if (c.stripWhiteSpace && !f.textContent.trim()) {
							b.removeChild(f);
							continue
						}
					}
					let h = {
						parentIndex: g,
						parentInfo: d
					};
					this._parseTemplateNode(f, c, h) && (h.infoIndex = c.nodeInfoList.push(h) - 1), f.parentNode && g++
				}
			}
			static _parseTemplateNestedTemplate(a, b, c) {
				let d = this._parseTemplate(a, b),
					e = d.content = a.content.ownerDocument.createDocumentFragment();
				return e.appendChild(a.content), c.templateInfo = d, !0
			}
			static _parseTemplateNodeAttributes(b, c, d) {
				let e, f = Array.from(b.attributes);
				for (let g, a = f.length - 1; g = f[a]; a--) e = this._parseTemplateNodeAttribute(b, c, d, g.name, g.value) || e;
				return e
			}
			static _parseTemplateNodeAttribute(a, b, c, d, e) {
				return "on-" === d.slice(0, 3) ? (a.removeAttribute(d), c.events = c.events || [], c.events.push({
					name: d.slice(3),
					value: e
				}), !0) : "id" === d ? (c.id = e, !0) : void 0
			}
			static _contentForTemplate(a) {
				let b = a.__templateInfo;
				return b && b.content || a.content
			}
			_stampTemplate(a) {
				a && !a.content && window.HTMLTemplateElement && HTMLTemplateElement.decorate && HTMLTemplateElement.decorate(a);
				let f = this.constructor._parseTemplate(a),
					g = f.nodeInfoList,
					h = f.content || a.content,
					j = document.importNode(h, !0);
				j.__noInsertionPoint = !f.hasInsertionPoint;
				let k = j.nodeList = Array(g.length);
				j.$ = {};
				for (let f, h, m = 0, i = g.length; m < i && (f = g[m]); m++) h = k[m] = b(j, f), c(this, j.$, h, f), e(this, h, f), d(this, h, f);
				return j
			}
			_addMethodEventListenerToNode(a, b, c, d) {
				d = d || a;
				let e = f(d, b, c);
				return this._addEventListenerToNode(a, b, e), e
			}
			_addEventListenerToNode(a, b, c) {
				a.addEventListener(b, c)
			}
			_removeEventListenerFromNode(a, b, c) {
				a.removeEventListener(b, c)
			}
		}
	})
})(); < /script>

< script > (function () {
			"use strict";

			function e(e, t) {
				let a = e[t];
				if (!a) a = e[t] = {};
				else if (!e.hasOwnProperty(t))
					for (let n in a = e[t] = Object.create(e[t]), a) {
						let e = a[n],
							t = a[n] = Array(e.length);
						for (let a = 0; a < e.length; a++) t[a] = e[a]
					}
				return a
			}

			function t(e, t, n, r, o, d) {
				if (t) {
					let i = !1,
						s = R++;
					for (let p in n) a(e, t, s, p, n, r, o, d) && (i = !0);
					return i
				}
				return !1
			}

			function a(e, t, a, r, o, d, s, p) {
				let _ = !1,
					i = s ? Polymer.Path.root(r) : r,
					h = t[i];
				if (h)
					for (let t, g = 0, i = h.length; g < i && (t = h[g]); g++) t.info && t.info.lastRun === a || s && !n(r, t.trigger) || (t.info && (t.info.lastRun = a), t.fn(e, r, o, d, t.info, s, p), _ = !0);
				return _
			}

			function n(e, t) {
				if (t) {
					let a = t.name;
					return a == e || t.structured && Polymer.Path.isAncestor(a, e) || t.wildcard && Polymer.Path.isDescendant(a, e)
				}
				return !0
			}

			function r(e, t, a, n, r) {
				let o = e[r.methodName],
					d = r.property;
				o ? o.call(e, e.__data[d], n[d]) : !r.dynamicFn && console.warn("observer method `" + r.methodName + "` not defined")
			}

			function o(e, t, n, r, o) {
				let i, s = e.__notifyEffects,
					p = R++;
				for (let _ in t) t[_] && (s && a(e, s, p, _, n, r, o) ? i = !0 : o && d(e, _, n) && (i = !0));
				let _;
				i && (_ = e.__dataHost) && _._invalidateProperties && _._invalidateProperties()
			}

			function d(e, t, a) {
				let n = Polymer.Path.root(t);
				if (n !== t) {
					let r = Polymer.CaseMap.camelToDashCase(n) + "-changed";
					return i(e, r, a[t], t), !0
				}
			}

			function i(e, t, a, n) {
				let r = {
					value: a,
					queueProperty: !0
				};
				n && (r.path = n), e.dispatchEvent(new CustomEvent(t, {
					detail: r
				}))
			}

			function s(e, t, a, n, r, o) {
				let d = o ? Polymer.Path.root(t) : t,
					s = d == t ? null : t,
					p = s ? Polymer.Path.get(e, s) : e.__data[t];
				s && p === void 0 && (p = a[t]), i(e, r.eventName, p, s)
			}

			function p(e, t, a, n, r) {
				let o, d = e.detail,
					i = d && d.path;
				i ? (n = Polymer.Path.translate(a, n, i), o = d && d.value) : o = e.target[a], o = r ? !o : o, t.__readOnly && t.__readOnly[n] || !t._setPendingPropertyOrPath(n, o, !0, !!i) || d && d.queueProperty || t._invalidateProperties()
			}

			function _(e, t, a, n, r) {
				let o = e.__data[t];
				Polymer.sanitizeDOMValue && (o = Polymer.sanitizeDOMValue(o, r.attrName, "attribute", e)), e._propertyToAttribute(t, r.attrName, o)
			}

			function l(e, a, n, r) {
				let o = e.__computeEffects;
				if (o)
					for (let d = a; t(e, o, d, n, r);) Object.assign(n, e.__dataOld), Object.assign(a, e.__dataPending), d = e.__dataPending, e.__dataPending = null
			}

			function h(e, t, a, n, r) {
				let o = v(e, t, a, n, r),
					d = r.methodInfo;
				e.__dataHasAccessor && e.__dataHasAccessor[d] ? e._setPendingProperty(d, o, !0) : e[d] = o
			}

			function g(e, t, n) {
				let r = e.__dataLinkedPaths;
				if (r) {
					let o;
					for (let d in r) {
						let a = r[d];
						Polymer.Path.isDescendant(d, t) ? (o = Polymer.Path.translate(d, a, t), e._setPendingPropertyOrPath(o, n, !0, !0)) : Polymer.Path.isDescendant(a, t) && (o = Polymer.Path.translate(a, d, t), e._setPendingPropertyOrPath(o, n, !0, !0))
					}
				}
			}

			function f(e, t, a, n, r, o, d) {
				a.bindings = a.bindings || [];
				let s = {
					kind: n,
					target: r,
					parts: o,
					literal: d,
					isCompound: 1 !== o.length
				};
				if (a.bindings.push(s), y(s)) {
					let {
						event: e,
						negate: t
					} = s.parts[0];
					s.listenerEvent = e || z.camelToDashCase(r) + "-changed", s.listenerNegate = t
				}
				let p = t.nodeInfoList.length;
				for (let _, l = 0; l < s.parts.length; l++) _ = s.parts[l], _.compoundIndex = l, P(e, t, s, _, p)
			}

			function P(e, t, a, n, r) {
				if (!n.literal)
					if ("attribute" === a.kind && "-" === a.target[0]) console.warn("Cannot set attribute " + a.target + " because \"-\" is not a valid attribute starting character");
					else {
						let o = n.dependencies,
							d = {
								index: r,
								binding: a,
								part: n,
								evaluator: e
							};
						for (let a, n = 0; n < o.length; n++) a = o[n], "string" == typeof a && (a = x(a), a.wildcard = !0), e._addTemplatePropertyEffect(t, a.rootProperty, {
							fn: c,
							info: d,
							trigger: a
						})
					}
			}

			function c(e, t, a, n, r, o, d) {
				let i = d[r.index],
					s = r.binding,
					p = r.part;
				if (o && p.source && t.length > p.source.length && "property" == s.kind && !s.isCompound && i.__dataHasAccessor && i.__dataHasAccessor[s.target]) {
					let n = a[t];
					t = Polymer.Path.translate(p.source, s.target, t), i._setPendingPropertyOrPath(t, n, !1, !0) && e._enqueueClient(i)
				}
				else {
					let d = r.evaluator._evaluateBinding(e, p, t, a, n, o);
					u(e, i, s, p, d)
				}
			}

			function u(e, t, a, n, r) {
				if (r = m(t, r, a, n), Polymer.sanitizeDOMValue && (r = Polymer.sanitizeDOMValue(r, a.target, a.kind, t)), "attribute" == a.kind) e._valueToNodeAttribute(t, r, a.target);
				else {
					let n = a.target;
					t.__dataHasAccessor && t.__dataHasAccessor[n] ? (!t.__readOnly || !t.__readOnly[n]) && t._setPendingProperty(n, r) && e._enqueueClient(t) : e._setUnmanagedPropertyToNode(t, n, r)
				}
			}

			function m(e, t, a, n) {
				if (a.isCompound) {
					let r = e.__dataCompoundStorage[a.target];
					r[n.compoundIndex] = t, t = r.join("")
				}
				return "attribute" !== a.kind && ("textContent" === a.target || "input" == e.localName && "value" == a.target) && (t = void 0 == t ? "" : t), t
			}

			function y(e) {
				return e.target && "attribute" != e.kind && "text" != e.kind && !e.isCompound && "{" === e.parts[0].mode
			}

			function E(e, t) {
				let {
					nodeList: a,
					nodeInfoList: n
				} = t;
				if (n.length)
					for (let t = 0; t < n.length; t++) {
						let r = n[t],
							o = a[t],
							d = r.bindings;
						if (d)
							for (let t, a = 0; a < d.length; a++) t = d[a], C(o, t), T(o, e, t);
						o.__dataHost = e
					}
			}

			function C(e, t) {
				if (t.isCompound) {
					let a = e.__dataCompoundStorage || (e.__dataCompoundStorage = {}),
						n = t.parts,
						r = Array(n.length);
					for (let e = 0; e < n.length; e++) r[e] = n[e].literal;
					let o = t.target;
					a[o] = r, t.literal && "property" == t.kind && (e[o] = t.literal)
				}
			}

function T(e, t, a) {
	if (a.listenerEvent) {
		let n = a.parts[0];
		e.addEventListener(a.listenerEvent, function (r) {
			p(r, t, a.target, n.source, n.negate)
		})
	}
}

function O(e, t, a, n, r, o) {
	o = t.static || o && ("object" !== typeof o || o[t.methodName]);
	let d = {
		methodName: t.methodName,
		args: t.args,
		methodInfo: r,
		dynamicFn: o
	};
	for (let s, p = 0; p < t.args.length && (s = t.args[p]); p++) s.literal || e._addPropertyEffect(s.rootProperty, a, {
		fn: n,
		info: d,
		trigger: s
	});
	o && e._addPropertyEffect(t.methodName, a, {
		fn: n,
		info: d
	})
}

function v(e, t, a, n, r) {
	let o = e._methodHost || e,
		d = o[r.methodName];
	if (d) {
		let n = A(e.__data, r.args, t, a);
		return d.apply(o, n)
	}
	r.dynamicFn || console.warn("method `" + r.methodName + "` not defined")
}

function b(e) {
	let t = "";
	for (let a, n = 0; n < e.length; n++) a = e[n].literal, t += a || "";
	return t
}

function N(e) {
	let t = e.match(/([^\s]+?)\(([\s\S]*)\)/);
	if (t) {
		let e = t[1],
			a = {
				methodName: e,
				static: !0
			};
		if (t[2].trim()) {
			let e = t[2].replace(/\\,/g, ",").split(",");
			return I(e, a)
		}
		return a.args = w, a
	}
	return null
}

function I(e, t) {
	return t.args = e.map(function (e) {
		let a = x(e);
		return a.literal || (t.static = !1), a
	}, this), t
}

function x(e) {
	let t = e.trim().replace(/,/g, ",").replace(/\\(.)/g, "$1"),
		n = {
			name: t
		},
		a = t[0];
	return "-" === a && (a = t[1]), "0" <= a && "9" >= a && (a = "#"), "'" === a || "\"" === a ? (n.value = t.slice(1, -1), n.literal = !0) : "#" === a ? (n.value = +t, n.literal = !0) : void 0, (n.literal || (n.rootProperty = Polymer.Path.root(t), n.structured = Polymer.Path.isPath(t), n.structured && (n.wildcard = ".*" == t.slice(-2), n.wildcard && (n.name = t.slice(0, -2)))), n)
}

function A(e, t, a, n) {
	let r = [];
	for (let o = 0, d = t.length; o < d; o++) {
		let d, i = t[o],
			s = i.name;
		if (i.literal ? d = i.value : i.structured ? (d = Polymer.Path.get(e, s), void 0 === d && (d = n[s])) : d = e[s], i.wildcard) {
			let e = 0 === s.indexOf(a + "."),
				t = 0 === a.indexOf(s) && !e;
			r[o] = {
				path: t ? a : s,
				value: t ? n[a] : d,
				base: d
			}
		}
		else r[o] = d
	}
	return r
}

function L(e, t, a, n) {
	let r = a + ".splices";
	e.notifyPath(r, {
		indexSplices: n
	}), e.notifyPath(a + ".length", t.length), e.__data[r] = {
		indexSplices: null
	}
}

function k(e, t, a, n, r, o) {
	L(e, t, a, [{
		index: n,
		addedCount: r,
		removed: o,
		object: t,
		type: "splice"
	}])
}

function H(e) {
	return e[0].toUpperCase() + e.substring(1)
}
const z = Polymer.CaseMap;
let R = 0;
const D = {
		COMPUTE: "__computeEffects",
		REFLECT: "__reflectEffects",
		NOTIFY: "__notifyEffects",
		PROPAGATE: "__propagateEffects",
		OBSERVE: "__observeEffects",
		READ_ONLY: "__readOnly"
	},
	w = [],
	M = "(?:[a-zA-Z_$][\\w.:$\\-*]*)",
	S = "(?:" + M + "|" + "(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)" + "|" + ("(?:" + "(?:'(?:[^'\\\\]|\\\\.)*')" + "|" + "(?:\"(?:[^\"\\\\]|\\\\.)*\")" + ")") + "\\s*)",
	F = new RegExp("(\\[\\[|{{)\\s*" + "(?:(!)\\s*)?" + ("(" + M + "\\s*" + ("(?:\\(\\s*(?:" + ("(?:" + S + "(?:,\\s*" + S + ")*)") + "?)\\)\\s*)") + "?)") + "(?:]]|}})", "g");
Polymer.PropertyEffects = Polymer.dedupingMixin(a => {
	const n = Polymer.TemplateStamp(Polymer.PropertyAccessors(a));
	class d extends n {
		get PROPERTY_EFFECT_TYPES() {
			return D
		}
		_initializeProperties() {
			super._initializeProperties(), B.registerHost(this), this.__dataClientsInitialized = !1, this.__dataPendingClients = null, this.__dataToNotify = null, this.__dataLinkedPaths = null, this.__dataHasPaths = !1, this.__dataCompoundStorage = this.__dataCompoundStorage || null, this.__dataHost = this.__dataHost || null, this.__dataTemp = {}
		}
		_initializeProtoProperties(e) {
			this.__data = Object.create(e), this.__dataPending = Object.create(e), this.__dataOld = {}
		}
		_initializeInstanceProperties(e) {
			let t = this.__readOnly;
			for (let a in e) t && t[a] || (this.__dataPending = this.__dataPending || {}, this.__dataOld = this.__dataOld || {}, this.__data[a] = this.__dataPending[a] = e[a])
		}
		_addPropertyEffect(t, a, n) {
			this._createPropertyAccessor(t, a == D.READ_ONLY);
			let r = e(this, a)[t];
			r || (r = this[a][t] = []), r.push(n)
		}
		_removePropertyEffect(t, a, n) {
			let r = e(this, a)[t],
				o = r.indexOf(n);
			0 <= o && r.splice(o, 1)
		}
		_hasPropertyEffect(e, t) {
			let a = this[t];
			return !!(a && a[e])
		}
		_hasReadOnlyEffect(e) {
			return this._hasPropertyEffect(e, D.READ_ONLY)
		}
		_hasNotifyEffect(e) {
			return this._hasPropertyEffect(e, D.NOTIFY)
		}
		_hasReflectEffect(e) {
			return this._hasPropertyEffect(e, D.REFLECT)
		}
		_hasComputedEffect(e) {
			return this._hasPropertyEffect(e, D.COMPUTE)
		}
		_setPendingPropertyOrPath(e, t, a, n) {
			if (n || Polymer.Path.root(Array.isArray(e) ? e[0] : e) !== e) {
				if (!n) {
					let a = Polymer.Path.get(this, e);
					if (e = Polymer.Path.set(this, e, t), !e || !super._shouldPropertyChange(e, t, a)) return !1
				}
				if (this.__dataHasPaths = !0, this._setPendingProperty(e, t, a)) return g(this, e, t), !0
			}
			else {
				if (this.__dataHasAccessor && this.__dataHasAccessor[e]) return this._setPendingProperty(e, t, a);
				this[e] = t
			}
			return !1
		}
		_setUnmanagedPropertyToNode(e, t, a) {
			(a !== e[t] || "object" == typeof a) && (e[t] = a)
		}
		_setPendingProperty(e, t, a) {
			let n = this.__dataHasPaths && Polymer.Path.isPath(e),
				r = n ? this.__dataTemp : this.__data;
			if (this._shouldPropertyChange(e, t, r[e])) return this.__dataPending || (this.__dataPending = {}, this.__dataOld = {}), e in this.__dataOld || (this.__dataOld[e] = this.__data[e]), n ? this.__dataTemp[e] = t : this.__data[e] = t, this.__dataPending[e] = t, (n || this.__notifyEffects && this.__notifyEffects[e]) && (this.__dataToNotify = this.__dataToNotify || {}, this.__dataToNotify[e] = a), !0
		}
		_setProperty(e, t) {
			this._setPendingProperty(e, t, !0) && this._invalidateProperties()
		}
		_invalidateProperties() {
			this.__dataInitialized && this._flushProperties()
		}
		_enqueueClient(e) {
			this.__dataPendingClients = this.__dataPendingClients || [], e !== this && this.__dataPendingClients.push(e)
		}
		_flushClients() {
			if (!this.__dataClientsInitialized) this.__dataClientsInitialized = !0, this._readyClients(), this.__dataInitialized = !0;
			else {
				let e = this.__dataPendingClients;
				if (e) {
					this.__dataPendingClients = null;
					for (let t, a = 0; a < e.length; a++) t = e[a], t.__dataPending && t._flushProperties()
				}
			}
		}
		_readyClients() {
			let e = this.__dataPendingClients;
			if (e) {
				this.__dataPendingClients = null;
				for (let t, a = 0; a < e.length; a++) t = e[a], t.__dataEnabled || t._enableProperties()
			}
		}
		setProperties(e, t) {
			for (let a in e) !t && this.__readOnly && this.__readOnly[a] || this._setPendingPropertyOrPath(a, e[a], !0);
			this._invalidateProperties()
		}
		ready() {
			this._flushProperties(), this.__dataClientsInitialized || this._flushClients(), this.__dataPending && this._flushProperties()
		}
		_propertiesChanged(e, a, n) {
			let r = this.__dataHasPaths;
			this.__dataHasPaths = !1, l(this, a, n, r);
			let d = this.__dataToNotify;
			this.__dataToNotify = null, this._propagatePropertyChanges(a, n, r), this._flushClients(), t(this, this.__reflectEffects, a, n, r), t(this, this.__observeEffects, a, n, r), d && o(this, d, a, n, r), 1 == this.__dataCounter && (this.__dataTemp = {})
		}
		_propagatePropertyChanges(e, a, n) {
			this.__propagateEffects && t(this, this.__propagateEffects, e, a, n);
			for (let r = this.__templateInfo; r;) t(this, r.propertyEffects, e, a, n, r.nodeList), r = r.nextTemplateInfo
		}
		linkPaths(e, t) {
			e = Polymer.Path.normalize(e), t = Polymer.Path.normalize(t), this.__dataLinkedPaths = this.__dataLinkedPaths || {}, this.__dataLinkedPaths[e] = t
		}
		unlinkPaths(e) {
			e = Polymer.Path.normalize(e), this.__dataLinkedPaths && delete this.__dataLinkedPaths[e]
		}
		notifySplices(e, t) {
			let a = {},
				n = Polymer.Path.get(this, e, a);
			L(this, n, a.path, t)
		}
		get(e, t) {
			return Polymer.Path.get(t || this, e)
		}
		set(e, t, a) {
			a ? Polymer.Path.set(a, e, t) : (!this.__readOnly || !this.__readOnly[e]) && this._setPendingPropertyOrPath(e, t, !0) && this._invalidateProperties()
		}
		push(e, ...t) {
			let a = {},
				n = Polymer.Path.get(this, e, a),
				r = n.length,
				o = n.push(...t);
			return t.length && k(this, n, a.path, r, t.length, []), o
		}
		pop(e) {
			let t = {},
				a = Polymer.Path.get(this, e, t),
				n = !!a.length,
				r = a.pop();
			return n && k(this, a, t.path, a.length, 0, [r]), r
		}
		splice(e, t, a, ...n) {
			var r = Math.floor;
			let o = {},
				d = Polymer.Path.get(this, e, o);
			t = 0 > t ? d.length - r(-t) : r(t), t || (t = 0);
			let i = d.splice(t, a, ...n);
			return (n.length || i.length) && k(this, d, o.path, t, n.length, i), i
		}
		shift(e) {
			let t = {},
				a = Polymer.Path.get(this, e, t),
				n = !!a.length,
				r = a.shift();
			return n && k(this, a, t.path, 0, 0, [r]), r
		}
		unshift(e, ...t) {
			let a = {},
				n = Polymer.Path.get(this, e, a),
				r = n.unshift(...t);
			return t.length && k(this, n, a.path, 0, t.length, []), r
		}
		notifyPath(e, t) {
			let a;
			if (1 == arguments.length) {
				let n = {};
				t = Polymer.Path.get(this, e, n), a = n.path
			}
			else a = Array.isArray(e) ? Polymer.Path.normalize(e) : e;
			this._setPendingPropertyOrPath(a, t, !0, !0) && this._invalidateProperties()
		}
		_createReadOnlyProperty(e, t) {
			this._addPropertyEffect(e, D.READ_ONLY), t && (this["_set" + H(e)] = function (t) {
				this._setProperty(e, t)
			})
		}
		_createPropertyObserver(e, t, a) {
			let n = {
				property: e,
				methodName: t,
				dynamicFn: a
			};
			this._addPropertyEffect(e, D.OBSERVE, {
				fn: r,
				info: n,
				trigger: {
					name: e
				}
			}), a && this._addPropertyEffect(t, D.OBSERVE, {
				fn: r,
				info: n,
				trigger: {
					name: t
				}
			})
		}
		_createMethodObserver(e, t) {
			let a = N(e);
			if (!a) throw new Error("Malformed observer expression '" + e + "'");
			O(this, a, D.OBSERVE, v, null, t)
		}
		_createNotifyingProperty(e) {
			this._addPropertyEffect(e, D.NOTIFY, {
				fn: s,
				info: {
					eventName: z.camelToDashCase(e) + "-changed",
					property: e
				}
			})
		}
		_createReflectedProperty(e) {
			let t = z.camelToDashCase(e);
			"-" === t[0] ? console.warn("Property " + e + " cannot be reflected to attribute " + t + " because \"-\" is not a valid starting attribute name. Use a lowercase first letter for the property thisead.") : this._addPropertyEffect(e, D.REFLECT, {
				fn: _,
				info: {
					attrName: t
				}
			})
		}
		_createComputedProperty(e, t, a) {
			let n = N(t);
			if (!n) throw new Error("Malformed computed expression '" + t + "'");
			O(this, n, D.COMPUTE, h, e, a)
		}
		static addPropertyEffect(e, t, a) {
			this.prototype._addPropertyEffect(e, t, a)
		}
		static createPropertyObserver(e, t, a) {
			this.prototype._createPropertyObserver(e, t, a)
		}
		static createMethodObserver(e, t) {
			this.prototype._createMethodObserver(e, t)
		}
		static createNotifyingProperty(e) {
			this.prototype._createNotifyingProperty(e)
		}
		static createReadOnlyProperty(e, t) {
			this.prototype._createReadOnlyProperty(e, t)
		}
		static createReflectedProperty(e) {
			this.prototype._createReflectedProperty(e)
		}
		static createComputedProperty(e, t, a) {
			this.prototype._createComputedProperty(e, t, a)
		}
		static bindTemplate(e) {
			return this.prototype._bindTemplate(e)
		}
		_bindTemplate(e, t) {
			let a = this.constructor._parseTemplate(e),
				n = this.__templateInfo == a;
			if (!n)
				for (let e in a.propertyEffects) this._createPropertyAccessor(e);
			if (t && (a = Object.create(a), a.wasPreBound = n, !n && this.__templateInfo)) {
				let e = this.__templateInfoLast || this.__templateInfo;
				return this.__templateInfoLast = e.nextTemplateInfo = a, a.previousTemplateInfo = e, a
			}
			return this.__templateInfo = a
		}
		static _addTemplatePropertyEffect(e, t, a) {
			let n = e.hostProps = e.hostProps || {};
			n[t] = !0;
			let r = e.propertyEffects = e.propertyEffects || {},
				o = r[t] = r[t] || [];
			o.push(a)
		}
		_stampTemplate(e) {
			B.beginHosting(this);
			let a = super._stampTemplate(e);
			B.endHosting(this);
			let n = this._bindTemplate(e, !0);
			if (n.nodeList = a.nodeList, !n.wasPreBound) {
				let e = n.childNodes = [];
				for (let t = a.firstChild; t; t = t.nextSibling) e.push(t)
			}
			return a.templateInfo = n, E(this, n), this.__dataInitialized && t(this, n.propertyEffects, this.__data, null, !1, n.nodeList), a
		}
		_removeBoundDom(e) {
			let t = e.templateInfo;
			t.previousTemplateInfo && (t.previousTemplateInfo.nextTemplateInfo = t.nextTemplateInfo), t.nextTemplateInfo && (t.nextTemplateInfo.previousTemplateInfo = t.previousTemplateInfo), this.__templateInfoLast == t && (this.__templateInfoLast = t.previousTemplateInfo), t.previousTemplateInfo = t.nextTemplateInfo = null;
			let a = t.childNodes;
			for (let t, n = 0; n < a.length; n++) t = a[n], t.parentNode.removeChild(t)
		}
		static _parseTemplateNode(e, t, a) {
			let n = super._parseTemplateNode(e, t, a);
			if (e.nodeType === Node.TEXT_NODE) {
				let r = this._parseBindings(e.textContent, t);
				r && (e.textContent = b(r) || " ", f(this, t, a, "text", "textContent", r), n = !0)
			}
			return n
		}
		static _parseTemplateNodeAttribute(e, t, a, n, r) {
			let o = this._parseBindings(r, t);
			if (o) {
				let r = n,
					d = "property";
				"$" == n[n.length - 1] && (n = n.slice(0, -1), d = "attribute");
				let i = b(o);
				return i && "attribute" == d && e.setAttribute(n, i), "input" === e.localName && "value" === r && e.setAttribute(r, ""), e.removeAttribute(r), "property" === d && (n = Polymer.CaseMap.dashToCamelCase(n)), f(this, t, a, d, n, o, i), !0
			}
			return super._parseTemplateNodeAttribute(e, t, a, n, r)
		}
		static _parseTemplateNestedTemplate(e, t, a) {
			let n = super._parseTemplateNestedTemplate(e, t, a),
				r = a.templateInfo.hostProps;
			for (let n in r) {
				f(this, t, a, "property", "_host_" + n, [{
					mode: "{",
					source: n,
					dependencies: [n]
				}])
			}
			return n
		}
		static _parseBindings(e, t) {
			let a, n = [],
				r = 0;
			for (; null !== (a = F.exec(e));) {
				a.index > r && n.push({
					literal: e.slice(r, a.index)
				});
				let o, d, i, s = a[1][0],
					p = !!a[2],
					_ = a[3].trim();
				"{" == s && 0 < (i = _.indexOf("::")) && (d = _.substring(i + 2), _ = _.substring(0, i), o = !0);
				let l = N(_),
					h = [];
				if (l) {
					let {
						args: e,
						methodName: a
					} = l;
					for (let t, a = 0; a < e.length; a++) t = e[a], t.literal || h.push(t);
					let n = t.dynamicFns;
					(n && n[a] || l.static) && (h.push(a), l.dynamicFn = !0)
				}
				else h.push(_);
				n.push({
					source: _,
					mode: s,
					negate: p,
					customEvent: o,
					signature: l,
					dependencies: h,
					event: d
				}), r = F.lastIndex
			}
			if (r && r < e.length) {
				let t = e.substring(r);
				t && n.push({
					literal: t
				})
			}
			return n.length ? n : void 0
		}
		static _evaluateBinding(e, t, a, n, r, o) {
			let d;
			return d = t.signature ? v(e, a, n, r, t.signature) : a == t.source ? o && Polymer.Path.isPath(a) ? Polymer.Path.get(e, a) : e.__data[a] : Polymer.Path.get(e, t.source), t.negate && (d = !d), d
		}
	}
	return d
});
let B = {
stack: [],
registerHost(e) {
	if (this.stack.length) {
		let t = this.stack[this.stack.length - 1];
		t._enqueueClient(e)
	}
},
beginHosting(e) {
	this.stack.push(e)
},
endHosting(e) {
	let t = this.stack.length;
	t && this.stack[t - 1] == e && this.stack.pop()
}
}
})(); < /script><script>(function(){"use strict";let a=function(){};a.is,a.extends,a.properties,a.observers,a.template,Polymer.ElementMixin=Polymer.dedupingMixin(a=>{function b(a){return a.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",a))||(a.__ownProperties=a.hasOwnProperty(JSCompiler_renameProperty("properties",a))?a.properties:{}),a.__ownProperties}function c(a){return a.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",a))||(a.__ownObservers=a.hasOwnProperty(JSCompiler_renameProperty("observers",a))?a.observers:[]),a.__ownObservers}function d(a,b){for(let c in b){let d=b[c];"function"==typeof d&&(d={type:d}),a[c]=d}return a}function e(a){if(!a.hasOwnProperty(JSCompiler_renameProperty("__classProperties",a))){a.__classProperties=d({},b(a));let c=Object.getPrototypeOf(a.prototype).constructor;c.prototype instanceof p&&(a.__classProperties=Object.assign(Object.create(e(c)),a.__classProperties))}return a.__classProperties}function f(a){if(!a.hasOwnProperty(JSCompiler_renameProperty("__classPropertyDefaults",a))){a.__classPropertyDefaults=null;let b=e(a);for(let c in b){let d=b[c];"value"in d&&(a.__classPropertyDefaults=a.__classPropertyDefaults||{},a.__classPropertyDefaults[c]=d)}}return a.__classPropertyDefaults}function g(a){return a.hasOwnProperty(JSCompiler_renameProperty("__finalized",a))}function h(a){let b=a.prototype,c=Object.getPrototypeOf(b).constructor;c.prototype instanceof p&&c.finalize(),i(a)}function i(a){a.__finalized=!0;let d=a.prototype;a.hasOwnProperty(JSCompiler_renameProperty("is",a))&&a.is&&Polymer.telemetry.register(d);let e=b(a);e&&j(d,e);let f=c(a);f&&k(d,f,e);let g=a.template;if(g){if("string"===typeof g){let a=document.createElement("template");a.innerHTML=g,g=a}else g=g.cloneNode(!0);d._template=g}}function j(a,b){for(let c in b)l(a,c,b[c],b)}function k(a,b,c){for(let d=0;d<b.length;d++)a._createMethodObserver(b[d],c)}function l(a,b,c,d){c.computed&&(c.readOnly=!0),c.computed&&!a._hasReadOnlyEffect(b)&&a._createComputedProperty(b,c.computed,d),c.readOnly&&!a._hasReadOnlyEffect(b)&&a._createReadOnlyProperty(b,!c.computed),c.reflectToAttribute&&!a._hasReflectEffect(b)&&a._createReflectedProperty(b),c.notify&&!a._hasNotifyEffect(b)&&a._createNotifyingProperty(b),c.observer&&a._createPropertyObserver(b,c.observer,d[c.observer])}function m(a,b,c,d,e){let f=Polymer.StyleGather.cssFromTemplate(b,c)+Polymer.StyleGather.cssFromModuleImports(d);if(f){let a=document.createElement("style");a.textContent=f,b.content.insertBefore(a,b.content.firstChild)}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(b,d,e),a._bindTemplate(b)}const n=Polymer.PropertyEffects(a);let o=Polymer.CaseMap;class p extends n{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){let a=[],b=e(this);for(let c in b)a.push(Polymer.CaseMap.camelToDashCase(c));this.__observedAttributes=a}return this.__observedAttributes}static finalize(){g(this)||h(this)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty("_template",this))||(this._template=Polymer.DomModule.import(this.is,"template")||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const a=Polymer.DomModule.import(this.is);this._importPath=a?a.assetpath:Object.getPrototypeOf(this.prototype).constructor.importPath}return this._importPath}_initializeProperties(){Polymer.telemetry.instanceCount++,this.constructor.finalize();const a=this.constructor.importPath;if(this._template&&!this._template.__polymerFinalized){this._template.__polymerFinalized=!0;const b=a?Polymer.ResolveUrl.resolveUrl(a):"";m(this.__proto__,this._template,b,this.localName)}super._initializeProperties(),this.rootPath=Polymer.rootPath,this.importPath=a;let b=f(this.constructor);if(b)for(let a in b){let c=b[a];if(!this.hasOwnProperty(a)){let b="function"==typeof c.value?c.value.call(this):c.value;this._hasAccessor(a)?this._setPendingProperty(a,b,!0):this[a]=b}}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),this._enableProperties()}disconnectedCallback(){}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(a){if(!this.attachShadow)throw new Error("ShadowDOM not available. Polymer.Element can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.");else if(a)return this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(a),this.shadowRoot}attributeChangedCallback(a,b,c){if(b!==c){let b=o.dashToCamelCase(a),d=e(this.constructor)[b].type;this._hasReadOnlyEffect(b)||this._attributeToProperty(a,c,d)}}updateStyles(a){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,a)}resolveUrl(a,b){return!b&&this.importPath&&(b=Polymer.ResolveUrl.resolveUrl(this.importPath)),Polymer.ResolveUrl.resolveUrl(a,b)}static _parseTemplateContent(a,b,c){return b.dynamicFns=b.dynamicFns||e(this),super._parseTemplateContent(a,b,c)}}return p}),Polymer.telemetry={instanceCount:0,registrations:[],_regLog:function(a){console.log("["+a.is+"]: registered")},register:function(a){this.registrations.push(a),Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Polymer.updateStyles=function(a){window.ShadyCSS&&window.ShadyCSS.styleDocument(a)},Polymer.rootPath=Polymer.rootPath||Polymer.ResolveUrl.pathFromUrl(document.baseURI||window.location.href)})();</script > < script > (function () {
	"use strict";
	class a {
		constructor() {
			this._asyncModule = null, this._callback = null, this._timer = null
		}
		setConfig(a, b) {
			this._asyncModule = a, this._callback = b, this._timer = this._asyncModule.run(() => {
				this._timer = null, this._callback()
			})
		}
		cancel() {
			this.isActive() && (this._asyncModule.cancel(this._timer), this._timer = null)
		}
		flush() {
			this.isActive() && (this.cancel(), this._callback())
		}
		isActive() {
			return null != this._timer
		}
		static debounce(b, c, d) {
			return b instanceof a ? b.cancel() : b = new a, b.setConfig(c, d), b
		}
	}
	Polymer.Debouncer = a
})(); < /script><script>(function(){"use strict";function a(a){let b=q?["click"]:m;for(let c,d=0;d<b.length;d++)c=b[d],a?document.addEventListener(c,r,!0):document.removeEventListener(c,r,!0)}function b(a){let b=a.type;if(-1===m.indexOf(b))return!1;if("mousemove"===b){let b=void 0===a.buttons?1:a.buttons;return a instanceof window.MouseEvent&&!o&&(b=n[a.which]||0),!!(1&b)}else{let b=void 0===a.button?0:a.button;return 0===b}}function c(a){if("click"===a.type){if(0===a.detail)return!0;let b=u._findOriginalTarget(a);if(b.nodeType!==Node.ELEMENT_NODE)return!0;let c=b.getBoundingClientRect(),d=a.pageX,e=a.pageY;return!(d>=c.left&&d<=c.right&&e>=c.top&&e<=c.bottom)}return!1}function d(a){let b="auto",c=a.composedPath&&a.composedPath();if(c)for(let a,d=0;d<c.length;d++)if(a=c[d],a.__polymerGesturesTouchAction){b=a.__polymerGesturesTouchAction;break}return b}function f(a,b,c){a.movefn=b,a.upfn=c,document.addEventListener("mousemove",b),document.addEventListener("mouseup",c)}function g(a){document.removeEventListener("mousemove",a.movefn),document.removeEventListener("mouseup",a.upfn),a.movefn=null,a.upfn=null}var h=Math.abs;let e="string"===typeof document.head.style.touchAction,i="__polymerGestures",j="__polymerGesturesHandled",k=25,l=5,m=["mousedown","mousemove","mouseup","click"],n=[0,1,4,2],o=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(a){return!1}}(),p=!1;(function(){try{let a=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch(a){}})();let q=navigator.userAgent.match(/iP ( ? : [oa] d | hone) | Android / ), r = function (a) {
	let b = a.sourceCapabilities;
	if ((!b || b.firesTouchEvents) && (a[j] = {
			skip: !0
		}, "click" === a.type)) {
		let b = a.composedPath && a.composedPath();
		if (b)
			for (let a = 0; a < b.length; a++)
				if (b[a] === s.mouse.target) return;
		a.preventDefault(), a.stopPropagation()
	}
}, s = {
	mouse: {
		target: null,
		mouseIgnoreJob: null
	},
	touch: {
		x: 0,
		y: 0,
		id: -1,
		scrollDecided: !1
	}
};
document.addEventListener("touchend", function (b) {
	s.mouse.mouseIgnoreJob || a(!0);
	s.mouse.target = b.composedPath()[0], s.mouse.mouseIgnoreJob = Polymer.Debouncer.debounce(s.mouse.mouseIgnoreJob, Polymer.Async.timeOut.after(2500), function () {
		a(), s.mouse.target = null, s.mouse.mouseIgnoreJob = null
	})
}, !!p && {
	passive: !0
});
const u = {
	gestures: {},
	recognizers: [],
	deepTargetFind: function (a, b) {
		let c = document.elementFromPoint(a, b),
			d = c;
		for (; d && d.shadowRoot && !window.ShadyDOM;) {
			let e = d;
			if (d = d.shadowRoot.elementFromPoint(a, b), e === d) break;
			d && (c = d)
		}
		return c
	},
	_findOriginalTarget: function (a) {
		return a.composedPath ? a.composedPath()[0] : a.target
	},
	_handleNative: function (a) {
		let b, c = a.type,
			d = a.currentTarget,
			f = d[i];
		if (f) {
			let d = f[c];
			if (d) {
				if (!a[j] && (a[j] = {}, "touch" === c.slice(0, 5))) {
					let b = a.changedTouches[0];
					if ("touchstart" === c && 1 === a.touches.length && (s.touch.id = b.identifier), s.touch.id !== b.identifier) return;
					e || "touchstart" !== c && "touchmove" !== c || u._handleTouchAction(a)
				}
				if (b = a[j], !b.skip) {
					let e = u.recognizers;
					for (let c, f = 0; f < e.length; f++) c = e[f], d[c.name] && !b[c.name] && c.flow && -1 < c.flow.start.indexOf(a.type) && c.reset && c.reset();
					for (let f, g = 0; g < e.length; g++) f = e[g], d[f.name] && !b[f.name] && (b[f.name] = !0, f[c](a))
				}
			}
		}
	},
	_handleTouchAction: function (a) {
		let b = a.changedTouches[0],
			c = a.type;
		if ("touchstart" === c) s.touch.x = b.clientX, s.touch.y = b.clientY, s.touch.scrollDecided = !1;
		else if ("touchmove" === c) {
			if (s.touch.scrollDecided) return;
			s.touch.scrollDecided = !0;
			let c = d(a),
				e = !1,
				f = h(s.touch.x - b.clientX),
				g = h(s.touch.y - b.clientY);
			a.cancelable && ("none" === c ? e = !0 : "pan-x" === c ? e = g > f : "pan-y" === c && (e = f > g)), e ? a.preventDefault() : u.prevent("track")
		}
	},
	addListener: function (a, b, c) {
		if (this.gestures[b]) return this._add(a, b, c), !0
	},
	removeListener: function (a, b, c) {
		if (this.gestures[b]) return this._remove(a, b, c), !0
	},
	_add: function (a, b, c) {
		let d = this.gestures[b],
			e = d.deps,
			f = d.name,
			g = a[i];
		g || (a[i] = g = {});
		for (let d, h, j = 0; j < e.length; j++)(d = e[j], !(q && -1 < m.indexOf(d) && "click" !== d)) && (h = g[d], h || (g[d] = h = {
			_count: 0
		}), 0 === h._count && a.addEventListener(d, this._handleNative), h[f] = (h[f] || 0) + 1, h._count = (h._count || 0) + 1);
		a.addEventListener(b, c), d.touchAction && this.setTouchAction(a, d.touchAction)
	},
	_remove: function (a, b, c) {
		let d = this.gestures[b],
			e = d.deps,
			f = d.name,
			g = a[i];
		if (g)
			for (let b, c, d = 0; d < e.length; d++) b = e[d], c = g[b], c && c[f] && (c[f] = (c[f] || 1) - 1, c._count = (c._count || 1) - 1, 0 === c._count && a.removeEventListener(b, this._handleNative));
		a.removeEventListener(b, c)
	},
	register: function (a) {
		this.recognizers.push(a);
		for (let b = 0; b < a.emits.length; b++) this.gestures[a.emits[b]] = a
	},
	_findRecognizerByEvent: function (a) {
		for (let b, c = 0; c < this.recognizers.length; c++) {
			b = this.recognizers[c];
			for (let c, d = 0; d < b.emits.length; d++)
				if (c = b.emits[d], c === a) return b
		}
		return null
	},
	setTouchAction: function (a, b) {
		e && (a.style.touchAction = b), a["__polymerGesturesTouchAction"] = b
	},
	_fire: function (a, b, c) {
		let d = new Event(b, {
			bubbles: !0,
			cancelable: !0,
			composed: !0
		});
		if (d.detail = c, a.dispatchEvent(d), d.defaultPrevented) {
			let a = c.preventer || c.sourceEvent;
			a && a.preventDefault && a.preventDefault()
		}
	},
	prevent: function (a) {
		let b = this._findRecognizerByEvent(a);
		b.info && (b.info.prevent = !0)
	},
	resetMouseCanceller: function () {
		s.mouse.mouseIgnoreJob && s.mouse.mouseIgnoreJob.flush()
	}
};
u.register({
name: "downup",
deps: ["mousedown", "touchstart", "touchend"],
flow: {
	start: ["mousedown", "touchstart"],
	end: ["mouseup", "touchend"]
},
emits: ["down", "up"],
info: {
	movefn: null,
	upfn: null
},
reset: function () {
	g(this.info)
},
mousedown: function (a) {
	if (!b(a)) return;
	let c = u._findOriginalTarget(a),
		d = this;
	f(this.info, function (a) {
		b(a) || (d._fire("up", c, a), g(d.info))
	}, function (a) {
		b(a) && d._fire("up", c, a), g(d.info)
	}), this._fire("down", c, a)
},
touchstart: function (a) {
	this._fire("down", u._findOriginalTarget(a), a.changedTouches[0], a)
},
touchend: function (a) {
	this._fire("up", u._findOriginalTarget(a), a.changedTouches[0], a)
},
_fire: function (a, b, c, d) {
	u._fire(b, a, {
		x: c.clientX,
		y: c.clientY,
		sourceEvent: c,
		preventer: d,
		prevent: function (a) {
			return u.prevent(a)
		}
	})
}
}), u.register({
name: "track",
touchAction: "none",
deps: ["mousedown", "touchstart", "touchmove", "touchend"],
flow: {
	start: ["mousedown", "touchstart"],
	end: ["mouseup", "touchend"]
},
emits: ["track"],
info: {
	x: 0,
	y: 0,
	state: "start",
	started: !1,
	moves: [],
	addMove: function (a) {
		this.moves.length > 2 && this.moves.shift(), this.moves.push(a)
	},
	movefn: null,
	upfn: null,
	prevent: !1
},
reset: function () {
	this.info.state = "start", this.info.started = !1, this.info.moves = [], this.info.x = 0, this.info.y = 0, this.info.prevent = !1, g(this.info)
},
hasMovedEnough: function (a, b) {
	if (this.info.prevent) return !1;
	if (this.info.started) return !0;
	let c = h(this.info.x - a),
		d = h(this.info.y - b);
	return c >= l || d >= l
},
mousedown: function (a) {
	if (!b(a)) return;
	let c = u._findOriginalTarget(a),
		d = this,
		h = function (a) {
			let e = a.clientX,
				f = a.clientY;
			d.hasMovedEnough(e, f) && (d.info.state = d.info.started ? "mouseup" === a.type ? "end" : "track" : "start", "start" === d.info.state && u.prevent("tap"), d.info.addMove({
				x: e,
				y: f
			}), !b(a) && (d.info.state = "end", g(d.info)), d._fire(c, a), d.info.started = !0)
		};
	f(this.info, h, function (a) {
		d.info.started && h(a), g(d.info)
	}), this.info.x = a.clientX, this.info.y = a.clientY
},
touchstart: function (a) {
	let b = a.changedTouches[0];
	this.info.x = b.clientX, this.info.y = b.clientY
},
touchmove: function (a) {
	let b = u._findOriginalTarget(a),
		c = a.changedTouches[0],
		d = c.clientX,
		e = c.clientY;
	this.hasMovedEnough(d, e) && ("start" === this.info.state && u.prevent("tap"), this.info.addMove({
		x: d,
		y: e
	}), this._fire(b, c), this.info.state = "track", this.info.started = !0)
},
touchend: function (a) {
	let b = u._findOriginalTarget(a),
		c = a.changedTouches[0];
	this.info.started && (this.info.state = "end", this.info.addMove({
		x: c.clientX,
		y: c.clientY
	}), this._fire(b, c, a))
},
_fire: function (a, b) {
	let c, d = this.info.moves[this.info.moves.length - 2],
		e = this.info.moves[this.info.moves.length - 1],
		f = e.x - this.info.x,
		g = e.y - this.info.y,
		h = 0;
	return d && (c = e.x - d.x, h = e.y - d.y), u._fire(a, "track", {
		state: this.info.state,
		x: b.clientX,
		y: b.clientY,
		dx: f,
		dy: g,
		ddx: c,
		ddy: h,
		sourceEvent: b,
		hover: function () {
			return u.deepTargetFind(b.clientX, b.clientY)
		}
	})
}
}), u.register({
name: "tap",
deps: ["mousedown", "click", "touchstart", "touchend"],
flow: {
	start: ["mousedown", "touchstart"],
	end: ["click", "touchend"]
},
emits: ["tap"],
info: {
	x: NaN,
	y: NaN,
	prevent: !1
},
reset: function () {
	this.info.x = NaN, this.info.y = NaN, this.info.prevent = !1
},
save: function (a) {
	this.info.x = a.clientX, this.info.y = a.clientY
},
mousedown: function (a) {
	b(a) && this.save(a)
},
click: function (a) {
	b(a) && this.forward(a)
},
touchstart: function (a) {
	this.save(a.changedTouches[0], a)
},
touchend: function (a) {
	this.forward(a.changedTouches[0], a)
},
forward: function (a, b) {
	let d = h(a.clientX - this.info.x),
		e = h(a.clientY - this.info.y),
		f = u._findOriginalTarget(a);
	(isNaN(d) || isNaN(e) || d <= k && e <= k || c(a)) && !this.info.prevent && u._fire(f, "tap", {
		x: a.clientX,
		y: a.clientY,
		sourceEvent: a,
		preventer: b
	})
}
}), u.findOriginalTarget = u._findOriginalTarget, u.add = u.addListener, u.remove = u.removeListener, Polymer.Gestures = u
})(); < /script><script>(function(){"use strict";const a=Polymer.Gestures;Polymer.GestureEventListeners=Polymer.dedupingMixin(b=>{return class extends b{_addEventListenerToNode(b,c,d){a.addListener(b,c,d)||super._addEventListenerToNode(b,c,d)}_removeEventListenerFromNode(b,c,d){a.removeListener(b,c,d)||super._removeEventListenerFromNode(b,c,d)}}})})();</script > < script > (function () {
	"use strict";

	function a(a) {
		window.HTMLImports ? HTMLImports.whenReady(a) : a()
	}
	Polymer.importHref = function (b, c, d, e) {
		let f = document.head.querySelector("link[href=\"" + b + "\"][import-href]");
		f || (f = document.createElement("link"), f.rel = "import", f.href = b, f.setAttribute("import-href", "")), e && f.setAttribute("async", "");
		let g = function () {
				f.removeEventListener("load", h), f.removeEventListener("error", i)
			},
			h = function (b) {
				g(), f.__dynamicImportLoaded = !0, c && a(() => {
					c(b)
				})
			},
			i = function (b) {
				g(), f.parentNode && f.parentNode.removeChild(f), d && a(() => {
					d(b)
				})
			};
		return f.addEventListener("load", h), f.addEventListener("error", i), null == f.parentNode ? document.head.appendChild(f) : f.__dynamicImportLoaded && f.dispatchEvent(new Event("load")), f
	}
})(); < /script><script>(function(){"use strict";function a(){e=!0,requestAnimationFrame(function(){e=!1,b(f),setTimeout(function(){c(g)})})}function b(a){for(;a.length;)d(a.shift())}function c(a){for(let b=0,c=a.length;b<c;b++)d(a.shift())}function d(a){const b=a[0],c=a[1],d=a[2];try{c.apply(b,d)}catch(a){setTimeout(()=>{throw a})}}let e=!1,f=[],g=[];Polymer.RenderStatus={beforeNextRender:function(b,c,d){e||a(),f.push([b,c,d])},afterNextRender:function(b,c,d){e||a(),g.push([b,c,d])},flush:function(){for(;f.length||g.length;)b(f),b(g);e=!1}}})();</script > < script > (function () {
	"use strict";

	function a() {
		document.body.removeAttribute("unresolved")
	}
	window.WebComponents ? window.addEventListener("WebComponentsReady", a) : "interactive" === document.readyState || "complete" === document.readyState ? a() : window.addEventListener("DOMContentLoaded", a)
})(); < /script><script>(function(){"use strict";function a(a,b,c){return{index:a,removed:b,addedCount:c}}const b=1,c=2,d=3,e={calcEditDistances(a,b,c,d,e,f){let g=f-e+1,h=c-b+1,k=Array(g);for(let j=0;j<g;j++)k[j]=Array(h),k[j][0]=j;for(let g=0;g<h;g++)k[0][g]=g;for(let l=1;l<g;l++)for(let c=1;c<h;c++)if(this.equals(a[b+c-1],d[e+l-1]))k[l][c]=k[l-1][c-1];else{let a=k[l-1][c]+1,b=k[l][c-1]+1;k[l][c]=a<b?a:b}return k},spliceOperationsFromEditDistances(a){let e=a.length-1,f=a[0].length-1,g=a[e][f],h=[];for(;0<e||0<f;){if(0==e){h.push(c),f--;continue}if(0==f){h.push(d),e--;continue}let i,j=a[e-1][f-1],k=a[e-1][f],l=a[e][f-1];i=k<l?k<j?k:j:l<j?l:j,i==j?(j==g?h.push(0):(h.push(b),g=j),e--,f--):i==k?(h.push(d),e--,g=k):(h.push(c),f--,g=l)}return h.reverse(),h},calcSplices(e,f,g,h,i,j){let k,l=0,m=0,n=Math.min(g-f,j-i);if(0==f&&0==i&&(l=this.sharedPrefix(e,h,n)),g==e.length&&j==h.length&&(m=this.sharedSuffix(e,h,n-l)),f+=l,i+=l,g-=m,j-=m,0==g-f&&0==j-i)return[];if(f==g){for(k=a(f,[],0);i<j;)k.removed.push(h[i++]);return[k]}if(i==j)return[a(f,[],g-f)];let o=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,f,g,h,i,j));k=void 0;let p=[],q=f,r=i;for(let l=0;l<o.length;l++)switch(o[l]){case 0:k&&(p.push(k),k=void 0),q++,r++;break;case b:k||(k=a(q,[],0)),k.addedCount++,q++,k.removed.push(h[r]),r++;break;case c:k||(k=a(q,[],0)),k.addedCount++,q++;break;case d:k||(k=a(q,[],0)),k.removed.push(h[r]),r++;}return k&&p.push(k),p},sharedPrefix(a,b,c){for(let d=0;d<c;d++)if(!this.equals(a[d],b[d]))return d;return c},sharedSuffix(a,b,c){let d=a.length,e=b.length,f=0;for(;f<c&&this.equals(a[--d],b[--e]);)f++;return f},calculateSplices(a,b){return this.calcSplices(a,0,a.length,b,0,b.length)},equals(a,b){return a===b}};Polymer.ArraySplice={calculateSplices(a,b){return e.calculateSplices(a,b)}}})();</script > < script > (function () {
			"use strict";

			function a(a) {
				return "slot" === a.localName
			}
			Polymer.FlattenedNodesObserver = class {
					static getFlattenedNodes(b) {
						return a(b) ? b.assignedNodes({
							flatten: !0
						}) : Array.from(b.childNodes).map(b => a(b) ? b.assignedNodes({
							flatten: !0
						}) : [b]).reduce((c, a) => c.concat(a), [])
					}
					constructor(a, b) {
						this._shadyChildrenObserver = null, this._nativeChildrenObserver = null, this._connected = !1, this._target = a, this.callback = b, this._effectiveNodes = [], this._observer = null, this._scheduled = !1, this._boundSchedule = () => {
							this._schedule()
						}, this.connect(), this._schedule()
					}
					connect() {
						a(this._target) ? this._listenSlots([this._target]) : (this._listenSlots(this._target.children), window.ShadyDOM ? this._shadyChildrenObserver = ShadyDOM.observeChildren(this._target, a => {
							this._processMutations(a)
						}) : (this._nativeChildrenObserver = new MutationObserver(a => {
							this._processMutations(a)
						}), this._nativeChildrenObserver.observe(this._target, {
							childList: !0
						}))), this._connected = !0
					}
					disconnect() {
						a(this._target) ? this._unlistenSlots([this._target]) : (this._unlistenSlots(this._target.children), window.ShadyDOM && this._shadyChildrenObserver ? (ShadyDOM.unobserveChildren(this._shadyChildrenObserver), this._shadyChildrenObserver = null) : this._nativeChildrenObserver && (this._nativeChildrenObserver.disconnect(), this._nativeChildrenObserver = null)), this._connected = !1
					}
					_schedule() {
						this._scheduled || (this._scheduled = !0, Polymer.Async.microTask.run(() => this.flush()))
					}
					_processMutations(a) {
						this._processSlotMutations(a), this.flush()
					}
					_processSlotMutations(a) {
						if (a)
							for (let b, c = 0; c < a.length; c++) b = a[c], b.addedNodes && this._listenSlots(b.addedNodes), b.removedNodes && this._unlistenSlots(b.removedNodes)
					}

flush() {
	if (!this._connected) return;
	window.ShadyDOM && ShadyDOM.flush(), this._nativeChildrenObserver ? this._processSlotMutations(this._nativeChildrenObserver.takeRecords()) : this.shadyChildrenObserver && this._processSlotMutations(this._shadyChildrenObserver.takeRecords()), this._scheduled = !1;
	let a = {
			target: this._target,
			addedNodes: [],
			removedNodes: []
		},
		b = this.constructor.getFlattenedNodes(this._target),
		c = Polymer.ArraySplice.calculateSplices(b, this._effectiveNodes);
	for (let b, d = 0; d < c.length && (b = c[d]); d++)
		for (let c, d = 0; d < b.removed.length && (c = b.removed[d]); d++) a.removedNodes.push(c);
	for (let d, e = 0; e < c.length && (d = c[e]); e++)
		for (let c = d.index; c < d.index + d.addedCount; c++) a.addedNodes.push(b[c]);
	this._effectiveNodes = b;
	let d = !1;
	return (a.addedNodes.length || a.removedNodes.length) && (d = !0, this.callback.call(this._target, a)), d
}
_listenSlots(b) {
	for (let c, d = 0; d < b.length; d++) c = b[d], a(c) && c.addEventListener("slotchange", this._boundSchedule)
}
_unlistenSlots(b) {
for (let c, d = 0; d < b.length; d++) c = b[d], a(c) && c.removeEventListener("slotchange", this._boundSchedule)
}
}
})(); < /script><script>(function(){"use strict";function a(){const a=!!b.length;for(;b.length;)try{b.shift().flush()}catch(a){setTimeout(()=>{throw a})}return a}let b=[];Polymer.enqueueDebouncer=function(a){b.push(a)},Polymer.flush=function(){let b,c;do b=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),c=a();while(b||c)}})();</script > < script > (function () {
	"use strict";
	const a = Element.prototype,
		b = a.matches || a.matchesSelector || a.mozMatchesSelector || a.msMatchesSelector || a.oMatchesSelector || a.webkitMatchesSelector,
		d = function (a, c) {
			return b.call(a, c)
		};
	class c {
		constructor(a) {
			this.node = a
		}
		observeNodes(a) {
			return new Polymer.FlattenedNodesObserver(this.node, a)
		}
		unobserveNodes(a) {
			a.disconnect()
		}
		notifyObserver() {}
		deepContains(a) {
			if (this.node.contains(a)) return !0;
			let b = a,
				c = a.ownerDocument;
			for (; b && b !== c && b !== this.node;) b = b.parentNode || b.host;
			return b === this.node
		}
		getOwnerRoot() {
			return this.node.getRootNode()
		}
		getDistributedNodes() {
			return "slot" === this.node.localName ? this.node.assignedNodes({
				flatten: !0
			}) : []
		}
		getDestinationInsertionPoints() {
			let a = [],
				b = this.node.assignedSlot;
			for (; b;) a.push(b), b = b.assignedSlot;
			return a
		}
		importNode(a, b) {
			let c = this.node instanceof Document ? this.node : this.node.ownerDocument;
			return c.importNode(a, b)
		}
		getEffectiveChildNodes() {
			return Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)
		}
		queryDistributedElements(a) {
			let b = this.getEffectiveChildNodes(),
				e = [];
			for (let f, c = 0, g = b.length; c < g && (f = b[c]); c++) f.nodeType === Node.ELEMENT_NODE && d(f, a) && e.push(f);
			return e
		}
		get activeElement() {
			let a = this.node;
			return a._activeElement === void 0 ? a.activeElement : a._activeElement
		}
	}(function (a, b) {
		for (let c, d = 0; d < b.length; d++) c = b[d], a[c] = function () {
			return this.node[c].apply(this.node, arguments)
		}
	})(c.prototype, ["cloneNode", "appendChild", "insertBefore", "removeChild", "replaceChild", "setAttribute", "removeAttribute", "querySelector", "querySelectorAll"]),
	function (a, b) {
		for (let c, d = 0; d < b.length; d++) c = b[d], Object.defineProperty(a, c, {
			get: function () {
				return this.node[c]
			},
			configurable: !0
		})
	}(c.prototype, ["parentNode", "firstChild", "lastChild", "nextSibling", "previousSibling", "firstElementChild", "lastElementChild", "nextElementSibling", "previousElementSibling", "childNodes", "children", "classList"]),
	function (a, b) {
		for (let c, d = 0; d < b.length; d++) c = b[d], Object.defineProperty(a, c, {
			get: function () {
				return this.node[c]
			},
			set: function (a) {
				this.node[c] = a
			},
			configurable: !0
		})
	}(c.prototype, ["textContent", "innerHTML"]);
	class e {
		constructor(a) {
			this.event = a
		}
		get rootTarget() {
			return this.event.composedPath()[0]
		}
		get localTarget() {
			return this.event.target
		}
		get path() {
			return this.event.composedPath()
		}
	}
	Polymer.dom = function (a) {
		a = a || document;
		let b = a instanceof Event ? e : c;
		return a.__domApi || (a.__domApi = new b(a)), a.__domApi
	}, Polymer.dom.matchesSelector = d, Polymer.dom.flush = Polymer.flush, Polymer.dom.addDebouncer = Polymer.enqueueDebouncer;
	let f = Polymer.Settings || {};
	f.useShadow = !window.ShadyDOM, f.useNativeCSSProperties = !(window.ShadyCSS && !window.ShadyCSS.nativeCss), f.useNativeCustomElements = !window.customElements.polyfillWrapFlushCallback, Polymer.Settings = f
})(); < /script><script>(function(){"use strict";let a=window.ShadyCSS;Polymer.LegacyElementMixin=Polymer.dedupingMixin(b=>{const c=Polymer.GestureEventListeners(Polymer.ElementMixin(b)),d={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class e extends c{constructor(){super(),this.root=this,this.created()}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(a,b,c){b!==c&&(super.attributeChangedCallback(a,b,c),this.attributeChanged(a,b,c))}attributeChanged(){}_initializeProperties(){let a=Object.getPrototypeOf(this);a.hasOwnProperty("__hasRegisterFinished")||(a.__hasRegisterFinished=!0,this._registered()),super._initializeProperties()}_registered(){}ready(){this._ensureAttributes(),this._applyListeners(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,b){return this._deserializeValue(a,b)}reflectPropertyToAttribute(a,b,c){this._propertyToAttribute(a,b,c)}serializeValueToAttribute(a,b,c){this._valueToNodeAttribute(c||this,a,b)}extend(a,b){if(!(a&&b))return a||b;let c=Object.getOwnPropertyNames(b);for(let d,e,f=0;f<c.length&&(d=c[f]);f++)e=Object.getOwnPropertyDescriptor(b,d),e&&Object.defineProperty(a,d,e);return a}mixin(a,b){for(let c in b)a[c]=b[c];return a}chainObject(a,b){return a&&b&&a!==b&&(a.__proto__=b),a}instanceTemplate(a){let b=this.constructor._contentForTemplate(a),c=document.importNode(b,!0);return c}fire(a,b,c){c=c||{},b=null===b||void 0===b?{}:b;let d=new Event(a,{bubbles:void 0===c.bubbles||c.bubbles,cancelable:!!c.cancelable,composed:void 0===c.composed||c.composed});d.detail=b;let e=c.node||this;return e.dispatchEvent(d),d}listen(a,b,c){a=a||this;let d=this.__boundListeners||(this.__boundListeners=new WeakMap),e=d.get(a);e||(e={},d.set(a,e));let f=b+c;e[f]||(e[f]=this._addMethodEventListenerToNode(a,b,c,this))}unlisten(a,b,c){a=a||this;let d=this.__boundListeners&&this.__boundListeners.get(a),e=b+c,f=d&&d[e];f&&(this._removeEventListenerFromNode(a,b,f),d[e]=null)}setScrollDirection(a,b){Polymer.Gestures.setTouchAction(b||this,d[a]||"auto")}$$(a){return this.root.querySelector(a)}get domHost(){let a=this.getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){window.ShadyDOM&&this.shadowRoot&&this.shadowRoot.forceRender()}getEffectiveChildNodes(){return Polymer.dom(this).getEffectiveChildNodes()}queryDistributedElements(a){return Polymer.dom(this).queryDistributedElements(a)}getEffectiveChildren(){let a=this.getEffectiveChildNodes();return a.filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),b=[];for(let d,c=0;d=a[c];c++)d.nodeType!==Node.COMMENT_NODE&&b.push(d.textContent);return b.join("")}queryEffectiveChildren(a){let b=this.queryDistributedElements(a);return b&&b[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let b=this.root.querySelector(a||"slot");return b?Polymer.dom(b).getDistributedNodes():[]}getContentChildren(a){return this.getContentChildNodes(a).filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}isLightDescendant(a){return this!==a&&this.contains(a)&&this.getRootNode()===a.getRootNode()}isLocalDescendant(a){return this.root===a.getRootNode()}scopeSubtree(){}getComputedStyleValue(b){return a.getComputedStyleValue(this,b)}debounce(a,b,c){return this._debouncers=this._debouncers||{},this._debouncers[a]=Polymer.Debouncer.debounce(this._debouncers[a],0<c?Polymer.Async.timeOut.after(c):Polymer.Async.microTask,b.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];return!!(b&&b.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.cancel()}async(a,b){return 0<b?Polymer.Async.timeOut.run(a.bind(this),b):~Polymer.Async.microTask.run(a.bind(this))}cancelAsync(a){0>a?Polymer.Async.microTask.cancel(~a):Polymer.Async.timeOut.cancel(a)}create(a,b){let c=document.createElement(a);if(b)if(c.setProperties)c.setProperties(b);else for(let a in b)c[a]=b[a];return c}importHref(a,b,c,d){let e=b?b.bind(this):null,f=c?c.bind(this):null;return Polymer.importHref(a,e,f,d)}elementMatches(a,b){return Polymer.dom.matchesSelector(b||this,a)}toggleAttribute(a,b,c){c=c||this,1==arguments.length&&(b=!c.hasAttribute(a)),b?c.setAttribute(a,""):c.removeAttribute(a)}toggleClass(a,b,c){c=c||this,1==arguments.length&&(b=!c.classList.contains(a)),b?c.classList.add(a):c.classList.remove(a)}transform(a,b){b=b||this,b.style.webkitTransform=a,b.style.transform=a}translate3d(a,b,c,d){d=d||this,this.transform("translate3d("+a+","+b+","+c+")",d)}arrayDelete(a,b){let c;if(!Array.isArray(a)){let d=Polymer.Path.get(this,a);if(c=d.indexOf(b),0<=c)return this.splice(a,c,1)}else if(c=a.indexOf(b),0<=c)return a.splice(c,1);return null}_logger(a,b){Array.isArray(b)&&1===b.length&&(b=b[0]);"log"===a||"warn"===a||"error"===a?console[a](...b):void 0}_log(...a){this._logger("log",a)}_warn(...a){this._logger("warn",a)}_error(...a){this._logger("error",a)}_logf(...a){return["[%s::%s]",this.is,...a]}}return e})})();</script > < script > (function () {
	"use strict";

	function a(a, e) {
		if (!a) return e;
		e = b(e), Array.isArray(a) || (a = [a]);
		let f = e.prototype.behaviors;
		return a = d(a, null, f), e = c(a, e), f && (a = f.concat(a)), e.prototype.behaviors = a, e
	}

	function c(a, d) {
		for (let f, b = 0; b < a.length; b++) f = a[b], f && (d = Array.isArray(f) ? c(f, d) : e(f, d));
		return d
	}

	function d(a, c, e) {
		c = c || [];
		for (let f, b = a.length - 1; 0 <= b; b--) f = a[b], f ? Array.isArray(f) ? d(f, c) : 0 > c.indexOf(f) && (!e || 0 > e.indexOf(f)) && c.unshift(f) : console.warn("behavior is null, check for missing or 404 import");
		return c
	}

	function e(b, a) {
		class c extends a {
			static get properties() {
				return b.properties
			}
			static get observers() {
				return b.observers
			}
			static get template() {
				return b._template || Polymer.DomModule.import(this.is, "template") || a.template || this.prototype._template
			}
			created() {
				super.created(), b.created && b.created.call(this)
			}
			_registered() {
				super._registered(), b.beforeRegister && b.beforeRegister.call(Object.getPrototypeOf(this)), b.registered && b.registered.call(Object.getPrototypeOf(this))
			}
			_applyListeners() {
				if (super._applyListeners(), b.listeners)
					for (let a in b.listeners) this._addMethodEventListenerToNode(this, a, b.listeners[a])
			}
			_ensureAttributes() {
				if (b.hostAttributes)
					for (let c in b.hostAttributes) this._ensureAttribute(c, b.hostAttributes[c]);
				super._ensureAttributes()
			}
			ready() {
				super.ready(), b.ready && b.ready.call(this)
			}
			attached() {
				super.attached(), b.attached && b.attached.call(this)
			}
			detached() {
				super.detached(), b.detached && b.detached.call(this)
			}
			attributeChanged(a, c, d) {
				super.attributeChanged(a, c, d), b.attributeChanged && b.attributeChanged.call(this, a, c, d)
			}
		}
		for (let d in c.generatedFrom = b, b)
			if (!(d in f)) {
				let a = Object.getOwnPropertyDescriptor(b, d);
				a && Object.defineProperty(c.prototype, d, a)
			}
		return c
	}
	let b = Polymer.LegacyElementMixin,
		f = {
			attached: !0,
			detached: !0,
			ready: !0,
			created: !0,
			beforeRegister: !0,
			registered: !0,
			attributeChanged: !0,
			behaviors: !0
		};
	Polymer.Class = function (c) {
		c || console.warn("Polymer.Class requires `info` argument");
		let d = e(c, c.behaviors ? a(c.behaviors, HTMLElement) : b(HTMLElement));
		return d.is = c.is, d
	}, Polymer.mixinBehaviors = a
})(); < /script><script>(function(){"use strict";window.Polymer._polymerFn=function(a){let b;return b="function"===typeof a?a:Polymer.Class(a),customElements.define(b.is,b),b}})();</script > < script > (function () {
	"use strict";

	function a(a, b, c, d, e) {
		let f;
		e && (f = "object" === typeof c && null !== c, f && (d = a.__dataTemp[b]));
		let g = d !== c && (d === d || c === c);
		return f && g && (a.__dataTemp[b] = c), g
	}
	Polymer.MutableData = Polymer.dedupingMixin(b => {
		return class extends b {
			_shouldPropertyChange(b, c, d) {
				return a(this, b, c, d, !0)
			}
		}
	}), Polymer.OptionalMutableData = Polymer.dedupingMixin(b => {
		class c extends b {
			static get properties() {
				return {
					mutableData: Boolean
				}
			}
			_shouldPropertyChange(b, c, d) {
				return a(this, b, c, d, this.mutableData)
			}
		}
		return c
	}), Polymer.MutableData._mutablePropertyChange = a
})(); < /script><script>(function(){"use strict";function a(){return j}function b(a,b){j=a,Object.setPrototypeOf(a,b.prototype),new b,j=null}function c(a){let b=a.__dataHost;return b&&b._methodHost||b}function d(a,b,c){let d=c.mutableData?o:n,e=class extends d{};return e.prototype.__templatizeOptions=c,e.prototype._bindTemplate(a),g(e,a,b,c),e}function e(a,c,d){let e=d.forwardHostProp;if(e){let g=c.templatizeTemplateClass;if(!g){let a=d.mutableData?l:k;g=c.templatizeTemplateClass=class extends a{};let b=c.hostProps;for(let a in b)g.prototype._addPropertyEffect("_host_"+a,g.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:f(a,e)}),g.prototype._createNotifyingProperty("_host_"+a)}b(a,g),a.__dataProto&&Object.assign(a.__data,a.__dataProto),a.__dataTemp={},a.__dataPending=null,a.__dataOld=null,a._enableProperties()}}function f(a,b){return function(a,c,d){b.call(a.__templatizeOwner,c.substring(6),d[c])}}function g(a,b,c,d){let e=c.hostProps||{};for(let f in d.instanceProps){delete e[f];let b=d.notifyInstanceProp;b&&a.prototype._addPropertyEffect(f,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:h(f,b)})}if(d.forwardHostProp&&b.__dataHost)for(let b in e)a.prototype._addPropertyEffect(b,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:i()})}function h(a,b){return function(a,c,d){b.call(a.__templatizeOwner,a,c,d[c])}}function i(){return function(a,b,c){a.__dataHost._setPendingPropertyOrPath("_host_"+b,c[b],!0,!0)}}let j=null;a.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:a,writable:!0}});const k=Polymer.PropertyEffects(a),l=Polymer.MutableData(k),m=Polymer.PropertyEffects(class{});class n extends m{constructor(a){super(),this._configureProperties(a),this.root=this._stampTemplate(this.__dataHost);let b=this.children=[];for(let c=this.root.firstChild;c;c=c.nextSibling)b.push(c),c.__templatizeInstance=this;this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let c=this.__templatizeOptions;(a&&c.instanceProps||!c.instanceProps)&&this._enableProperties()}_configureProperties(a){let b=this.__templatizeOptions;if(a)for(let c in b.instanceProps)c in a&&this._setPendingProperty(c,a[c]);for(let b in this.__hostProps)this._setPendingProperty(b,this.__dataHost["_host_"+b])}forwardHostProp(a,b){this._setPendingPropertyOrPath(a,b,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(a,b,c){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(a,b,a=>{a.model=this,c(a)});else{let d=this.__dataHost.__dataHost;d&&d._addEventListenerToNode(a,b,c)}}_showHideChildren(a){let b=this.children;for(let c,d=0;d<b.length;d++)c=b[d],!!a!=!!c.__hideTemplateChildren__&&(c.nodeType===Node.TEXT_NODE?a?(c.__polymerTextContent__=c.textContent,c.textContent=""):c.textContent=c.__polymerTextContent__:c.style&&(a?(c.__polymerDisplay__=c.style.display,c.style.display="none"):c.style.display=c.__polymerDisplay__)),c.__hideTemplateChildren__=a,c._showHideChildren&&c._showHideChildren(a)}_setUnmanagedPropertyToNode(a,b,c){a.__hideTemplateChildren__&&a.nodeType==Node.TEXT_NODE&&"textContent"==b?a.__polymerTextContent__=c:super._setUnmanagedPropertyToNode(a,b,c)}get parentModel(){let a=this.__parentModel;if(!a){let b;a=this;do a=a.__dataHost.__dataHost;while((b=a.__templatizeOptions)&&!b.parentModel);this.__parentModel=a}return a}}const o=Polymer.MutableData(n),p={templatize(a,b,f){if(f=f||{},a.__templatizeOwner)throw new Error("A <template> can only be templatized once");a.__templatizeOwner=b;let g=b.constructor._parseTemplate(a),h=g.templatizeInstanceClass;h||(h=d(a,g,f),g.templatizeInstanceClass=h),e(a,g,f);let i=class extends h{};return i.prototype._methodHost=c(a),i.prototype.__dataHost=a,i.prototype.__templatizeOwner=b,i.prototype.__hostProps=g.hostProps,i},modelForElement(a,b){for(let c;b;)if(!(c=b.__templatizeInstance))b=b.parentNode;else if(c.__dataHost!=a)b=c.__dataHost;else return c;return null}};Polymer.Templatize=p})();</script > < script > (function () {
	"use strict";
	let a = {
		templatize(a, b) {
			this._templatizerTemplate = a, this.ctor = Polymer.Templatize.templatize(a, this, {
				mutableData: !!b,
				parentModel: this._parentModel,
				instanceProps: this._instanceProps,
				forwardHostProp: this._forwardHostPropV2,
				notifyInstanceProp: this._notifyInstancePropV2
			})
		},
		stamp(a) {
			return new this.ctor(a)
		},
		modelForElement(a) {
			return Polymer.Templatize.modelForElement(this._templatizerTemplate, a)
		}
	};
	Polymer.Templatizer = a
})(); < /script><script>(function(){"use strict";const a=Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement)));class b extends a{static get observedAttributes(){return["mutable-data"]}attributeChangedCallback(){this.mutableData=!0}connectedCallback(){this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){this.parentNode.insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let a=0;a<this.__children.length;a++)this.root.appendChild(this.__children[a])}render(){let a;if(!this.__children){if(a=a||this.querySelector("template"),!a){let b=new MutationObserver(()=>{if(a=this.querySelector("template"),a)b.disconnect(),this.render(a);else throw new Error("dom-bind requires a <template> child")});return void b.observe(this,{childList:!0})}this.root=this._stampTemplate(a),this.$=this.root.$,this.__children=[];for(let a=this.root.firstChild;a;a=a.nextSibling)this.__children[this.__children.length]=a;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}customElements.define("dom-bind",b)})();</script > < script > (function () {
"use strict";
const a = Polymer.ElementMixin(HTMLElement);
Polymer.Element = a
})(); < /script><script>(function(){"use strict";const a=Polymer.OptionalMutableData(Polymer.Element);class b extends a{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__limit=Infinity,this.__pool=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__lastChunkTime=null,this.__needFullRefresh=!1,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let a=0;a<this.__instances.length;a++)this.__detachInstance(a)}connectedCallback(){if(super.connectedCallback(),this.__isDetached){this.__isDetached=!1;let a=this.parentNode;for(let b=0;b<this.__instances.length;b++)this.__attachInstance(b,a)}}__ensureTemplatized(){if(!this.__ctor){let a=this.template=this.querySelector("template");if(!a){let a=new MutationObserver(()=>{if(this.querySelector("template"))a.disconnect(),this.__render();else throw new Error("dom-repeat requires a <template> child")});return a.observe(this,{childList:!0}),!1}let b={};b[this.as]=!0,b[this.indexAs]=!0,b[this.itemsIndexAs]=!0,this.__ctor=Polymer.Templatize.templatize(a,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:b,forwardHostProp:function(a,b){let c=this.__instances;for(let d,e=0;e<c.length&&(d=c[e]);e++)d.forwardHostProp(a,b)},notifyInstanceProp:function(a,b,c){if(Polymer.Path.matches(this.as,b)){let d=a[this.itemsIndexAs];b==this.as&&(this.items[d]=c);let e=Polymer.Path.translate(this.as,"items."+d,b);this.notifyPath(e,c)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__sortChanged(a){let b=this.__getMethodHost();this.__sortFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)}),this.__needFullRefresh=!0,this.items&&this.__debounceRender(this.__render)}__filterChanged(a){let b=this.__getMethodHost();this.__filterFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)}),this.__needFullRefresh=!0,this.items&&this.__debounceRender(this.__render)}__computeFrameTime(a){return Math.ceil(1e3/a)
}
__initializeChunking() {
	this.initialCount && (this.__limit = this.initialCount, this.__chunkCount = this.initialCount, this.__lastChunkTime = performance.now())
}
__tryRenderChunk() {
	this.items && this.__limit < this.items.length && this.__debounceRender(this.__requestRenderChunk)
}
__requestRenderChunk() {
	requestAnimationFrame(() => this.__renderChunk())
}
__renderChunk() {
	let a = performance.now(),
		b = this._targetFrameTime / (a - this.__lastChunkTime);
	this.__chunkCount = Math.round(this.__chunkCount * b) || 1, this.__limit += this.__chunkCount, this.__lastChunkTime = a, this.__debounceRender(this.__render)
}
__observeChanged() {
	this.__observePaths = this.observe && this.observe.replace(".*", ".").split(" ")
}
__itemsChanged(a) {
	this.items && !Array.isArray(this.items) && console.warn("dom-repeat expected array for `items`, found", this.items), this.__handleItemPath(a.path, a.value) || (this.__needFullRefresh = !0, this.__initializeChunking(), this.__debounceRender(this.__render))
}
__handleObservedPaths(a) {
	if (this.__observePaths) {
		a = a.substring(a.indexOf(".") + 1);
		let b = this.__observePaths;
		for (let c = 0; c < b.length; c++)
			if (0 === a.indexOf(b[c])) return this.__needFullRefresh = !0, this.__debounceRender(this.__render, this.delay), !0
	}
}
__debounceRender(a, b) {
	this.__renderDebouncer = Polymer.Debouncer.debounce(this.__renderDebouncer, 0 < b ? Polymer.Async.timeOut.after(b) : Polymer.Async.microTask, a.bind(this)), Polymer.enqueueDebouncer(this.__renderDebouncer)
}
render() {
	this.__needFullRefresh = !0, this.__debounceRender(this.__render), Polymer.flush()
}
__render() {
	this.__ensureTemplatized() && (this.__applyFullRefresh(), this.__pool.length = 0, this._setRenderedItemCount(this.__instances.length), this.dispatchEvent(new CustomEvent("dom-change", {
		bubbles: !0,
		composed: !0
	})), this.__tryRenderChunk())
}
__applyFullRefresh() {
	const c = this.items || [];
	let a = Array(c.length);
	for (let b = 0; b < c.length; b++) a[b] = b;
	this.__filterFn && (a = a.filter((a, b, d) => this.__filterFn(c[a], b, d))), this.__sortFn && a.sort((d, a) => this.__sortFn(c[d], c[a]));
	const b = this.__itemsIdxToInstIdx = {};
	let d = 0;
	for (const e = Math.min(a.length, this.__limit); d < e; d++) {
		let e = this.__instances[d],
			f = a[d],
			g = c[f];
		b[f] = d, e && d < this.__limit ? (e._setPendingProperty(this.as, g), e._setPendingProperty(this.indexAs, d), e._setPendingProperty(this.itemsIndexAs, f), e._flushProperties()) : this.__insertInstance(g, d, f)
	}
	for (let a = this.__instances.length - 1; a >= d; a--) this.__detachAndRemoveInstance(a)
}
__detachInstance(a) {
	let b = this.__instances[a];
	for (let c, d = 0; d < b.children.length; d++) c = b.children[d], b.root.appendChild(c);
	return b
}
__attachInstance(a, b) {
	let c = this.__instances[a];
	b.insertBefore(c.root, this)
}
__detachAndRemoveInstance(a) {
	let b = this.__detachInstance(a);
	b && this.__pool.push(b), this.__instances.splice(a, 1)
}
__stampInstance(a, b, c) {
	let d = {};
	return d[this.as] = a, d[this.indexAs] = b, d[this.itemsIndexAs] = c, new this.__ctor(d)
}
__insertInstance(a, b, c) {
	let d = this.__pool.pop();
	d ? (d._setPendingProperty(this.as, a), d._setPendingProperty(this.indexAs, b), d._setPendingProperty(this.itemsIndexAs, c), d._flushProperties()) : d = this.__stampInstance(a, b, c);
	let e = this.__instances[b + 1],
		f = e ? e.children[0] : this;
	return this.parentNode.insertBefore(d.root, f), this.__instances[b] = d, d
}
_showHideChildren(a) {
	for (let b = 0; b < this.__instances.length; b++) this.__instances[b]._showHideChildren(a)
}
__handleItemPath(a, b) {
	let c = a.slice(6),
		d = c.indexOf("."),
		e = 0 > d ? c : c.substring(0, d);
	if (e == parseInt(e, 10)) {
		let a = 0 > d ? "" : c.substring(d + 1);
		if (!this.__handleObservedPaths(a)) {
			let c = this.__itemsIdxToInstIdx[e],
				d = this.__instances[c];
			if (d) {
				let c = this.as + (a ? "." + a : "");
				d._setPendingPropertyOrPath(c, b, !1, !0), d._flushProperties()
			}
		}
		return !0
	}
}
itemForElement(a) {
	let b = this.modelForElement(a);
	return b && b[this.as]
}
indexForElement(a) {
	let b = this.modelForElement(a);
	return b && b[this.indexAs]
}
modelForElement(a) {
	return Polymer.Templatize.modelForElement(this.template, a)
}
}
customElements.define(b.is, b), Polymer.DomRepeat = b
})(); < /script><script>(function(){"use strict";class a extends Polymer.Element{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"}}}constructor(){super(),this.__renderDebouncer=null,this.__invalidProps=null,this.__instance=null}__debounceRender(){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,Polymer.Async.microTask,()=>this.__render()),Polymer.enqueueDebouncer(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback(),this.parentNode&&(this.parentNode.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||this.parentNode.host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),this.if&&this.__debounceRender()}render(){Polymer.flush()}__render(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__ensureInstance(){let a=this.parentNode;if(a){if(!this.__ctor){let a=this.querySelector("template");if(!a){let a=new MutationObserver(()=>{if(this.querySelector("template"))a.disconnect(),this.__render();else throw new Error("dom-if requires a <template> child")});return a.observe(this,{childList:!0}),!1}this.__ctor=Polymer.Templatize.templatize(a,this,{mutableData:!0,forwardHostProp:function(a,b){this.__instance&&(this.if?this.__instance.forwardHostProp(a,b):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Polymer.Path.root(a)]=!0))}})}if(!this.__instance)this.__instance=new this.__ctor,a.insertBefore(this.__instance.root,this);else{this.__syncHostProperties();let b=this.__instance.children;if(b&&b.length){let c=this.previousSibling;if(c!==b[b.length-1])for(let c,d=0;d<b.length&&(c=b[d]);d++)a.insertBefore(c,this)}}}return!0}__syncHostProperties(){let a=this.__invalidProps;if(a){for(let b in a)this.__instance._setPendingProperty(b,this.__dataHost[b]);this.__invalidProps=null,this.__instance._flushProperties()}}__teardownInstance(){if(this.__instance){let a=this.__instance.children;if(a&&a.length){let b=a[0].parentNode;for(let c,d=0;d<a.length&&(c=a[d]);d++)b.removeChild(c)}this.__instance=null,this.__invalidProps=null}}_showHideChildren(){let a=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(a)}}customElements.define(a.is,a),Polymer.DomIf=a})();</script > < script > (function () {
	"use strict";
	let a = Polymer.dedupingMixin(a => {
		class b extends a {
			static get properties() {
				return {
					items: {
						type: Array
					},
					multi: {
						type: Boolean,
						value: !1
					},
					selected: {
						type: Object,
						notify: !0
					},
					selectedItem: {
						type: Object,
						notify: !0
					},
					toggle: {
						type: Boolean,
						value: !1
					}
				}
			}
			static get observers() {
				return ["__updateSelection(multi, items.*)"]
			}
			constructor() {
				super(), this.__lastItems = null, this.__lastMulti = null, this.__selectedMap = null
			}
			__updateSelection(a, b) {
				let c = b.path;
				if ("items" == c) {
					let c = b.base || [],
						d = this.__lastItems,
						e = this.__lastMulti;
					if (a !== e && this.clearSelection(), d) {
						let a = Polymer.ArraySplice.calculateSplices(c, d);
						this.__applySplices(a)
					}
					this.__lastItems = c, this.__lastMulti = a
				}
				else if ("items.splices" == b.path) this.__applySplices(b.value.indexSplices);
				else {
					let a = c.slice(6),
						b = parseInt(a, 10);
					0 > a.indexOf(".") && a == b && this.__deselectChangedIdx(b)
				}
			}
			__applySplices(a) {
				let b = this.__selectedMap;
				for (let c, d = 0; d < a.length; d++) {
					c = a[d], b.forEach((a, d) => {
						a < c.index || (a >= c.index + c.removed.length ? b.set(d, a + c.addedCount - c.removed.length) : b.set(d, -1))
					});
					for (let a, d = 0; d < c.addedCount; d++) a = c.index + d, b.has(this.items[a]) && b.set(this.items[a], a)
				}
				this.__updateLinks();
				let c = 0;
				b.forEach((a, d) => {
					0 > a ? (this.multi ? this.splice("selected", c, 1) : this.selected = this.selectedItem = null, b.delete(d)) : c++
				})
			}
			__updateLinks() {
				if (this.__dataLinkedPaths = {}, this.multi) {
					let a = 0;
					this.__selectedMap.forEach(b => {
						0 <= b && this.linkPaths("items." + b, "selected." + a++)
					})
				}
				else this.__selectedMap.forEach(a => {
					this.linkPaths("selected", "items." + a), this.linkPaths("selectedItem", "items." + a)
				})
			}
			clearSelection() {
				this.__dataLinkedPaths = {}, this.__selectedMap = new Map, this.selected = this.multi ? [] : null, this.selectedItem = null
			}
			isSelected(a) {
				return this.__selectedMap.has(a)
			}
			isIndexSelected(a) {
				return this.isSelected(this.items[a])
			}
			__deselectChangedIdx(a) {
				let b = this.__selectedIndexForItemIndex(a);
				if (0 <= b) {
					let a = 0;
					this.__selectedMap.forEach((c, d) => {
						b == a++ && this.deselect(d)
					})
				}
			}
			__selectedIndexForItemIndex(a) {
				let b = this.__dataLinkedPaths["items." + a];
				if (b) return parseInt(b.slice(9), 10)
			}
			deselect(a) {
				let b = this.__selectedMap.get(a);
				if (0 <= b) {
					this.__selectedMap.delete(a);
					let c;
					this.multi && (c = this.__selectedIndexForItemIndex(b)), this.__updateLinks(), this.multi ? this.splice("selected", c, 1) : this.selected = this.selectedItem = null
				}
			}
			deselectIndex(a) {
				this.deselect(this.items[a])
			}
			select(a) {
				this.selectIndex(this.items.indexOf(a))
			}
			selectIndex(a) {
				let b = this.items[a];
				this.isSelected(b) ? this.toggle && this.deselectIndex(a) : (!this.multi && this.__selectedMap.clear(), this.__selectedMap.set(b, a), this.__updateLinks(), this.multi ? this.push("selected", b) : this.selected = this.selectedItem = b)
			}
		}
		return b
	});
	Polymer.ArraySelectorMixin = a;
	let b = a(Polymer.Element);
	class c extends b {
		static get is() {
			return "array-selector"
		}
	}
	customElements.define(c.is, c), Polymer.ArraySelector = c
})(); < /script><script>(function(){"use strict";function b(b){requestAnimationFrame(function(){c?c(b):(g||(g=new Promise(function(b){i=b}),"complete"===document.readyState?i():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&i()})),g.then(function(){b&&b()}))})}function a(){this.customStyles=[],this.enqueued=!1,b(function(){window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}function d(c){!c.enqueued&&j&&(c.enqueued=!0,b(j))}function e(c,a){for(var b in a)null===b?c.style.removeProperty(b):c.style.setProperty(b,a[b])}function h(b){k=!(b&&b.shimcssproperties)&&(m||!navigator.userAgent.match(/AppleWebKit\ / 601 | Edge\ / 15 / ) && window.CSS && CSS.supports && CSS.supports("box-shadow", "0 0 0 var(--foo)"))
}
var i, g = null,
	c = window.HTMLImports && window.HTMLImports.whenReady || null;
var f = null,
	j = null;
a.prototype.c = function (b) {
	b.__seenByShadyCSS || (b.__seenByShadyCSS = !0, this.customStyles.push(b), d(this))
}, a.prototype.b = function (c) {
	if (c.__shadyCSSCachedStyle) return c.__shadyCSSCachedStyle;
	var a;
	return a = c.getStyle ? c.getStyle() : c, a
}, a.prototype.a = function () {
	for (var c, d = this.customStyles, a = 0; a < d.length; a++)
		if (c = d[a], !c.__shadyCSSCachedStyle) {
			var b = this.b(c);
			b && (b = b.__appliedElement || b, f && f(b), c.__shadyCSSCachedStyle = b)
		}
	return d
}, a.prototype.addCustomStyle = a.prototype.c, a.prototype.getStyleForCustomStyle = a.prototype.b, a.prototype.processStyles = a.prototype.a, Object.defineProperties(a.prototype, {
	transformCallback: {
		get: function () {
			return f
		},
		set: function (b) {
			f = b
		}
	},
	validateCallback: {
		get: function () {
			return j
		},
		set: function (c) {
			var a = !1;
			j || (a = !0), j = c, a && d(this)
		}
	}
});
var k, l, m = !(window.ShadyDOM && window.ShadyDOM.inUse);
window.ShadyCSS && void 0 !== window.ShadyCSS.cssBuild && (l = window.ShadyCSS.cssBuild);
var n = window.ShadyCSS && window.ShadyCSS.disableRuntime;
window.ShadyCSS && void 0 !== window.ShadyCSS.nativeCss ? k = window.ShadyCSS.nativeCss : window.ShadyCSS ? (h(window.ShadyCSS), window.ShadyCSS = void 0) : h(window.WebComponents && window.WebComponents.flags);
var o = k,
	p = l,
	q = new a;
window.ShadyCSS || (window.ShadyCSS = {
prepareTemplate: function () {},
prepareTemplateDom: function () {},
prepareTemplateStyles: function () {},
styleSubtree: function (c, a) {
	q.a(), e(c, a)
},
styleElement: function () {
	q.a()
},
styleDocument: function (b) {
	q.a(), e(document.body, b)
},
getComputedStyleValue: function (c, a) {
	return (c = window.getComputedStyle(c).getPropertyValue(a)) ? c.trim() : ""
},
flushCustomStyles: function () {},
nativeCss: o,
nativeShadow: m,
cssBuild: p,
disableRuntime: n
}), window.ShadyCSS.CustomStyleInterface = q
}).call(this); < /script>



<script> 
(function () {
	"use strict";
	const a = window.ShadyCSS.CustomStyleInterface;
	class b extends HTMLElement {
		constructor() {
			super(), this._style = null, a.addCustomStyle(this)
		}
		getStyle() {
			if (this._style) return this._style;
			const a = this.querySelector("style");
			if (a) {
				this._style = a;
				const b = a.getAttribute("include");
				return b && (a.removeAttribute("include"), a.textContent = Polymer.StyleGather.cssFromModules(b) + a.textContent), this._style
			}
		}
	}
	window.customElements.define("custom-style", b), Polymer.CustomStyle = b
})(); 
</script>



<script>(function(){"use strict";let a=Polymer.MutableData._mutablePropertyChange;Polymer.MutableDataBehavior={_shouldPropertyChange(b,c,d){return a(this,b,c,d,!0)}},Polymer.OptionalMutableDataBehavior={properties:{mutableData:Boolean},_shouldPropertyChange(b,c,d){return a(this,b,c,d,this.mutableData)}}})();</script><script>Polymer.Base=Polymer.LegacyElementMixin(HTMLElement).prototype;</script><dom-module id="tinychat-webrtc-app-style"><template><style>#room{display:flex;flex-direction:column;align-items:stretch;width:100%;max-width:inherit;padding:0 0 0 270px;transition:.8s;}#room.wider{padding-left:0;}#room-content{display:flex;flex-direction:row;align-items:stretch;height:100%;min-height:100px;text-align:left;}@media screen and (max-width: 1200px){#room-content{flex-direction:column;}}@media screen and (max-width: 1000px){:host > #room{padding-left:0;}}@media screen and (max-width: 600px){#room-content{padding-top:54px;}#room.full-screen > #room-content{padding-top:0;}}#room.full-screen{padding-left:0;}</style></template></dom-module><script>(function(){"use strict";window.requestAnimationFrame=function(){return function(a){window.setTimeout(a,1e3/30)}}(),Object.equals=function(a,b){if(a===b)return!0;if(!(a instanceof Object)||!(b instanceof Object))return!1;if(a.constructor!==b.constructor)return!1;for(var c in a)if(a.hasOwnProperty(c)){if(!b.hasOwnProperty(c))return!1;if(a[c]!==b[c]){if("object"!==typeof a[c])return!1;if(!Object.equals(a[c],b[c]))return!1}}for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0},Object.isObj=()=>"object"===typeof fun,Object.isFunc=a=>"function"===typeof a,Object.getName=function(a){return null===a?"[object Null]":Object.prototype.toString.call(a)},Number.prototype.timeToReadable=function(){function a(a){return 1<a?"s":""}var b=Math.floor;let c=this;var d=b(c/31536e3);if(d)return d+" year"+a(d);var e=b((c%=31536e3)/86400);if(e)return e+" day"+a(e);var f=b((c%=86400)/3600);if(f)return f+" hour"+a(f);var g=b((c%=3600)/60);if(g)return g+" minute"+a(g);var h=c%60;return h?h+" second"+a(h):"less than a second"},Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),Event.prototype.preventDefault||(Event.prototype.preventDefault=function(){event.getPreventDefault?event.getPreventDefault():event.defaultPrevented})})();</script><script>(function(){"use strict";window.CookieUtils=new class{constructor(){}getCookie(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):void 0}setCookie(a,b,c){c=c||{};var e=c.expires;if("number"==typeof e&&e){var f=new Date;f.setTime(f.getTime()+1e3*e),e=c.expires=f}e&&e.toUTCString&&(c.expires=e.toUTCString()),b=encodeURIComponent(b);var d=a+"="+b;for(var g in c){d+="; "+g;var h=c[g];!0!==h&&(d+="="+h)}document.cookie=d}}})();</script><script>(function(){"use strict";window.EventBus=class{constructor(){this.listeners={}}_getListenerIdx(a,b,c){let d,e=this.listeners[a],f=-1;if(!e||0===e.length)return f;for(d=0;d<e.length;d++)if(e[d].callback===b&&(!c||c===e[d].scope)){f=d;break}return f}subscribe(a,b,c){let d,e;if(!a)throw new Error("Event name cannot be null or undefined");if(!b||"function"!==typeof b)throw new Error("Listener must be of type function.");e=this._getListenerIdx(a,b,c);0<=e||(d={callback:b,scope:c},this.listeners[a]=this.listeners[a]||[],this.listeners[a].push(d))}unsubscribe(a,b,c){let d;a&&b&&this.listeners[a]&&(d=this._getListenerIdx(a,b,c),-1===d||this.listeners[a].splice(d,1))}broadcast(a,b){let c=this.listeners[a];a&&this.listeners[a]&&(b=b||{},c.forEach(function(a){a.callback.call(a.scope,b)}))}reset(){this.listeners={}}}})();</script><script>(function(){"use strict";window.Math.Guid=window.Math.Guid||function(){var a=function(b,c,d){return b.length>=c?b:a(d+b,c,d||" ")},b=function(b){var c=b.toString(16);return a(c,4,"0")},c=function(){var a=new window.Uint16Array(8);return window.crypto.getRandomValues(a),[b(a[0])+b(a[1]),b(a[2]),b(a[3]),b(a[4]),b(a[5])+b(a[6])+b(a[7])].join("-")},d=function(){var a=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=0|(a+16*Math.random())%16;return a=Math.floor(a/16),("x"===b?c:8|7&c).toString(16)})};return{newGuid:function(){var a="undefined"!=typeof window.crypto,b="undefined"!=typeof window.crypto.getRandomValues;return a&&b?c():d()},empty:"00000000-0000-0000-0000-000000000000"}}(),window.Math.easeInOutQuad=function(a,e,b,c){return(a/=c/2,1>a)?b/2*a*a+e:(a--,-b/2*(a*(a-2)-1)+e)},window.Math.easeInCubic=function(a,e,b,c){var d=(a/=c)*a*a;return e+b*d},window.Math.inOutQuintic=function(a,e,b,c){var d=(a/=c)*a,f=d*a;return e+b*(6*f*d+-15*d*d+10*f)}})();</script><script>(function(){"use strict";function a(a){this.context=a,this.instant=0,this.slow=0,this.clip=0,this.script=a.createScriptProcessor(2048,1,1);var b=this;this.script.onaudioprocess=function(a){var c,d=a.inputBuffer.getChannelData(0),e=0,f=0;for(c=0;c<d.length;++c)e+=d[c]*d[c],.99<Math.abs(d[c])&&(f+=1);b.instant=Math.sqrt(e/d.length),b.slow=.95*b.slow+.05*b.instant,b.clip=f/d.length}}var b=window.MediaStream;"undefined"===typeof b&&"undefined"!==typeof webkitMediaStream&&(b=webkitMediaStream),"undefined"===typeof b||"stop"in b.prototype||(b.prototype.stop=function(){this.getVideoTracks().forEach(function(a){a.stop()}),this.getAudioTracks().forEach(function(a){a.stop()})}),navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=a=>{var b=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return b?new Promise((c,d)=>{b.call(navigator,a,c,d)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),window.AudioContext=window.AudioContext||window.webkitAudioContext,a.prototype.connectToSource=function(a,b){try{this.mic=this.context.createMediaStreamSource(a),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof b&&b(null)}catch(a){console.error(a),"undefined"!==typeof b&&b(a)}},a.prototype.stop=function(){this.mic&&this.mic.disconnect(),this.script&&this.script.disconnect()},window.SoundMeter=a,window.fullscreenManager={request:a=>{void 0==a||(a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen&&a.mozRequestFullScreen())},status:()=>document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,exit:()=>{document.ExitFullscreen?document.ExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.cancelFullscreen&&document.cancelFullscreen()},addEventListener:(a,b)=>{document.addEventListener("webkitfullscreenchange",a,b),document.addEventListener("mozfullscreenchange",a,b),document.addEventListener("fullscreenchange",a,b),document.addEventListener("MSFullscreenChange",a,b)},removeEventListener:(a,b)=>{document.removeEventListener("webkitfullscreenchange",a,b),document.removeEventListener("mozfullscreenchange",a,b),document.removeEventListener("fullscreenchange",a,b),document.removeEventListener("MSFullscreenChange",a,b)}}})();</script><script>(function(){"use strict";var a=String.prototype;a.format=function(){for(var a,b=this,c=0;c<arguments.length;c++)a=new RegExp("\\{"+c+"\\}","gi"),b=b.replace(a,arguments[c]);return b},a.isEmpty=function(){return!this||0===this.length},a.isNotEmpty=function(){return!this.isEmpty()}})();</script><script>(function(){"use strict";let a=null;class b{constructor(){}static getInstance(){return null==a&&(a=new b),a}wsj(a,b){return new Promise(function(d,f){a.method=a.method==void 0?"GET":a.method;let e=a.params,g=e==void 0?"":Object.keys(e).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(e[a])}).join("&"),h=e==void 0?void 0:g,i=0<=a.src.indexOf("?")?"&":"?",j="GET"==a.method?a.src+i+g:a.src;var k=new XMLHttpRequest;k.onreadystatechange=function(){if(4==k.readyState)if(400>k.status)try{b?d(k.response):d(JSON.parse(k.response))}catch(a){f(new c(a.message+"\n"+k.response))}else f(new c(k.statusText))},k.open(a.method,j,!0),a["content-type"]!==void 0&&k.setRequestHeader("Content-Type",a["content-type"]),k.send(h)})}}class c extends Error{}window.WebAPI=b,window.AJAXError=c})();</script><script>!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Autolinker=b()}(this,function(){var b=Math.ceil,j=Math.floor,k=function(a){a=a||{},this.version=k.version,this.urls=this.normalizeUrlsCfg(a.urls),this.email="boolean"!=typeof a.email||a.email,this.phone="boolean"!=typeof a.phone||a.phone,this.hashtag=a.hashtag||!1,this.mention=a.mention||!1,this.newWindow="boolean"!=typeof a.newWindow||a.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(a.stripPrefix),this.stripTrailingSlash="boolean"!=typeof a.stripTrailingSlash||a.stripTrailingSlash,this.decodePercentEncoding="boolean"!=typeof a.decodePercentEncoding||a.decodePercentEncoding;var b=this.mention;if(!1!==b&&"twitter"!==b&&"instagram"!==b&&"soundcloud"!==b)throw new Error("invalid `mention` cfg - see docs");var c=this.hashtag;if(!1!==c&&"twitter"!==c&&"facebook"!==c&&"instagram"!==c)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(a.truncate),this.className=a.className||"",this.replaceFn=a.replaceFn||null,this.context=a.context||this,this.htmlParser=null,this.matchers=null,this.tagBuilder=null};return k.link=function(a,b){var c=new k(b);return c.link(a)},k.parse=function(a,b){var c=new k(b);return c.parse(a)},k.version="1.8.3",k.prototype={constructor:k,normalizeUrlsCfg:function(a){return null==a&&(a=!0),"boolean"==typeof a?{schemeMatches:a,wwwMatches:a,tldMatches:a}:{schemeMatches:"boolean"!=typeof a.schemeMatches||a.schemeMatches,wwwMatches:"boolean"!=typeof a.wwwMatches||a.wwwMatches,tldMatches:"boolean"!=typeof a.tldMatches||a.tldMatches}},normalizeStripPrefixCfg:function(a){return null==a&&(a=!0),"boolean"==typeof a?{scheme:a,www:a}:{scheme:"boolean"!=typeof a.scheme||a.scheme,www:"boolean"!=typeof a.www||a.www}},normalizeTruncateCfg:function(a){return"number"==typeof a?{length:a,location:"end"}:k.Util.defaults(a||{},{length:Number.POSITIVE_INFINITY,location:"end"})},parse:function(b){for(var d=this.getHtmlParser(),e=d.parse(b),f=0,g=[],a=0,i=e.length;a<i;a++){var j=e[a],k=j.getType();if("element"===k&&-1!==["a","style","script"].indexOf(j.getTagName()))j.isClosing()?f=Math.max(f-1,0):f++;else if("text"===k&&0===f){var c=this.parseText(j.getText(),j.getOffset());g.push.apply(g,c)}}return g=this.compactMatches(g),g=this.removeUnwantedMatches(g)},compactMatches:function(b){b.sort(function(a,b){return a.getOffset()-b.getOffset()});for(var c=0;c<b.length-1;c++){var d=b[c],e=d.getOffset(),f=d.getMatchedText().length;if(c+1<b.length){if(b[c+1].getOffset()===e){var a=b[c+1].getMatchedText().length>f?c:c+1;b.splice(a,1);continue}b[c+1].getOffset()<e+f&&b.splice(c+1,1)}}return b},removeUnwantedMatches:function(a){var b=k.Util.remove;return this.hashtag||b(a,function(a){return"hashtag"===a.getType()}),this.email||b(a,function(a){return"email"===a.getType()}),this.phone||b(a,function(a){return"phone"===a.getType()}),this.mention||b(a,function(a){return"mention"===a.getType()}),this.urls.schemeMatches||b(a,function(a){return"url"===a.getType()&&"scheme"===a.getUrlMatchType()}),this.urls.wwwMatches||b(a,function(a){return"url"===a.getType()&&"www"===a.getUrlMatchType()}),this.urls.tldMatches||b(a,function(a){return"url"===a.getType()&&"tld"===a.getUrlMatchType()}),a},parseText:function(b,d){d=d||0;for(var e=this.getMatchers(),f=[],g=0,a=e.length;g<a;g++){for(var h=e[g].parseMatches(b),i=0,j=h.length;i<j;i++)h[i].setOffset(d+h[i].getOffset());f.push.apply(f,h)}return f},link:function(b){if(!b)return"";for(var c,d=this.parse(b),e=[],f=0,g=0,a=d.length;g<a;g++)c=d[g],e.push(b.substring(f,c.getOffset())),e.push(this.createMatchReturnVal(c)),f=c.getOffset()+c.getMatchedText().length;return e.push(b.substring(f)),e.join("")},createMatchReturnVal:function(a){var b;if(this.replaceFn&&(b=this.replaceFn.call(this.context,a)),"string"==typeof b)return b;if(!1===b)return a.getMatchedText();if(b instanceof k.HtmlTag)return b.toAnchorString();var c=a.buildTag();return c.toAnchorString()},getHtmlParser:function(){var a=this.htmlParser;return a||(a=this.htmlParser=new k.htmlParser.HtmlParser),a},getMatchers:function(){if(this.matchers)return this.matchers;var a=k.matcher,b=this.getTagBuilder(),c=[new a.Hashtag({tagBuilder:b,serviceName:this.hashtag}),new a.Email({tagBuilder:b}),new a.Phone({tagBuilder:b}),new a.Mention({tagBuilder:b,serviceName:this.mention}),new a.Url({tagBuilder:b,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=c},getTagBuilder:function(){var a=this.tagBuilder;return a||(a=this.tagBuilder=new k.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),a}},k.match={},k.matcher={},k.htmlParser={},k.truncate={},k.Util={abstractMethod:function(){throw"abstract"},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},defaults:function(a,b){for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=b[c]);return a},extend:function(b,c){var d=b.prototype,e=function(){};e.prototype=d;var a=c.hasOwnProperty("constructor")?c.constructor:function(){d.constructor.apply(this,arguments)};var f=a.prototype=new e;return f.constructor=a,f.superclass=d,delete c.constructor,k.Util.assign(f,c),a},ellipsis:function(a,b,c){var d;return a.length>b&&(null==c?(c="",d=3):d=c.length,a=a.substring(0,b-d)+c),a},indexOf:function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},remove:function(a,b){for(var c=a.length-1;0<=c;c--)!0===b(a[c])&&a.splice(c,1)},splitAndCapture:function(b,c){for(var d,e=[],f=0;d=c.exec(b);)e.push(b.substring(f,d.index)),e.push(d[0]),f=d.index+d[0].length;return e.push(b.substring(f)),e},trim:function(a){return a.replace(this.trimRegex,"")}},k.HtmlTag=k.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(a){k.Util.assign(this,a),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(a){return this.tagName=a,this},getTagName:function(){return this.tagName||""},setAttr:function(a,b){var c=this.getAttrs();return c[a]=b,this},getAttr:function(a){return this.getAttrs()[a]},setAttrs:function(a){var b=this.getAttrs();return k.Util.assign(b,a),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(a){return this.setAttr("class",a)},addClass:function(b){for(var c,d=this.getClass(),e=this.whitespaceRegex,a=k.Util.indexOf,f=d?d.split(e):[],g=b.split(e);c=g.shift();)-1===a(f,c)&&f.push(c);return this.getAttrs()["class"]=f.join(" "),this},removeClass:function(b){for(var d,e,c=this.getClass(),f=this.whitespaceRegex,a=k.Util.indexOf,g=c?c.split(f):[],h=b.split(f);g.length&&(d=h.shift());)e=a(g,d),-1!==e&&g.splice(e,1);return this.getAttrs()["class"]=g.join(" "),this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(a){return-1!==(" "+this.getClass()+" ").indexOf(" "+a+" ")},setInnerHtml:function(a){return this.innerHtml=a,this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var a=this.getTagName(),b=this.buildAttrsStr();return b=b?" "+b:"",["<",a,b,">",this.getInnerHtml(),"</",a,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var a=this.getAttrs(),b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"=\""+a[c]+"\"");return b.join(" ")}}),k.RegexLib=function(){var a=function(a){return"(?=([A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19](?:[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19\\-]{0,61}[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])?))\\"+a};return{alphaNumericCharsStr:"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19",alphaCharsStr:"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",getDomainNameStr:function(b){return"(?:"+a(b)+"(?:\\."+a(b+1)+"){0,126}|"+"(?:[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]{1,3}\\.){3}[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]{1,3}"+")"}}}(),k.AnchorTagBuilder=k.Util.extend(Object,{constructor:function(a){a=a||{},this.newWindow=a.newWindow,this.truncate=a.truncate,this.className=a.className},build:function(a){return new k.HtmlTag({tagName:"a",attrs:this.createAttrs(a),innerHtml:this.processAnchorText(a.getAnchorText())})},createAttrs:function(a){var b={href:a.getAnchorHref()},c=this.createCssClass(a);return c&&(b["class"]=c),this.newWindow&&(b.target="_blank",b.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<a.getAnchorText().length&&(b.title=a.getAnchorHref()),b},createCssClass:function(b){var c=this.className;if(c){for(var d=[c],e=b.getCssClassSuffixes(),f=0,a=e.length;f<a;f++)d.push(c+"-"+e[f]);return d.join(" ")}return""},processAnchorText:function(a){return a=this.doTruncate(a)},doTruncate:function(b){var c=this.truncate;if(!c||!c.length)return b;var d=c.length,e=c.location;return"smart"===e?k.truncate.TruncateSmart(b,d):"middle"===e?k.truncate.TruncateMiddle(b,d):k.truncate.TruncateEnd(b,d)}}),k.htmlParser.HtmlParser=k.Util.extend(Object,{htmlRegex:function(){var b=/!--([\s\S]+?)--/,c=/[0-9a-zA-Z][0-9a-zA-Z:]*/,d=/[^\s"'>\/=\x00-\x1F\x7F]+/,e=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,f="(?:\\s*?=\\s*?"+e.source+")?",a=function(a){return"(?=("+d.source+"))\\"+a+f};return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",a(2),"|",e.source+")",")*",">",")","|","(?:","<(/)?","(?:",b.source,"|","(?:","("+c.source+")","\\s*/?",")","|","(?:","("+c.source+")","\\s+","(?:","(?:\\s+|\\b)",a(7),")*","\\s*/?",")",")",">",")"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/( | |<|<|>|>|"|"|')/gi,parse:function(b){for(var d,e,f=this.htmlRegex,j=0,a=[];null!==(d=f.exec(b));){var i=d[0],k=d[4],m=d[1]||d[5]||d[6],c=!!d[3],h=d.index,l=b.substring(j,h);l&&(e=this.parseTextAndEntityNodes(j,l),a.push.apply(a,e)),k?a.push(this.createCommentNode(h,i,k)):a.push(this.createElementNode(h,i,m,c)),j=h+i.length}if(j<b.length){var n=b.substring(j);n&&(e=this.parseTextAndEntityNodes(j,n),e.forEach(function(b){a.push(b)}))}return a},parseTextAndEntityNodes:function(b,d){for(var e=[],f=k.Util.splitAndCapture(d,this.htmlCharacterEntitiesRegex),a=0,g=f.length;a<g;a+=2){var h=f[a],i=f[a+1];h&&(e.push(this.createTextNode(b,h)),b+=h.length),i&&(e.push(this.createEntityNode(b,i)),b+=i.length)}return e},createCommentNode:function(a,b,c){return new k.htmlParser.CommentNode({offset:a,text:b,comment:k.Util.trim(c)})},createElementNode:function(b,c,d,e){return new k.htmlParser.ElementNode({offset:b,text:c,tagName:d.toLowerCase(),closing:e})},createEntityNode:function(a,b){return new k.htmlParser.EntityNode({offset:a,text:b})},createTextNode:function(a,b){return new k.htmlParser.TextNode({offset:a,text:b})}}),k.htmlParser.HtmlNode=k.Util.extend(Object,{offset:void 0,text:void 0,constructor:function(a){k.Util.assign(this,a)},getType:k.Util.abstractMethod,getOffset:function(){return this.offset},getText:function(){return this.text}}),k.htmlParser.CommentNode=k.Util.extend(k.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}}),k.htmlParser.ElementNode=k.Util.extend(k.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}}),k.htmlParser.EntityNode=k.Util.extend(k.htmlParser.HtmlNode,{getType:function(){return"entity"}}),k.htmlParser.TextNode=k.Util.extend(k.htmlParser.HtmlNode,{getType:function(){return"text"}}),k.match.Match=k.Util.extend(Object,{constructor:function(a){this.tagBuilder=a.tagBuilder,this.matchedText=a.matchedText,this.offset=a.offset},getType:k.Util.abstractMethod,getMatchedText:function(){return this.matchedText},setOffset:function(a){this.offset=a},getOffset:function(){return this.offset},getAnchorHref:k.Util.abstractMethod,getAnchorText:k.Util.abstractMethod,getCssClassSuffixes:function(){return[this.getType()]},buildTag:function(){return this.tagBuilder.build(this)}}),k.match.Email=k.Util.extend(k.match.Match,{constructor:function(a){k.match.Match.prototype.constructor.call(this,a),this.email=a.email},getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),k.match.Hashtag=k.Util.extend(k.match.Match,{constructor:function(a){k.match.Match.prototype.constructor.call(this,a),this.serviceName=a.serviceName,this.hashtag=a.hashtag},getType:function(){return"hashtag"},getServiceName:function(){return this.serviceName},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var a=this.serviceName,b=this.hashtag;switch(a){case"twitter":return"https://twitter.com/hashtag/"+b;case"facebook":return"https://www.facebook.com/hashtag/"+b;case"instagram":return"https://instagram.com/explore/tags/"+b;default:throw new Error("Unknown service name to point hashtag to: ",a);}},getAnchorText:function(){return"#"+this.hashtag}}),k.match.Phone=k.Util.extend(k.match.Match,{constructor:function(a){k.match.Match.prototype.constructor.call(this,a),this.number=a.number,this.plusSign=a.plusSign},getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+(this.plusSign?"+":"")+this.number},getAnchorText:function(){return this.matchedText}}),k.match.Mention=k.Util.extend(k.match.Match,{constructor:function(a){k.match.Match.prototype.constructor.call(this,a),this.mention=a.mention,this.serviceName=a.serviceName},getType:function(){return"mention"},getMention:function(){return this.mention},getServiceName:function(){return this.serviceName},getAnchorHref:function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: ",this.serviceName);}},getAnchorText:function(){return"@"+this.mention},getCssClassSuffixes:function(){var a=k.match.Match.prototype.getCssClassSuffixes.call(this),b=this.getServiceName();return b&&a.push(b),a}}),k.match.Url=k.Util.extend(k.match.Match,{constructor:function(a){k.match.Match.prototype.constructor.call(this,a),this.urlMatchType=a.urlMatchType,this.url=a.url,this.protocolUrlMatch=a.protocolUrlMatch,this.protocolRelativeMatch=a.protocolRelativeMatch,this.stripPrefix=a.stripPrefix,this.stripTrailingSlash=a.stripTrailingSlash,this.decodePercentEncoding=a.decodePercentEncoding},schemePrefixRegex:/^(https?:\/\/)?/i,wwwPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrlMatchType:function(){return this.urlMatchType},getUrl:function(){var a=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(a=this.url="http://"+a,this.protocolPrepended=!0),a},getAnchorHref:function(){var a=this.getUrl();return a.replace(/&/g,"&")},getAnchorText:function(){var a=this.getMatchedText();return this.protocolRelativeMatch&&(a=this.stripProtocolRelativePrefix(a)),this.stripPrefix.scheme&&(a=this.stripSchemePrefix(a)),this.stripPrefix.www&&(a=this.stripWwwPrefix(a)),this.stripTrailingSlash&&(a=this.removeTrailingSlash(a)),this.decodePercentEncoding&&(a=this.removePercentEncoding(a)),a},stripSchemePrefix:function(a){return a.replace(this.schemePrefixRegex,"")},stripWwwPrefix:function(a){return a.replace(this.wwwPrefixRegex,"$1")},stripProtocolRelativePrefix:function(a){return a.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(a){return"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1)),a},removePercentEncoding:function(a){try{return decodeURIComponent(a.replace(/%22/gi,""").replace(/%26/gi,"&").replace(/%27/gi,"'").replace(/%3C/gi,"<").replace(/%3E/gi,">"))}catch(b){return a}}}),k.tldRegex=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermgensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermgensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|international|lifeinsurance|orientexpress|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|pamperedchef|scholarships|versicherung|xn--3e0b707e|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--3bst00m|xn--3ds443g|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b||accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|goodhands|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|mcdonalds|melbourne|microsoft|montblanc|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|telecity|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama||abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|panerai|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|spiegel|staples|starhub|statoil|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich||||||||abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|xperia|yachts|yandex|zappos||||||||||||actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|boots|bosch|build|canon|cards|chase|cheap|chloe|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vista|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo||||||| ||||aarp|able|adac|aero|aigo|akdn|ally|amex|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|mtpc|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sapo|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|||||||||||||||||||| |aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|htc|ibm|ice|icu|ifm|ing|ink|int|ist|itv|iwc|jcb|jcp|jio|jlc|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|lol|lpl|ltd|man|mba|mcd|med|men|meo|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|||||||||||||||||||||||| | ||||ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|||||||||| |||||||||||||||| ||||||||||||||||||||| |||||||||||||)/,k.matcher.Matcher=k.Util.extend(Object,{constructor:function(a){this.tagBuilder=a.tagBuilder},parseMatches:k.Util.abstractMethod}),k.matcher.Email=k.Util.extend(k.matcher.Matcher,{matcherRegex:function(){var b=k.RegexLib.alphaNumericCharsStr,d=b+"!#$%&'*+\\-\\/=?^_`{|}~",a=new RegExp("(?:["+d+"](?:["+d+"]|\\.(?!\\.|@))*|\\\"["+(d+"\\s\"(),:;<>@\\[\\]")+".]+\\\")@"),e=k.RegexLib.getDomainNameStr,f=k.tldRegex;return new RegExp([a.source,e(1),"\\.",f.source].join(""),"gi")}(),parseMatches:function(b){for(var c,d,e=this.matcherRegex,f=this.tagBuilder,a=[];null!==(c=e.exec(b));)d=c[0],a.push(new k.match.Email({tagBuilder:f,matchedText:d,offset:c.index,email:d}));return a}}),k.matcher.Hashtag=k.Util.extend(k.matcher.Matcher,{matcherRegex:new RegExp("#[_"+k.RegexLib.alphaNumericCharsStr+"]{1,139}","g"),nonWordCharRegex:new RegExp("[^"+k.RegexLib.alphaNumericCharsStr+"]"),constructor:function(a){k.matcher.Matcher.prototype.constructor.call(this,a),this.serviceName=a.serviceName},parseMatches:function(b){for(var d,e=this.matcherRegex,f=this.nonWordCharRegex,a=this.serviceName,g=this.tagBuilder,i=[];null!==(d=e.exec(b));){var j=d.index,c=b.charAt(j-1);if(0===j||f.test(c)){var h=d[0],l=d[0].slice(1);i.push(new k.match.Hashtag({tagBuilder:g,matchedText:h,offset:j,serviceName:a,hashtag:l}))}}return i}}),k.matcher.Phone=k.Util.extend(k.matcher.Matcher,{matcherRegex:/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/g,parseMatches:function(b){for(var d,e=this.matcherRegex,f=this.tagBuilder,a=[];null!==(d=e.exec(b));){var g=d[0],i=g.replace(/[^0-9,;#]/g,""),j=d[1]||d[2],c=0==d.index?"":b.substr(d.index-1,1),h=b.substr(d.index+g.length,1),l=!c.match(/\d/)&&!h.match(/\d/);this.testMatch(d[3])&&this.testMatch(g)&&l&&a.push(new k.match.Phone({tagBuilder:f,matchedText:g,offset:d.index,number:i,plusSign:j}))}return a},testMatch:function(a){return /\D/.test(a)}}),k.matcher.Mention=k.Util.extend(k.matcher.Matcher,{matcherRegexes:{twitter:new RegExp("@[_"+k.RegexLib.alphaNumericCharsStr+"]{1,20}","g"),instagram:new RegExp("@[_."+k.RegexLib.alphaNumericCharsStr+"]{1,50}","g"),soundcloud:new RegExp("@[_."+k.RegexLib.alphaNumericCharsStr+"-]{1,50}","g")},nonWordCharRegex:new RegExp("[^"+k.RegexLib.alphaNumericCharsStr+"]"),constructor:function(a){k.matcher.Matcher.prototype.constructor.call(this,a),this.serviceName=a.serviceName},parseMatches:function(b){var d,e=this.matcherRegexes[this.serviceName],f=this.nonWordCharRegex,a=this.serviceName,g=this.tagBuilder,i=[];if(!e)return i;for(;null!==(d=e.exec(b));){var j=d.index,c=b.charAt(j-1);if(0===j||f.test(c)){var h=d[0].replace(/\.+$/g,""),l=h.slice(1);i.push(new k.match.Mention({tagBuilder:g,matchedText:h,offset:j,serviceName:a,mention:l}))}}return i}}),k.matcher.Url=k.Util.extend(k.matcher.Matcher,{matcherRegex:function(){var b=/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/,c=/(?:www\.)/,d=k.RegexLib.getDomainNameStr,e=k.tldRegex,a=k.RegexLib.alphaNumericCharsStr,f=new RegExp("[/?#](?:["+a+"\\-+&@#/%=~_()|'$*\\[\\]?!:,.;\u2713]*["+a+"\\-+&@#/%=~_()|'$*\\[\\]\u2713])?");return new RegExp(["(?:","(",b.source,d(2),")","|","(","(//)?",c.source,d(6),")","|","(","(//)?",d(10)+"\\.",e.source,"(?![-"+a+"])",")",")","(?::[0-9]+)?","(?:"+f.source+")?"].join(""),"gi")}(),wordCharRegExp:new RegExp("["+k.RegexLib.alphaNumericCharsStr+"]"),openParensRe:/\(/g,closeParensRe:/\)/g,constructor:function(a){k.matcher.Matcher.prototype.constructor.call(this,a),this.stripPrefix=a.stripPrefix,this.stripTrailingSlash=a.stripTrailingSlash,this.decodePercentEncoding=a.decodePercentEncoding},parseMatches:function(e){for(var j,q=this.matcherRegex,n=this.stripPrefix,a=this.stripTrailingSlash,i=this.decodePercentEncoding,r=this.tagBuilder,o=[];null!==(j=q.exec(e));){var c=j[0],h=j[1],l=j[4],s=j[5],g=j[9],m=j.index,f=s||g,d=e.charAt(m-1);if(k.matcher.UrlMatchValidator.isValid(c,h)&&!(0<m&&"@"===d||0<m&&f&&this.wordCharRegExp.test(d))){if(/\?$/.test(c)&&(c=c.substr(0,c.length-1)),this.matchHasUnbalancedClosingParen(c))c=c.substr(0,c.length-1);else{var p=this.matchHasInvalidCharAfterTld(c,h);-1<p&&(c=c.substr(0,p))}var t=h?"scheme":l?"www":"tld";o.push(new k.match.Url({tagBuilder:r,matchedText:c,offset:m,urlMatchType:t,url:c,protocolUrlMatch:!!h,protocolRelativeMatch:!!f,stripPrefix:n,stripTrailingSlash:a,decodePercentEncoding:i}))}}return o},matchHasUnbalancedClosingParen:function(b){var c=b.charAt(b.length-1);if(")"===c){var d=b.match(this.openParensRe),e=b.match(this.closeParensRe),f=d&&d.length||0,a=e&&e.length||0;if(f<a)return!0}return!1},matchHasInvalidCharAfterTld:function(b,c){if(!b)return-1;var d=0;c&&(d=b.indexOf(":"),b=b.slice(d));var e=k.RegexLib.alphaNumericCharsStr,a=new RegExp("^((.?//)?[-."+e+"]*[-"+e+"]\\.[-"+e+"]+)"),f=a.exec(b);return null===f?-1:(d+=f[1].length,b=b.slice(f[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(b)?d:-1)}}),k.matcher.UrlMatchValidator={hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]*:/,hasWordCharAfterProtocolRegex:new RegExp(":[^\\s]*?["+k.RegexLib.alphaCharsStr+"]"),ipRegex:/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,isValid:function(a,b){return!(b&&!this.isValidUriScheme(b)||this.urlMatchDoesNotHaveProtocolOrDot(a,b)||this.urlMatchDoesNotHaveAtLeastOneWordChar(a,b)&&!this.isValidIpAddress(a)||this.containsMultipleDots(a))},isValidIpAddress:function(a){var b=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source),c=a.match(b);return null!==c},containsMultipleDots:function(a){var b=a;return this.hasFullProtocolRegex.test(a)&&(b=a.split("://")[1]),-1<b.split("/")[0].indexOf("..")},isValidUriScheme:function(a){var b=a.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==b&&"vbscript:"!==b},urlMatchDoesNotHaveProtocolOrDot:function(a,b){return!(!a||b&&this.hasFullProtocolRegex.test(b)||-1!==a.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(a,b){return a&&b&&!this.hasWordCharAfterProtocolRegex.test(a)}},k.truncate.TruncateEnd=function(a,b,c){return k.Util.ellipsis(a,b,c)},k.truncate.TruncateMiddle=function(c,d,e){if(c.length<=d)return c;var f,g;null==e?(e="",f=8,g=3):(f=e.length,g=e.length);var a=d-g,h="";return 0<a&&(h=c.substr(-1*j(a/2))),(c.substr(0,b(a/2))+e+h).substr(0,a+f)},k.truncate.TruncateSmart=function(k,e,q){var r,n;null==q?(q="",n=3,r=8):(n=q.length,r=q.length);var a=function(a){var b={},c=a,d=c.match(/^([a-z]+):\/\//i);return d&&(b.scheme=d[1],c=c.substr(d[0].length)),d=c.match(/^(.*?)(?=(\?|#|\/|$))/i),d&&(b.host=d[1],c=c.substr(d[0].length)),d=c.match(/^\/(.*?)(?=(\?|#|$))/i),d&&(b.path=d[1],c=c.substr(d[0].length)),d=c.match(/^\?(.*?)(?=(#|$))/i),d&&(b.query=d[1],c=c.substr(d[0].length)),d=c.match(/^#(.*?)$/i),d&&(b.fragment=d[1]),b},i=function(a){var b="";return a.scheme&&a.host&&(b+=a.scheme+"://"),a.host&&(b+=a.host),a.path&&(b+="/"+a.path),a.query&&(b+="?"+a.query),a.fragment&&(b+="#"+a.fragment),b},s=function(c,d){var e=d/2,f=b(e),a=-1*j(e),g="";return 0>a&&(g=c.substr(a)),c.substr(0,f)+q+g};if(k.length<=e)return k;var o=e-n,c=a(k);if(c.query){var h=c.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);h&&(c.query=c.query.substr(0,h[1].length),k=i(c))}if(k.length<=e)return k;if(c.host&&(c.host=c.host.replace(/^www\./,""),k=i(c)),k.length<=e)return k;var l="";if(c.host&&(l+=c.host),l.length>=o)return c.host.length==e?(c.host.substr(0,e-n)+q).substr(0,o+r):s(l,o).substr(0,o+r);var t="";if(c.path&&(t+="/"+c.path),c.query&&(t+="?"+c.query),t){if((l+t).length>=o){if((l+t).length==e)return(l+t).substr(0,e);var g=o-l.length;return(l+s(t,g)).substr(0,o+r)}l+=t}if(c.fragment){var m="#"+c.fragment;if((l+m).length>=o){if((l+m).length==e)return(l+m).substr(0,e);var f=o-l.length;return(l+s(m,f)).substr(0,o+r)}l+=m}if(c.scheme&&c.host){var d=c.scheme+"://";if((l+d).length<o)return(d+l).substr(0,e)}if(l.length<=e)return l;var p="";return 0<o&&(p=l.substr(-1*j(o/2))),(l.substr(0,b(o/2))+q+p).substr(0,o+r)},k});</script><script>(function(){"use strict";var a=window.TinychatApp||{};a.DAL={},window.TinychatApp=a})();</script><script>(function(){"use strict";window.TinychatApp.DAL.BanlistItemEntity=class{constructor(){this.id="",this.username="",this.nickname="",this.reason="",this.moderator=""}}})();</script><script>(function(){"use strict";window.TinychatApp.DAL.BroadcastResultEntity=class{constructor(){this.broadcastStarted=!1,this.password=!1,this.banned=!1,this.moderating=!1,this.canceled=!1,this.permissions=!1}}})();</script><script>(function(){"use strict";class a{static get PUBLIC(){return 0}static get PRIVATE(){return 1}static get SYSTEM(){return 2}static get GIFT(){return 6}static get SUB_PRO(){return 10}static get SUB_EXTREME(){return 20}static get SUB_GOLD(){return 30}constructor(){this.type=a.PUBLIC,this.user=null,this.chatname=0,this.message_text="",this.language="",this.giftUrl="",this.color=0}}window.TinychatApp.DAL.ChatLogItemEntity=a})();</script><script>(function(){"use strict";window.TinychatApp.DAL.EnterRoomResultEntity=class{constructor(){this.selfuser=new TinychatApp.DAL.UserEntity}}})();</script><script>(function(){"use strict";window.TinychatApp.DAL.GiftEntity=class{constructor(){this.fromUsername="",this.fromUrl="",this.fromIdInRoom=0,this.toAchievement="",this.toUsername="",this.toIdInRoom=0,this.toUrl="",this.giftComment="",this.giftExt=0,this.giftName="",this.giftStore="",this.giftUrl=""}}})();</script><script>(function(){"use strict";window.TinychatApp.DAL.LoginResultEntity=class{constructor(){this.loggedIn=!1,this.loginName="",this.usersuggestion="",this.errorcode="",this.errormsg="",this.userInfo=null}}})();</script><script>(function(){"use strict";window.TinychatApp.DAL.LoginUserInfoEntity=class{constructor(){this.email="",this.stype=0,this.promoted=!1,this.achivement="",this.points=0,this.coins=0,this.avatar="",this.intercom_hash="",this.giftData=[],this.currentSubscriptionMessage="",this.currentSubscriptionEnd="",this.currentSubscriptionPlanInterval=""}}})();</script><script>(function(){"use strict";window.TinychatApp.DAL.RoomHistoryEntity=class{constructor(){this.roomname="",this.usage=0}}})();</script><script>(function(){"use strict";window.TinychatApp.DAL.RoomSettingsEntity=class{constructor(){this.type="",this.name="",this.topic="",this.subtype=0,this.giftpoints=0,this.pushtotalk=!1,this.recent_gifts=[],this.biography="",this.location="",this.website="",this.avatar="",this.isYTavailable=0,this.sessionTimeoutForGuests=60,this.msgConstraints=0}}})();</script><script>(function(){"use strict";window.TinychatApp.DAL.SettingsEntity=class{constructor(){this.enablePMs=!0,this.enableYoutube=!0,this.enableSound=!0,this.onfirmBans=!0,this.rememberVolume=!1,this.enableAcousticEchoCancelation=!0,this.enableHotkeys=!0,this.nickname="",this.audio=null,this.video=null,this.darkMode=!1}equals(a){return JSON.stringify(this)===JSON.stringify(a)}}})();</script><script>(function(){"use strict";class a{constructor(){this.nickname="",this.username="",this.avatarUrl="",this.path=0,this.subscriptionType=0,this.isOwner=!1,this.isOperator=!1,this.isLurker=!1,this.giftpoints=0,this.achivementUrl="",this.isSelf=!1,this.isBroadcasting=!1,this.isDeleting=!1,this.isOffline=!1,this.needToUpprove=!1,this.isFeatured=!1}get handle(){return this.path}get isUsername(){return""!=this.username}get isGuest(){return!this.isUsername}get hasSubscriptions(){return TinychatApp.BLL.User.isSubscription(this.subscriptionType)}get canUseFilters(){return TinychatApp.BLL.User.canUseFilters(this.subscriptionType)}toString(){return"UserEntity:{ h("+this.handle+") n("+this.nickname+") u("+this.username+")}"}}window.TinychatApp.DAL.UserEntity=a})();</script><script>(function(){"use strict";window.TinychatApp.DAL.UserProfileEntity=class{constructor(){this.username="",this.biography="",this.gender="",this.age=0,this.location="",this.role="",this.stype=0,this.avatarUrl="",this.achieveUrl="",this.percentToNextAchieve=0,this.giftpoints=0,this.gifts=[]}}})();</script>



<script>(function(){"use strict";window.TinychatApp.DAL.YoutubeItem=class{constructor(){this.id="",this.title="",this.imgurl="",this.duration=void 0}}})();</script>
<script>(function(){"use strict";var a=window.TinychatApp||{};a.BLL={},window.TinychatApp=a})();</script>

<script> 
(function () {
			"use strict";
			const a = window.TinychatApp.BLL;
			window.TinychatApp.BLL.TCSocket = class {
					constructor(a, b) {
						this.chatRoom = a, this.app = a.app, this.EventBus = this.app.EventBus, this.packetWorker = b, this.closedLastReasonCode = -1, this.reconnect_timer = 0, this.reconnect_wait = 0, this.reconnect_tries = 0, this.closedReasonStr = ""
					}
					connect(b) {
							let c = this.chatRoom.wsEndpoint;
							console.log(`Chatroom.Connecting (${c}/${this.chatRoom.roomname},							tc_token: $ {
								this.chatRoom.tc_token
							},
							debug: $ {
								this.app.debug
							})...$ {
						0 < this.reconnect_tries ? this.reconnect_tries : ""
					}
					`),

this.closedLastReasonCode = -2;
let d = new a.RoomConnectEvent(this.reconnect_tries);
if (this.EventBus.broadcast(a.RoomConnectEvent.ID, d), void 0 !== b && b) {
	let b = new a.RoomReconnected;
	this.EventBus.broadcast(a.RoomReconnected.ID, b), this.ws.onclose = function () {}, this.close()
}
this.ws = new WebSocket(c, "tc"), this.ws.onopen = a => {
	this.onOpen(a)
}, this.ws.onclose = a => {
	this.onClose(a)
}, this.ws.onmessage = a => {
	this.packetWorker.onMessage(a)
}
}
onOpen() {
	this.send(this.chatRoom.tcPkt_Connect(this.chatRoom.onRoomConnectCallback))
}
onClose(b) {
	console.warn("Chatroom.Disconnected"), this.closedReasonStr = "" + b.code + ": " + b.reason;
	let c = new TinychatApp.BLL.RoomQuitEvent(TinychatApp.BLL.RoomQuitEvent.WS, this.chatRoom);
	this.EventBus.broadcast(TinychatApp.BLL.RoomQuitEvent.ID, c), this.chatRoom.wsReset();
	let d = this,
		e = 1e3 + Math.floor(2e3 * Math.random());
	this.reconnect_wait += e, this.reconnect_tries += 1;
	let f = new a.RoomConnectStandby(this.reconnect_tries, this.reconnect_wait);
	if (this.EventBus.broadcast(a.RoomConnectStandby.ID, f), 999 > d.reconnect_tries) switch (this.closedLastReasonCode) {
		case 0:
		case 1:
		case 5:
		case 7:
		case 8:
		case 9:
		case 10:
		case 11:
			console.warn("Chatroom.ConnectStandby: " + d.reconnect_wait + "ms"), d.reconnect_timer = setInterval(() => {
				d.Reconnect()
			}, d.reconnect_wait);
			break;
		default:
	}
	else {
		let b = new a.RoomConnectFatal;
		this.EventBus.broadcast(a.RoomConnectFatal.ID, b), console.error("Chatroom.ConnectFatal")
	}
}
reset() {
	this.wsHandle = null
}
send(a) {
	if (!(1 < this.ws.readyState)) {
		const b = JSON.stringify(a);
		this.ws.send(b)
	}
}
close() {
this.ws.close()
}
}
})(); < /script>


<script>
(function () {
	"use strict";
	const a = window.TinychatApp.BLL.TCSocket;
	class b {
		constructor(b) {
			this.chatRoom = b, this.app = b.app, this.EventBus = b.EventBus, this.reqid = 0, this.queue = {}, this.tcSocket = new a(this.chatRoom, this)
		}
		get userlist() {
			return this.chatRoom.userlist
		}
		get videolist() {
			return this.chatRoom.videolist
		}
		get chatlog() {
			return this.chatRoom.chatlog
		}
		reset() {
			this.tcSocket.reset(), this.reqid = 0, this.queue = {}
		}
		send(a) {
			return this.tcSocket.send(a)
		}
		connect(a) {
			this.tcSocket.connect(a)
		}
		onMessage(a) {
			let b = JSON.parse(a.data),
				c = b.req;
			if (c !== void 0) {
				let a = this.queue[c];
				if (void 0 !== a) return Object.isObj(a) && Object.isFunc(a.func) ? a.func.call(this.chatRoom, b, a.params) : Object.isFunc(a) && a.call(this.chatRoom, b), void delete this.queue[c]
			}
			let d = b.tc;
			"string" === typeof d ? 
			"ping" === d ? this.chatRoom.onPing(b) : 
			"userlist" === d ? this.chatRoom.onRoomUserlist(b) : 
			"join" === d ? this.chatRoom.onRoomUserJoin(b) : 
			"room_settings" === d ? this.chatRoom.onRoomSettings(b) : 
			"quit" === d ? this.chatRoom.onRoomUserQuit(b) : 
			"publish" === d ? this.chatRoom.onRoomPublish(b) : 
			"unpublish" === d ? this.chatRoom.onRoomUnPublish(b) : 
			"stream_connected" === d ? this.chatRoom.onStreamConnected(b) : 
			"pending_moderation" === d ? this.chatRoom.onPendingModeration(b) : 
			"waiting_slot" === d ? this.chatRoom.onWaitingSlot(b) : 
			"stream_closed" === d ? this.chatRoom.onStreamClosed(b) : 
			"stream_moder_allow" === d ? this.chatRoom.onStreamModerAllow(b) : 
			"msg" === d ? this.chatRoom.onSendMessagePublicCallback(b) : 
			"nick" === d ? this.chatRoom.onNicknameChanged(b) : 
			"pvtmsg" === d ? this.chatRoom.onSendMessagePrivateCallback(b) : 
			"closed" === d ? (this.chatRoom.onClosed(b), this.tcSocket.close()) : 
			"sysmsg" === d ? this.chatRoom.onSystemMessage(b) : 
			"gift" === d ? this.chatRoom.onGiftMessage(b) : d.startsWith("yut_") ? this.chatRoom.onYoutube(b) : 
			"yut_playlist" === d ? this.chatRoom.onYoutubePlaylist(b) : d.startsWith("guest_session_timeout") ? this.chatRoom.onGuestSessTimeout(b) : d.startsWith("multiple_videos_timeout") ? this.chatRoom.onMultipleVideosTimeout(b) : console.error("Unknown pkt: " + JSON.stringify(b)) : console.error("Unknown pkt format: " + JSON.stringify(b))
		}
		wsCreatePacket(a, b) {
			const c = {
				tc: a,
				req: ++this.reqid
			};
			return this.registerPacketCallback(c, b), c
		}
		registerPacketCallback(a, b) {
			b !== void 0 && (this.queue[a.req] = b)
		}
	}
	window.TinychatApp.BLL.PacketWorker = b
})(); 
</script> 

<script> 
(function () {
"use strict";
let a = null;
class b {
	constructor() {}
	static getInstance() {
		return null == a && (a = new b), a
	}
	getRoomEvent() {}
}
window.TinychatApp.BLL.Tracker = b
})();
</script>


<script>
(function(){"use strict";let a=null;class b{constructor(){}static getInstance(){return null==a&&(a=new b),a}gotoUrl(a,b){if(b){let b=window.open(a,"_blank");b.focus()}else window.location.href=a}get backUrl(){return window.location.href}LiveDirectory(){this.gotoUrl(b.url_livedirectory(this.backUrl))}GiveAGift(a){this.gotoUrl(b.url_giveagift(a),!0)}EarnCoins(){this.gotoUrl(b.url_get_coins(this.backUrl),!0)}UpgradeSub(){this.gotoUrl(b.url_upgradenow(this.backUrl),!0)}Login(a){this.gotoUrl(b.urlpath_login(this.backUrl,a))}DevNews(){this.gotoUrl(b.url_devnews(this.backUrl),!0)}WebSettings(){this.gotoUrl(b.url_websettings(this.backUrl),!0)}Register(){this.gotoUrl(b.urlpath_register(this.backUrl))}Logout(){this.gotoUrl(b.urlpath_logout(this.backUrl))}PromoteRoom(){this.gotoUrl(b.urlpath_promoteroom(this.backUrl))}static url_giveagift(a){var b="/gifts / ";return"
string "!==typeof a||a.isEmpty()||(b=b+" ? to = "+encodeURI(a)),b}static url_earncoins(){return" / offers "}static url_upgradenow(){return" / subscription / intro "}static url_livedirectory(){return" / "}static urlpath_register(a){return urlpath_login(a)}static urlpath_login(a,b){var c="
";return void 0!=a&&(c=" ? next = "+encodeURI(a)),b&&(c+=" & header = "+b)," / start / "+c}static urlpath_logout(){return" / logout "}static urlpath_promoteroom(){return" / promote / intro "}static url_devnews(){return"
https: //twitter.com/tinychatdev"}static url_websettings(){return"/settings/privacy"}static url_get_coins(){return"https://tinychat.com/coins/intro"}}window.TinychatApp.BLL.Router=b})();</script>


<script>(function(){"use strict";let a=null;class b{constructor(a){this.EventBus=a}static getInstance(c){return null==a&&(a=new b(c)),a}isYoutube(){let a=this.getSettings();return a.enableYoutube}isPrivateMessage(){let a=this.getSettings();return a.enablePMs}isAcousticEchoCancelation(){let a=this.getSettings();return a.enableAcousticEchoCancelation}switchPrivatemessaging(a){let b=this.getSettings();b.enablePMs=a,this.saveSettings(b)}switchYoutube(a){let b=this.getSettings();b.enableYoutube=a,this.saveSettings(b)}switchSound(a){let b=this.getSettings();b.enableSound=a,this.saveSettings(b)}switchConfirmBan(a){let b=this.getSettings();b.onfirmBans=a,this.saveSettings(b)}switchAcousticEchoCancelation(a){let b=this.getSettings();b.enableAcousticEchoCancelation=a,this.saveSettings(b)}switchRememberVolume(a){let b=this.getSettings();b.rememberVolume=a,this.saveSettings(b)}switchDarkMode(a){let b=this.getSettings();b.darkMode=a,this.saveSettings(b)}isDarkMode(){let a=this.getSettings();return a.darkMode}changeNickname(a){let b=this.getSettings();b.nickname=a,this.saveSettings(b)}getSettings(){var a=this._get("tinychat_settings");try{a=Object.assign(new TinychatApp.DAL.SettingsEntity,JSON.parse(a))}catch(a){}return(void 0==a||"object"!==typeof a)&&(a=new TinychatApp.DAL.SettingsEntity),a}saveSettings(a){if("object"===typeof a){let b=this.getSettings();this._set("tinychat_settings",JSON.stringify(a));let c=this.getSettings();if(!b.equals(c)){let a=new d(c);this.EventBus.broadcast(d.ID,a)}}}_set(a,b){"undefined"===typeof Storage||(localStorage[a]=b)}_get(a,b){if("undefined"===typeof Storage)return b;var c=localStorage[a];return void 0===c&&(c=b),c}_remove(a){localStorage.removeItem(a)}}const c="SettingsChangedEvent_"+Math.Guid.newGuid();class d{static get ID(){return c}constructor(a){return this.settingsEntity=a,this}}window.TinychatApp.BLL.SettingsFeature=b,window.TinychatApp.BLL.SettingsChangedEvent=d})();</script>


<script>(function(){"use strict";window.TinychatApp.BLL.SoundPlayer=class{static playGift(a){let b=new Audio(window.rootDir+"/sound/magic.mp3");b.volume=a,b.play()}static playMessage(a){let b=new Audio(window.rootDir+"/sound/pop.mp3");b.volume=a,b.play()}}})();</script>



<script>(function(){"use strict";class a{static get STYPE_FREE(){return 0}static get STYPE_PRO(){return 10}static get STYPE_EXTREME(){return 20}static get STYPE_GOLD(){return 30}static isSubscription(b){return b>a.STYPE_FREE}static isSubPro(b){return b>=a.STYPE_PRO&&b<a.STYPE_EXTREME}static isSubExtreme(b){return b>=a.STYPE_EXTREME&&b<a.STYPE_GOLD}static isSubGold(b){return b>=a.STYPE_GOLD}static isSubHighest(b){return a.isSubGold(b)}static canUseFilters(b){return b>a.STYPE_PRO}static getCssClass(b){var c=0;b instanceof TinychatApp.DAL.UserEntity&&(c=b.subscriptionType),b instanceof TinychatApp.DAL.UserProfileEntity&&(c=b.stype);var d="";return a.isSubPro(c)?d="pro":a.isSubExtreme(c)?d="extreme":a.isSubGold(c)&&(d="gold"),d}}window.TinychatApp.BLL.User=a})();</script>


< script > (function () {
	"use strict";
	var a = Math.Guid;
	class b {
		constructor(a) {
			this.chatroom = a, this.EventBus = a.app.EventBus, this.items = [], this.bannedItems = [], this.ignored = [], this.firstBanlist = !0
		}
		get app() {
			return this.chatroom.app
		}
		clear() {
			this.items = [], this.bannedItems = [], this.ignored = [], this.firstBanlist = !0
		}
		start(a) {
			this.items = a, this.sorting(this.items);
			let b = new d(this.items, this.chatroom);
			this.EventBus.broadcast(d.ID, b)
		}
		joined(a) {
			this.items.push(a);
			this.sorting(this.items);
			let b = new f(this.items.indexOf(a), a, this.chatroom);
			this.EventBus.broadcast(f.ID, b)
		}
		quited(a) {
			for (var b in this.items) {
				var c = this.items[b];
				if (c.handle === a) {
					this.items.splice(b, 1);
					let a = new h(b, c, this.chatroom);
					this.EventBus.broadcast(h.ID, a);
					break
				}
			}
		}
		updateBroadcasting(a, b) {
			this.generateUpdateEvent(a, a => {
				a.isBroadcasting = b
			})
		}
		updateNickname(a, b) {
			this.generateUpdateEvent(a, a => {
				a.nickname = b
			})
		}
		generateUpdateEvent(a, b) {
			var c = -1,
				d = null,
				e = -1,
				f = null;
			if ((Object.keys(this.items).forEach(b => {
					let e = this.items[b];
					if (e.handle === a) return c = Number.parseInt(b), d = Object.assign(new TinychatApp.DAL.UserEntity, e), f = e, !0
				}), null != d) && (b(f), !Object.equals(d, f))) {
				this.sorting(this.items), e = this.items.indexOf(f);
				let a = new j(c, d, e, f, this);
				this.EventBus.broadcast(j.ID, a)
			}
		}
		sorting(a) {
			a.sort((c, a) => {
				let b = a.subscriptionType - c.subscriptionType || (a.isOperator ? 1 : 0) - (c.isOperator ? 1 : 0) || (a.isBroadcasting ? 1 : 0) - (c.isBroadcasting ? 1 : 0) || a.giftpoints - c.giftpoints || (a.username.localeCompare("") ? 1 : 0) - (c.username.localeCompare("") ? 1 : 0) || c.nickname.toLowerCase().localeCompare(a.nickname.toLowerCase()) || c.handle - a.handle;
				return b
			})
		}
		get(a) {
			for (var b in this.items) {
				var c = this.items[b];
				if (c.handle === a) {
					return c
				}
			}
			return null
		}
		getByNickname(a) {
			let b = a.toLowerCase();
			for (var c in this.items) {
				var d = this.items[c];
				if (d.nickname.toLowerCase() === b) {
					return d
				}
			}
			return null
		}
		getItems() {
			return this.items
		}
		getBannedItems() {
			return this.bannedItems
		}
		isBanned() {
			return !1
		}
		banIsAllowed(a) {
			return !a.isSelf && !a.isOwner && this.chatroom.isOperator()
		}
		followIsAllowed(a) {
			return !a.isSelf && !a.isGuest
		}
		ignoreIsAllowed(a) {
			return !a.isSelf && !this.isIgnored(a)
		}
		kickIsAllowed(a) {
			return !a.isSelf && !a.isOwner && this.chatroom.isOperator()
		}
		videoForceCloseAllow(a) {
			if (this.chatroom.isOwner()) return !a.isSelf;
			return !!this.chatroom.isOperator() && !a.isSelf && !a.isOwner && !a.isOperator
		}
		changenick(a) {
			if (a.handle === this.chatroom.self_handle) {
				let a = new TinychatApp.BLL.RoomNicknameChangeEvent("", ModalDialogChangeNickname.MODE_CHANGE);
				this.EventBus.broadcast(TinychatApp.BLL.RoomNicknameChangeEvent.ID, a)
			}
		}
		abuse(a) {
			this.chatroom.Abuse(a)
		}
		kick(a) {
			this.chatroom.Kick(a)
		}
		ban(a) {
			this.chatroom.Ban(a)
		}
		videoForceClose(a) {
			this.chatroom.VideoForceClose(a)
		}
		unban(a) {
			this.app.showToast("unban " + a.handle)
		}
		isIgnored(a) {
			let b = a.isUsername ? a.username : a.nickname;
			return -1 < this.ignored.indexOf(b)
		}
		ignore(a) {
			let b = a.isUsername ? a.username : a.nickname;
			this.isIgnored(a) || this.ignored.push(b);
			let c = new t(a);
			this.EventBus.broadcast(t.ID, c), this.app.showToast(a.username + " ignored successfully")
		}
		unignore(a) {
			let b = a.isUsername ? a.username : a.nickname,
				c = this.ignored.indexOf(b); - 1 < c && this.ignored.splice(c, 1);
			let d = new t(a);
			this.EventBus.broadcast(t.ID, d), this.app.showToast(a.username + " unignored")
		}
		follow(a) {
			if (a.isInsta) return void this.app.showToastWarn("Unfortunately, you can't follow insta-room", 4e3);
			if (a.isGuest) return void this.app.showToastWarn("User is not signed in to Tinychat", 4e3);
			let b = this;
			this.app.Follow(a.username, function (c) {
				"success" === c ? b.app.showToast("You are now following " + a.nickname) : "already" === c ? b.app.showToast("You are already following " + a.nickname) : "unregistered" === c ? b.app.showToastWarn("You must be logged into a Tinychat account to initiate follow. Please sign in (sign up) and try again", 4e3) : "unknown " === c && b.app.showToastWarn("User is not signed in to Tinychat", 4e3)
			}, function () {})
		}
		unfollow(a) {
			this.app.showToast("unfollow " + a.handle)
		}
	}
	const c = "UserlistUpdateallEvent_" + a.newGuid();
	class d {
		static get ID() {
			return c
		}
		constructor(a, b) {
			return this.users = a, this.chatroom = b, this
		}
	}
	const e = "UserlistAddUserEvent_" + a.newGuid();
	class f {
		static get ID() {
			return e
		}
		constructor(a, b, c) {
			return this.index = a, this.userentity = b, this.chatroom = c, this
		}
	}
	const g = "UserlistRemoveUserEvent_" + a.newGuid();
	class h {
		static get ID() {
			return g
		}
		constructor(a, b, c) {
			return this.index = a, this.userentity = b, this.chatroom = c, this
		}
	}
	const i = "UserlistUpdateUserEvent_" + a.newGuid();
	class j {
		static get ID() {
			return i
		}
		constructor(a, b, c, d, e) {
			return this.fromIndex = a, this.fromUserEntity = b, this.toIndex = c, this.toUserEntity = d, this.userlist = e, this
		}
	}
	const k = "BanlistUpdateallEvent_" + a.newGuid();
	class l {
		static get ID() {
			return k
		}
		constructor(a) {
			return this.chatroom = a, this
		}
	}
	const m = "BanlistAddUserEvent_" + a.newGuid();
	class n {
		static get ID() {
			return m
		}
		constructor(a, b, c) {
			return this.index = a, this.userentity = b, this.chatroom = c, this
		}
	}
	const o = "BanlistRemoveUserEvent_" + a.newGuid();
	class p {
		static get ID() {
			return o
		}
		constructor(a, b, c) {
			return this.index = a, this.userentity = b, this.chatroom = c, this
		}
	}
	const q = "BanlistUpdateUserEvent_" + a.newGuid();
	class r {
		static get ID() {
			return q
		}
		constructor(a, b, c, d, e) {
			return a, b, c, d, e, this.fromIndex = a, this.fromUserentity = b, this.toUserIndex = c, this.toUserEntity = d, this.chatroom = e, this
		}
	}
	const s = "IgnorelistUpdateUserEvent_" + a.newGuid();
	class t {
		static get ID() {
			return s
		}
		constructor(a) {
			return this.userentity = a, this
		}
	}
	window.TinychatApp.BLL.Userlist = b, window.TinychatApp.BLL.UserlistUpdateallEvent = d, window.TinychatApp.BLL.UserlistAddUserEvent = f, window.TinychatApp.BLL.UserlistRemoveUserEvent = h, window.TinychatApp.BLL.UserlistUpdateUserEvent = j, window.TinychatApp.BLL.IgnorelistUpdateUserEvent = t
})(); 
</script>


<script>
(function () {
	"use strict";
	var a = Math.Guid;
	class b {
		constructor(a) {
			this.chatroom = a, this.EventBus = a.app.EventBus, this.items = {}, this.items[b.PUBLIC] = [], this.chatlist = [], this.selectedchat = b.PUBLIC, this.EventBus.subscribe(TinychatApp.BLL.UserlistUpdateUserEvent.ID, a => {
				this.onUserlistUpdate(a)
			}), this.EventBus.subscribe(TinychatApp.BLL.UserlistRemoveUserEvent.ID, a => {
				this.onUserlistRemove(a)
			})
		}
		static get PUBLIC() {
			return -1
		}
		static get MAX() {
			return 999
		}
		static get MAX_INPUT_LEN() {
			return 500
		}
		get userlist() {
			return this.chatroom.userlist
		}
		get settings() {
			return this.chatroom.app.settings
		}
		SendMessage(a, c) {
			c.length > b.MAX_INPUT_LEN && console.warn("Message length is limited by " + b.MAX_INPUT_LEN);
			let d = this.chatroom.selfUser();
			if (a === b.PUBLIC) return this.public_add_unconfirmed(c, d), this.chatroom.SendMessagePublic(c, d), !0;
			if (a instanceof TinychatApp.DAL.UserEntity) {
				let b = this.userlist.get(a.handle);
				return null == b ? (this.system_add(a.handle, "Message has not delivered. User is offline ..."), !1) : (this.private_add_unconfirmed(c, d, a), this.chatroom.SendMessagePrivate(c, d, a), !0)
			}
			return !1
		}
		clear() {
			this.items = {}, this.items[b.PUBLIC] = [], this.chatlist = [], this.selectedchat = b.PUBLIC
		}
		isequal(a, c) {
			if (a === b.PUBLIC) return a === c;
			return !!(a instanceof TinychatApp.DAL.UserEntity) && a.handle === c
		}
		subscribed_add(a) {
			let c = TinychatApp.DAL.ChatLogItemEntity,
				d = new c;
			d.chatname = b.PUBLIC;
			let e, f = "Subscribed user " + a.username + " has joined to the room",
				g = this.getitems(d.chatname);
			for (e = 0; e < g.length; e++)
				if (g[e].message_text === f) return;
			d.message_text = f, d.user = a, d.type = a.subscriptionType, this.additem(g, d);
			let h = this.settings.getSettings();
			h.enableSound && 5 >= this.userlist.items.length && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
		}
		gift_add(a) {
			a.type = TinychatApp.DAL.ChatLogItemEntity.GIFT, a.chatname = b.PUBLIC;
			let c = this.getitems(a.chatname);
			this.additem(c, a);
			let d = this.settings.getSettings();
			d.enableSound && window.TinychatApp.BLL.SoundPlayer.playGift(this.chatroom.volume)
		}
		system_add(a, b) {
			a instanceof TinychatApp.DAL.UserEntity && (a = a.handle);
			let c = TinychatApp.DAL.ChatLogItemEntity,
				d = new c;
			d.type = c.SYSTEM, d.user = null, d.message_text = b, d.chatname = a;
			let e = this.getitems(d.chatname);
			this.additem(e, d)
		}
		public_add(a) {
			if (null != a.user) {
				if (null != a.user && a.user.handle === this.chatroom.self_handle) {
					let b = new h(a, a.chatname);
					return void this.EventBus.broadcast(h.ID, b)
				}
				a.chatname = b.PUBLIC;
				let c = this.getitems(a.chatname);
				this.additem(c, a);
				let d = this.settings.getSettings();
				d.enableSound && 5 >= this.userlist.items.length && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
			}
		}
		public_add_unconfirmed(a, c) {
			if (null == c) return;
			let d = TinychatApp.DAL.ChatLogItemEntity,
				e = new d;
			e.type = d.PUBLIC, e.user = c, e.message_text = a, e.chatname = b.PUBLIC;
			let f = this.getitems(e.chatname);
			this.additem(f, e);
			let g = this.settings.getSettings();
			g.enableSound && 5 >= this.userlist.items.length && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
		}
		private_add(a) {
			if (null != a.user) {
				if (null != a.user && a.user.handle === this.chatroom.self_handle) {
					let b = new h(a, a.chatname);
					return void this.EventBus.broadcast(h.ID, b)
				}
				var b = this.settings.isPrivateMessage();
				if (b && !this.isopenedprivate(a.user) && this.openprivate(a.user, !0), b) {
					let b = this.getitems(a.chatname);
					this.additem(b, a);
					let c = this.settings.getSettings();
					c.enableSound && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
				}
			}
		}
		private_add_unconfirmed(a, b, c) {
			if (null == a) return;
			if (null == b) return;
			if (null == c) return;
			let d = TinychatApp.DAL.ChatLogItemEntity,
				e = new d;
			e.type = d.PRIVATE, e.user = b, e.chatname = c.handle, e.message_text = a;
			let f = this.getitems(e.chatname);
			this.additem(f, e);
			let g = this.settings.getSettings();
			g.enableSound && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
		}
		getitems(a) {
			let b = this.items[a];
			return void 0 == b && (b = [], this.items[a] = b), b
		}
		additem(a, c) {
			if (a.length >= b.MAX) {
				let b = a.shift(),
					d = new f(0, b, c.chatname);
				this.EventBus.broadcast(f.ID, d)
			}
			var e = a.push(c) - 1;
			let g = new d(e, c, c.chatname);
			this.EventBus.broadcast(d.ID, g)
		}
		onUserlistRemove(a) {
			let b = this.getopenedprivate(a.userentity);
			if (null == b) return;
			let c = TinychatApp.DAL.UserEntity;
			b.isOffline = !0, this.selectedchat instanceof c && this.selectedchat.handle === b.handle && (this.selectedchat = Object.assign(this.selectedchat, b));
			let d = this.chatlist.indexOf(b),
				e = new n(d, b, d, b);
			this.EventBus.broadcast(n.ID, e)
		}
		onUserlistUpdate(a) {
			let b = this.getopenedprivate(a.toUserEntity);
			if (null == b) return;
			let c = this.chatlist.indexOf(b),
				d = this.chatlist.indexOf(a.toUserEntity),
				e = a.toUserEntity,
				f = TinychatApp.DAL.UserEntity;
			this.selectedchat instanceof f && this.selectedchat.handle === e.handle && (this.selectedchat = Object.assign(this.selectedchat, e));
			let g = new n(c, b, d, e);
			this.EventBus.broadcast(n.ID, g)
		}
		selectChat(a) {
			this.selectedchat = a;
			let b = new p(this.selectedchat, this.getitems(this.selectedchat.handle));
			this.EventBus.broadcast(p.ID, b)
		}
		selectPublic(a) {
			this.selectedchat = b.PUBLIC;
			let c = new p(this.selectedchat, this.getitems(this.selectedchat));
			this.EventBus.broadcast(p.ID, c), a instanceof TinychatApp.DAL.UserEntity && this.closeprivate(a)
		}
		closeChat(a) {
			this.selectPublic(a)
		}
		chatlist() {
			return this.chatlist
		}
		openprivate(a, b) {
			let c = this.isopenedprivate(a);
			if (c || this.chatlist.push(a), void 0 == b && this.selectChat(a), !c) {
				let b = new j(this.chatlist.indexOf(a), a, this.chatroom);
				this.EventBus.broadcast(j.ID, b)
			}
		}
		closeprivate(a) {
			for (var b in this.chatlist) {
				var c = this.chatlist[b];
				if (c.handle === a.handle) {
					this.chatlist.splice(b, 1);
					let a = new l(b, c, this.chatroom);
					this.EventBus.broadcast(l.ID, a);
					break
				}
			}
		}
		getopenedprivate(a) {
			var b = null;
			for (var c in this.chatlist) {
				var d = this.chatlist[c];
				if (d.handle === a.handle) {
					b = d;
					break
				}
			}
			return b
		}
		isopenedprivate(a) {
			var b = !1;
			for (var c in this.chatlist) {
				var d = this.chatlist[c];
				if (d.handle === a.handle) {
					b = !0;
					break
				}
			}
			return b
		}
	}
	const c = "ChatlogItemAddedEvent_" + a.newGuid();
	class d {
		static get ID() {
			return c
		}
		constructor(a, b, c) {
			return this.index = a, this.chatentity = b, this.chatname = c, this
		}
	}
	const e = "ChatlogItemRemovedEvent_" + a.newGuid();
	class f {
		static get ID() {
			return e
		}
		constructor(a, b, c) {
			return this.index = a, this.chatentity = b, this.chatname = c, this
		}
	}
	const g = "ChatlogItemSentEvent_" + a.newGuid();
	class h {
		static get ID() {
			return g
		}
		constructor(a, b) {
			return this.chatentity = a, this.chatname = b, this
		}
	}
	const i = "ChatlistAddEvent_" + a.newGuid();
	class j {
		static get ID() {
			return i
		}
		constructor(a, b, c) {
			return this.index = a, this.userentity = b, this.chatroom = c, this
		}
	}
	const k = "ChatlistRemoveEvent_" + a.newGuid();
	class l {
		static get ID() {
			return k
		}
		constructor(a, b, c) {
			return this.index = a, this.userentity = b, this.chatroom = c, this
		}
	}
	const m = "ChatlistUpdateEvent_" + a.newGuid();
	class n {
		static get ID() {
			return m
		}
		constructor(a, b, c, d) {
			return this.fromIndex = a, this.fromUserEntity = b, this.toIndex = c, this.toUserEntity = d, this
		}
	}
	const o = "ChatlistSelectedEvent_" + a.newGuid();
	class p {
		static get ID() {
			return o
		}
		constructor(a, b) {
			return this.userentity = a, this.chatitems = b, this
		}
	}
	const q = "ChatlistUIUpdateEvent_" + a.newGuid();
	class r {
		static get ID() {
			return q
		}
		constructor() {
			return this
		}
	}
	window.TinychatApp.BLL.Chatlog = b, window.TinychatApp.BLL.ChatlogItemAddedEvent = d, window.TinychatApp.BLL.ChatlogItemRemovedEvent = f, window.TinychatApp.BLL.ChatlogItemSentEvent = h, window.TinychatApp.BLL.ChatlistAddEvent = j, window.TinychatApp.BLL.ChatlistRemoveEvent = l, window.TinychatApp.BLL.ChatlistUpdateEvent = n, window.TinychatApp.BLL.ChatlistSelectedEvent = p, window.TinychatApp.BLL.ChatlistUIUpdateEvent = r
})(); 
</script>

< script > (function () {
	"use strict";
	var a = Math.Guid;
	class b {
		constructor(a, b, d) {
			this.videolist = a, this.userentity = b, this.mediastream = d, this.progress = !1, this.large = !1, this.hidden = !1, this.mute = !1, this.volume = 1, this.audiolevel = 0, this.featured = !1, this.blured = !1;
			try {
				let a = this,
					b = d.getAudioTracks();
				if (!Array.isArray(b) || 1 > b.length) return;
				this.soundMeter = new SoundMeter(this.videolist.audioContext), this.soundMeter.connectToSource(this.mediastream, b => b ? void console.warn(b) : void(a.soundMeterTimer = setInterval(function () {
					let b = a.audiolevel;
					if (a.audiolevel = Math.ceil(10 * a.soundMeter.instant.toFixed(2)), 10 < a.audiolevel && (a.audiolevel = 10), b != a.audiolevel) {
						let b = a.videolist.getitems().indexOf(a);
						if (-1 < b) {
							let d = new f(c.Update, a, b);
							a.videolist.EventBus.broadcast(f.ID, d)
						}
					}
				}, 200)))
			}
			catch (a) {
				console.warn("Web Audio API not supported.", a)
			}
		}
		Dispose() {
			this.soundMeter && this.soundMeter.stop(), this.soundMeterTimer && clearInterval(this.soundMeterTimer)
		}
		get userlist() {
			return this.videolist.chatroom.userlist
		}
		get handle() {
			return this.userentity.handle
		}
		get nickname() {
			return this.userentity.nickname
		}
		get muted() {
			return this.mute || this.userentity.isSelf
		}
		get achivementUrl() {
			return this.userentity.achivementUrl || ""
		}
		get videoForceCloseAllow() {
			return this.videolist.chatroom.userlist.videoForceCloseAllow(this.userentity)
		}
		get ignoreAllow() {
			return this.videolist.chatroom.userlist.ignoreIsAllowed(this.userentity)
		}
		get unignoreAllow() {
			return this.videolist.chatroom.userlist.isIgnored(this.userentity)
		}
		get followAllow() {
			return this.videolist.chatroom.userlist.followIsAllowed(this.userentity)
		}
		get openprivateAllow() {
			return !this.userentity.isSelf && !this.videolist.chatroom.selfUser().isGuest
		}
		get profileAllow() {
			return !0
		}
		get abuseAllow() {
			return !this.userentity.isSelf
		}
		get banAllow() {
			return this.userlist.banIsAllowed(this.userentity)
		}
		get kickAllow() {
			return this.userlist.kickIsAllowed(this.userentity)
		}
		get filtersAllow() {
			return this.userentity.isSelf
		}
		get giveagiftAllow() {
			return !this.userentity.isSelf
		}
		get upgradeAllow() {
			return this.userentity.isSelf
		}
		get volumeControlAllow() {
			return !this.userentity.isSelf
		}
	}
	const c = {
			Add: "Add",
			AddWaiting: "AddWaiting",
			AddPending: "AddPending",
			AddModeration: "AddModeration",
			Remove: "Remove",
			RemovePendingWaiting: "RemovePendingWaiting",
			RemoveModeration: "RemoveModeration",
			Update: "Update",
			UpdateModeration: "UpdateModeration"
		},
		d = "VideolistEvent_" + a.newGuid();
	class f {
		static get ID() {
			return d
		}
		constructor(a, b, c) {
			return this.action = a, this.videolistitem = b, this.index = c, this
		}
	}
	const e = "VideolistClear_" + a.newGuid();
	class g {
		static get ID() {
			return e
		}
		constructor(a) {
			return this.chatroom = a, this
		}
	}
	const h = "VideolistAcceptedEvent_" + a.newGuid();
	class i {
		static get ID() {
			return h
		}
		constructor(a, b) {
			return this.userId = a, this.chatroom = b, this
		}
	}
	window.TinychatApp.BLL.Videolist = class {
		constructor(a) {
			this.chatroom = a, this.EventBus = a.app.EventBus, this.items = [], this.moderationitems = [], this.selfItem, this.audioContext = new AudioContext, this.needToBlurOtherVids = !1, this.EventBus.subscribe(TinychatApp.BLL.UserlistRemoveUserEvent.ID, a => this.onUserlistRemoved(a)), this.EventBus.subscribe(TinychatApp.BLL.UserlistUpdateUserEvent.ID, a => this.onUserlistUpdate(a))
		}
		getitems() {
			return this.items
		}
		getModerationItems() {
			return this.moderationitems
		}
		count() {
			return this.items.length
		}
		clear() {
			this.items = [], this.needToBlurOtherVids = !1, this.EventBus.broadcast(g.ID, new g(this.chatroom))
		}
		switchPTT(a) {
			let b = this._getSelfMediaStream();
			null != b && this._muteMediaStream(b, !a)
		}
		setVolume(a, b) {
			b == void 0 ? (this.chatroom.volume = a, Object.keys(this.items).forEach(b => {
				let c = this.items[b];
				this._volMediaStream(c.mediastream, a)
			})) : this._volMediaStream(b.mediastream, a)
		}
		toggleFeatured(a) {
			let b = this.items.indexOf(a);
			if (!(0 > b)) {
				a.featured = !a.featured;
				let d = new f(c.Update, a, b);
				this.EventBus.broadcast(f.ID, d)
			}
		}
		toggleSizeVW2Normal(a) {
			Object.keys(this.items).forEach(b => {
				let d = this.items[b];
				if (d.large && (a == void 0 || d.userentity.handle != a.handle)) {
					d.large = !1;
					let a = new f(c.Update, d, b);
					this.EventBus.broadcast(f.ID, a)
				}
			})
		}
		toggleSizeVW(a) {
			a.large = !a.large, a.large && this.toggleSizeVW2Normal(a);
			let b = this.items.indexOf(a);
			if (0 <= b) {
				let d = new f(c.Update, a, b);
				this.EventBus.broadcast(f.ID, d)
			}
		}
		toggleHiddenVW(a) {
			let b = this.items.indexOf(a);
			if (!(0 > b)) {
				a.hidden = !a.hidden, this._pauseMediaStream(a.mediastream, a.hidden), a.hidden || this._muteMediaStream(a.mediastream, a.mute);
				let d = new f(c.Update, a, b);
				this.EventBus.broadcast(f.ID, d)
			}
		}
		toggleMuteVW(a) {
			let b = this.items.indexOf(a);
			if (!(0 > b)) {
				a.mute = !a.mute, a.hidden || this.switchMute(a.mute, a);
				let d = new f(c.Update, a, b);
				this.EventBus.broadcast(f.ID, d)
			}
		}
		switchMicMute(a) {
			this.chatroom.micmuted = void 0 == a ? !this.chatroom.micmuted : a;
			let b = this._getSelfMediaStream();
			return null != b && this._muteMediaStream(b, this.chatroom.micmuted), this.chatroom.micmuted
		}
		switchMute(a, b) {
			let d = (d, a) => {
				this._muteMediaStream(d.mediastream, d.mute);
				let b = new f(c.Update, d, a);
				this.EventBus.broadcast(f.ID, b)
			};
			if (void 0 == b) return this.chatroom.mute = void 0 == a ? !this.chatroom.mute : a, Object.keys(this.items).forEach(a => {
				let b = this.items[a];
				b.mute != this.chatroom.mute && b.userentity.handle != this.chatroom.self_handle && (b.mute = this.chatroom.mute, d(b, a))
			}), this.chatroom.mute;
			else {
				let c = b,
					e = this.items.indexOf(c);
				c.mute = a, d(c, e)
			}
		}
		CanMakeLargeVideo() {
			let a = this.chatroom.selfUser().subscriptionType,
				b = chatroom.app.IsLoggedIn() && TinychatApp.BLL.User.isSubscription(a);
			return b
		}
		AddingVideoSelf() {}
		RemovingVideoSelf(a) {
			if (this.chatroom.self_handle == a) {
				this.selfItem = null;
				let a = new f(c.RemovePendingWaiting, this.selfItem, 0);
				this.EventBus.broadcast(f.ID, a)
			}
		}
		AddVideoSelf(a, c) {
			let d = this.chatroom.userlist.get(a),
				e = new b(this, d, c);
			(this.chatroom.roomSettings.pushtotalk || this.chatroom.micmuted) && this._muteMediaStream(e.mediastream, !0), this._volMediaStream(e.mediastream, this.chatroom.volume), this.selfItem = e
		}
		PublishedVideoSelf() {
			this.items.push(this.selfItem);
			let a = new f(c.Add, this.selfItem, this.items.indexOf(this.selfItem));
			this.EventBus.broadcast(f.ID, a), this.selfItem = null
		}
		PendingModerationVideoSelf() {
			let a = new f(c.AddPending, this.selfItem, 0);
			this.EventBus.broadcast(f.ID, a)
		}
		WaitingSlotVideoSelf() {
			let a = new f(c.AddWaiting, this.selfItem, 0);
			this.EventBus.broadcast(f.ID, a)
		}
		RemoveVideoSelf(a) {
			this.RemovingVideoSelf(a), this.RemoveVideoRemote(a)
		}
		AcceptedSelfVideoByModerator(a) {
			this.EventBus.broadcast(VideoModeratorAcceptedEvent.ID, new VideoModeratorAcceptedEvent(a, this.chatroom))
		}
		AddVideoRemote(a, d) {
			let e = this.chatroom.userlist.get(a),
				g = new b(this, e, d);
			if (this._muteMediaStream(g.mediastream, this.chatroom.mute), this._volMediaStream(g.mediastream, this.chatroom.volume), e.needToUpprove) {
				this.moderationitems.push(g);
				let a = new f(c.AddModeration, g, this.moderationitems.indexOf(g));
				this.EventBus.broadcast(f.ID, a)
			}
			else {
				this.items.push(g);
				let a = new f(c.Add, g, this.items.indexOf(g));
				this.EventBus.broadcast(f.ID, a)
			}
		}
		onUserlistRemoved(a) {
			this.RemoveVideoRemote(a.userentity.handle)
		}
		onUserlistUpdate(a) {
			let d = this.items.find(b => b.userentity.handle === a.toUserEntity.handle);
			if (d instanceof b) {
				d.userentity = a.toUserEntity;
				let b = this.items.indexOf(d),
					e = new f(c.Update, d, b);
				this.EventBus.broadcast(f.ID, e)
			}
		}
		RemoveVideoRemote(a) {
			var b = Number.parseInt;
			let d = null,
				e = -1;
			if (Object.keys(this.items).forEach(c => {
					let f = this.items[c];
					if (f.userentity.handle === a) return d = f, e = b(c), !0
				}), null != d) {
				this.items.splice(e, 1), d.Dispose();
				let a = new f(c.Remove, d, e);
				this.EventBus.broadcast(f.ID, a)
			}
			else {
				let d = null,
					e = -1;
				if (Object.keys(this.moderationitems).forEach(c => {
						let f = this.moderationitems[c];
						if (f.userentity.handle === a) return d = f, e = b(c), !0
					}), null != d) {
					this.moderationitems.splice(e, 1), d.Dispose();
					let a = new f(c.RemoveModeration, d, e);
					this.EventBus.broadcast(f.ID, a)
				}
			}
		}
		_muteMediaStream(a, b) {
			let c = a.getAudioTracks();
			!Array.isArray(c) || 1 > c.length || Object.keys(c).forEach(a => {
				c[a].enabled = !b
			})
		}
		_pauseMediaStream(a, b) {
			let c = a.getAudioTracks();
			if (!Array.isArray(c) || 1 > c.length) return;
			Object.keys(c).forEach(a => {
				c[a].enabled = !b
			});
			let d = a.getVideoTracks();
			!Array.isArray(d) || 1 > d.length || Object.keys(d).forEach(a => {
				d[a].enabled = !b
			})
		}
		_volMediaStream(a, b) {
			let c = a.getAudioTracks();
			!Array.isArray(c) || 1 > c.length || Object.keys(c).forEach(a => {
				c[a].volume = b, console.log(c[a].kind + " - " + c[a].readyState + ", remote:" + c[a].remote + " - " + c[a].id + " -> vol: " + c[a].volume)
			})
		}
		_getSelfMediaStream() {
			let a = this.items.find(a => a.userentity.handle == this.chatroom.self_handle);
			return a ? a.mediastream : null
		}
		setNeedToBlurOtherVids(a) {
			this.needToBlurOtherVids = a
		}
		blurOtherVids(a, b) {
			this.needToBlurOtherVids && Object.keys(this.items).forEach(d => {
				let e = this.items[d],
					g = !0;
				if (-1 < a.indexOf(e.handle) ? e.blured = !0 : -1 < b.indexOf(e.handle) ? e.blured = !1 : g = !1, g) {
					let a = new f(c.Update, e, d);
					this.EventBus.broadcast(f.ID, a)
				}
			})
		}
	}, window.TinychatApp.BLL.VideolistItem = b, window.TinychatApp.BLL.VideolistAction = c, window.TinychatApp.BLL.VideolistEvent = f, window.TinychatApp.BLL.VideolistClear = g, window.TinychatApp.BLL.VideolistAcceptedEvent = i
})(); 
</script>




< script > (function () {
			"use strict";
			var a = Math.Guid;
			const b = window.TinychatApp.BLL.PacketWorker;
			class c {
				constructor(a, c, d, e) {
					this.app = a, this.tc_token = c, this.roomname = d, this.nickname = e, this.EventBus = a.EventBus, this.roomSettings = null, this._enterroomresult = null, this._userlist = null, this._chatlog = null, this._videolist = null, this.reqid = 0, this.wsHandle = null, this.queue = {}, this.mediaConnections = {
						local: null,
						remote: {}
					}, this.mediaStream = null, this.mediaStreamVideo = null, this.mediaStreamCanvas = null, this.mediaStreamFilter = window.TinychatApp.BLL.VideoFilters.getAll[0].name, this.mediaStreamOrigin = null, this.mediaLastState = null, this.mediaLastConstraints = null;
					let f = this;
					this.EventBus.subscribe(TinychatApp.BLL.BroadcastProgressEvent.ID, function (a) {
						f.mediaLastState = a.stage
					}), this.banlist = null, this.youtubelist = [], this.youtubelist_random = !1, this.youtubelist_repeat = !1, this.fullscreen = !1, this.mute = !1, this.volume = 1, this.micmuted = !1, this.wsEndpoint = "wss://wss.tinychat.com:443", this.packetWorker = new b(this), this.autoReconnectTryouts = 0, this.autoReconnectPeriod = 500, this.manualReconnectTryouts = 0, this.pushNotificationSentYet = !1, setInterval(() => {
						this.pushNotificationSentYet = !1
					}, 10800000), this.wsReset()
				}
				wsReset() {
					for (let a in null != this.mediaStream && this.mediaStream.stop(), null != this.mediaConnections.local && this.mediaConnections.local.Close(), this.mediaConnections.remote) {
						let b = this.mediaConnections.remote[a];
						b.Close()
					}
					this.roomSettings = new TinychatApp.DAL.RoomSettingsEntity, this._enterroomresult = null, null != this._userlist && this.userlist.clear(), null != this._videolist && this._videolist.clear(), this.mediaConnections = {
						local: null,
						remote: {}
					}, this.streamReset(), this.fullscreen = !1, this.mute = !1, this.packetWorker.reset()
				}
				streamReset() {
					null != this.mediaStream && this.mediaStream.stop(), this.mediaStream = null, this.mediaStreamCanvas = null, this.mediaStreamVideo = null, null != this.mediaStreamOrigin && this.mediaStreamOrigin.stop(), this.mediaStreamOrigin = null
				}
				get settings() {
					return this.app.settings
				}
				get enterroomresult() {
					return null == this._enterroomresult && (this._enterroomresult = new TinychatApp.DAL.EnterRoomResultEntity), this._enterroomresult
				}
				get userlist() {
					return null == this._userlist && (this._userlist = new TinychatApp.BLL.Userlist(this)), this._userlist
				}
				get chatlog() {
					return null == this._chatlog && (this._chatlog = new TinychatApp.BLL.Chatlog(this)), this._chatlog
				}
				get videolist() {
					return null == this._videolist && (this._videolist = new TinychatApp.BLL.Videolist(this)), this._videolist
				}
				get _tracker() {
					return TinychatApp.BLL.Tracker.getInstance()
				}
				get _router() {
					return TinychatApp.BLL.Router.getInstance()
				}
				get _api() {
					return WebAPI.getInstance()
				}
				get _cookie() {
					return CookieUtils
				}
				get self_handle() {
					let a = this.enterroomresult;
					return null == a || null == a.selfuser ? -1 : a.selfuser.handle
				}
				get url() {
					return TinychatApp.url + "/room/" + this.chatroomName()
				}
				get id__miconly() {
					return "__miconly"
				}
				getRoomAvatarUrl() {
					return this.app.GetAvatarUrl(this.chatroomName())
				}
				selfUser() {
					return this.enterroomresult.selfuser
				}
				chatroomName() {
					let a = TinychatApp.DAL.RoomSettingsEntity,
						b = this.roomname;
					return this.roomSettings instanceof a && this.roomSettings.name.isNotEmpty() && (b = this.roomSettings.name), b
				}
				updateSelfUser(a) {
					a.isSelf = !0, this.enterroomresult.selfuser = a
				}
				updateRoomSettings(a) {
					this.roomSettings = a;
					let b = new e(this.roomSettings);
					this.EventBus.broadcast(e.ID, b)
				}
				isLurker() {
					return null != this.enterroomresult.selfuser && this.enterroomresult.selfuser.isLurker
				}
				isOperator() {
					return null != this.enterroomresult.selfuser && this.enterroomresult.selfuser.isOperator
				}
				isOwner() {
					return null != this.enterroomresult.selfuser && this.enterroomresult.selfuser.isOwner
				}
				gotoGift(a) {
					this.app.GiveAGift(a.username)
				}
				gotoLiveDirectory() {
					this.app.LiveDirectory()
				}
				Reconnect() {
					clearInterval(this.reconnect_timer), null != this.wsHandle && this.wsReset(), this.Connect(!0)
				}
				Connect(a) {
					let b = this;
					this.app.isDebug() ? this.packetWorker.connect(a) : (console.log("Chatroom.Connecting: reinvoke tc token ..."), this._api.wsj({
						src: TinychatApp.url_api_room_token(b.chatroomName())
					}).then(c => {
						b.tc_token = c.result, b.wsEndpoint = c.endpoint, b.packetWorker.connect(a)
					}).catch(c => {
						console.error(c), b.app.showToastWarn("Some unknown server error occurred"), b.packetWorker.connect(a)
					}))
				}
				ConnectSolveCaptcha(a) {
					this.packetWorker.send(this.tcPkt_ConnectCaptcha(a, this.onRoomConnectCallback))
				}
				ConnectSolveSkip() {
					this.packetWorker.send(this.tcPkt_ConnectCaptcha("", this.onRoomConnectCallback))
				}
				ConnectSolveTimeout() {
					this.packetWorker.send(this.tcPkt_ConnectCaptcha("", this.onRoomConnectCallback))
				}
				ConnectPassword(a) {
					this.packetWorker.send(this.tcPkt_ConnectPassword(a, this.onRoomConnectCallback))
				}
				NicknameChange(a, b) {
					this.packetWorker.send(this.tcPkt_NickChange(a, this.onNicknameChanged)), b && this.app.settings.changeNickname(a)
				}
				NicknameIsValid(a) {
					return this.app.IsValidNickname(a)
				}
				NicknameIsInUseFast(a) {
					if ("string" != typeof a || a.isEmpty()) return !1;
					let b = this.userlist.getByNickname(a);
					return null != b
				}
				BroadcastSwitch(a) {
					a ? this.BroadcastStop() : this.BroadcastStart()
				}
				IsLastCam(a, b) {
					let c = !0;
					for (let d in a) {
						let e = a[d];
						"videoinput" === e.kind && (c = e.deviceId === b.deviceId)
					}
					return c
				}
				BroadcastStart(a) {
					let b = this,
						c = this.settings,
						d = this.settings.getSettings();
					if (null === d.video) return void this.app.MediaSettings(() => this.BroadcastStart());
					this.videolist.AddingVideoSelf(this.self_handle);
					let e = {};
					if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) e.audio = !0, e.video = {
						width: 320,
						height: 240
					};
					else {
						let f = !1;
						navigator.mediaDevices.enumerateDevices().then(g => {
							let h = !1;
							for (let c in g) {
								let i = g[c];
								"videoinput" === i.kind && (console.log(i), e.video === void 0 && (e.video = {
									width: 320,
									height: 240,
									frameRate: {
										ideal: 15,
										max: 30
									}
								}), h && (d.video = i, h = !1, this.settings.saveSettings(d), f = b.IsLastCam(g, i)), null === d.video && (d.video = i, this.settings.saveSettings(d)), null != d.video && "object" == typeof d.video && d.video.deviceId == i.deviceId && d.video.deviceId !== a ? e.video.deviceId = {
									exact: d.video.deviceId
								} : d.video.deviceId === a && (h = !0)), "audioinput" === i.kind && (console.log(i), e.audio === void 0 && (e.audio = {}), null != d.audio && "object" == typeof d.audio && d.audio.deviceId == i.deviceId && (e.audio.deviceId = {
									exact: d.audio.deviceId
								}))
							}
							null != e.video && null != d.video && d.video.deviceId == b.id__miconly && delete e.video;
							let i = navigator.mediaDevices.getSupportedConstraints();
							for (let a in i) i.hasOwnProperty(a) && "echoCancellation" == a && e.audio && (e.audio[a] = c.isAcousticEchoCancelation());
							if (!(e.audio || e.video)) b.onMediaFailedCallback(new Error("No media devices to start broadcast."));
							else if ("https:" === location.protocol || this.app.isDebug()) {
								console.log("Broadcast: Media ...");
								let a = new y(y.MEDIA_START);
								this.EventBus.broadcast(y.ID, a), console.log(e), b.mediaLastConstraints = e, navigator.mediaDevices.getUserMedia(e).then(a => {
									b.onMediaSuccessCallback(a)
								}).catch(a => {
									f ? b.onMediaFailedCallback(a) : this.BroadcastStart(e.video.deviceId.exact)
								})
							}
							else b.onMediaFailedCallback(new Error("Use https:// protocol for safe open media devices."))
						}).catch(a => {
							console.log(a)
						})
					}
				}
				BroadcastStop() {
					console.log("Broadcast: Media ... stop");
					let a = new y(y.MEDIA_STOPING);
					this.EventBus.broadcast(y.ID, a);
					let b = this.tcPkt_StreamClose(this.self_handle, this.onStreamClosed);
					this.packetWorker.send(b)
				}
				Youtube(a) {
					let b = this.tcPkt_Youtube(a.cmd, a);
					this.packetWorker.send(b)
				}
				YoutubePlaylistLoad(a) {
					let b = this,
						c = this.tcPkt_YoutubePlaylist(c => {
							b.onYoutubePlaylist(c), a && a()
						});
					this.packetWorker.send(c)
				}
				YoutubePlaylistMode(a, b, c) {
					let d = this.tcPkt_YoutubePlaylistMode(a, b, a => {
						!0 === a.success && c && c()
					});
					this.packetWorker.send(d)
				}
				YoutubePlaylistAdd(a, b) {
					let c = this.tcPkt_YoutubePlaylistAdd(a, a => {
						!0 === a.success && b && b()
					});
					this.packetWorker.send(c)
				}
				YoutubePlaylistRemove(a, b) {
					let c = this.tcPkt_YoutubePlaylistRemove(a, a => {
						!0 === a.success && b && b()
					});
					this.packetWorker.send(c)
				}
				YoutubePlaylistClear(a) {
					let b = this.tcPkt_YoutubePlaylistClear(b => {
						!0 === b.success && a && a()
					});
					this.packetWorker.send(b)
				}
				SendMessagePublic(a) {
					this.packetWorker.send(this.tcPkt_Msg(a, this.onSendMessagePublicCallback))
				}
				SendMessagePrivate(a, b, c) {
					this.packetWorker.send(this.tcPkt_Msg_Private(a, c.handle, this.onSendMessagePrivateCallback))
				}
				Kick(a) {
					this.packetWorker.send(this.tcPkt_Kick(a.handle))
				}
				Abuse(a) {
					this.app.showToast("[" + a.nickname + "] was reported"), this.packetWorker.send(this.tcPkt_Abuse(a.handle))
				}
				Ban(a) {
					this.app.showToast("[" + a.nickname + "] has been banned"), this.packetWorker.send(this.tcPkt_Ban(a.handle, this.onBanCallback))
				}
				Unban(a) {
					this.packetWorker.send(this.tcPkt_Unban(a.id, this.onUnbanCallback))
				}
				Banlist(a) {
					let b = this;
					this.packetWorker.send(this.tcPkt_Banlist(c => {
						b.onBanlistCallback(c), a(Array.isArray(b.banlist) ? b.banlist : [])
					}))
				}
				VideoForceClose(a) {
					this.packetWorker.send(this.tcPkt_VideoForceClose(a.handle, this.onVideoForceCloseCallback))
				}
				VideoAllow(a) {
					this.packetWorker.send(this.tcPkt_VideoAllow(a.handle))
				}
				switchFullscreen(a) {
					return this.fullscreen = void 0 == a ? !this.fullscreen : a, this.fullscreen
				}
				takeSnapshot() {
					return !0
				}
				tcPkt_Connect(a) {
					let b = this.packetWorker.wsCreatePacket("join", a);
					return b.useragent = this.app.useragent, b.token = this.tc_token, b.room = this.roomname, b.nick = this.nickname, b
				}
				tcPkt_Pong() {
					let a = this.packetWorker.wsCreatePacket("pong");
					return a
				}
				tcPkt_GetICE(a) {
					let b = this.packetWorker.wsCreatePacket("getice", a);
					return b
				}
				tcPkt_Trickle(a, b) {
					let c = this.packetWorker.wsCreatePacket("trickle");
					return c.handle = a, c.candidate = b, c
				}
				tcPkt_SDP(a, b, c, d) {
					let e = this.packetWorker.wsCreatePacket("sdp", d);
					return e.type = a, e.sdp = b, e.handle = c, e
				}
				tcPkt_Subscribe(a, b) {
					let c = this.packetWorker.wsCreatePacket("subscribe", b);
					return c.handle = a, c
				}
				tcPkt_Msg(a, b) {
					let c = this.packetWorker.wsCreatePacket("msg", b);
					return c.text = this.tcPktPrepareText(a), c
				}
				tcPkt_Msg_Private(a, b, c) {
					let d = this.packetWorker.wsCreatePacket("pvtmsg", c);
					return d.text = this.tcPktPrepareText(a), d.handle = b, d
				}
				tcPkt_Kick(a, b) {
					let c = this.packetWorker.wsCreatePacket("kick", b);
					return c.handle = a, c
				}
				tcPkt_Ban(a, b) {
					let c = this.packetWorker.wsCreatePacket("ban", b);
					return c.handle = a, c
				}
				tcPkt_Unban(a, b) {
					let c = this.packetWorker.wsCreatePacket("unban", b);
					return c.id = a, c
				}
				tcPkt_Banlist(a) {
					let b = this.packetWorker.wsCreatePacket("banlist", a);
					return b
				}
				tcPkt_VideoForceClose(a, b) {
					let c = this.packetWorker.wsCreatePacket("stream_moder_close", b);
					return c.handle = a, c
				}
				tcPkt_VideoAllow(a) {
					let b = this.packetWorker.wsCreatePacket("stream_moder_allow");
					return b.handle = a, b
				}
				tcPkt_Youtube(a, b, c) {
					let d = this.packetWorker.wsCreatePacket(a, c);
					return d.item = {
						id: b.id,
						duration: b.duration,
						offset: b.offset
					}, void 0 !== b.title && (d.item.title = b.title), !0 === b.seekByUser && (d.item.seek = !0), void 0 !== b.playlist && (d.item.playlist = b.playlist), d
				}
				tcPkt_YoutubePlaylist(a) {
					return this.packetWorker.wsCreatePacket("yut_playlist", a)
				}
				tcPkt_YoutubePlaylistMode(a, b, c) {
					let d = this.packetWorker.wsCreatePacket("yut_playlist_mode", c);
					return d.mode = {
						random: a,
						repeat: b
					}, d
				}
				tcPkt_YoutubePlaylistAdd(a, b) {
					let c = this.packetWorker.wsCreatePacket("yut_playlist_add", b);
					return c.item = {
						id: a.id,
						duration: a.duration,
						title: a.title,
						image: a.imgurl,
						playlist: !0
					}, c
				}
				tcPkt_YoutubePlaylistRemove(a, b) {
					let c = this.packetWorker.wsCreatePacket("yut_playlist_remove", b);
					return c.item = {
						id: a.id,
						duration: a.duration,
						title: a.title,
						image: a.imgurl,
						playlist: !0
					}, c
				}
				tcPkt_YoutubePlaylistClear(a) {
					let b = this.packetWorker.wsCreatePacket("yut_playlist_clear", a);
					return b
				}
				tcPkt_Abuse(a, b) {
					let c = this.packetWorker.wsCreatePacket("abuse", b);
					return c.handle = a, c
				}
				tcPkt_ConnectCaptcha(a, b) {
					let c = this.packetWorker.wsCreatePacket("captcha", b);
					return c.token = a, c
				}
				tcPkt_ConnectPassword(a, b) {
					let c = this.packetWorker.wsCreatePacket("password", b);
					return c.password = a, c
				}
				tcPkt_NickChange(a, b) {
					let c = this.packetWorker.wsCreatePacket("nick", b);
					return c.nick = a, c
				}
				tcPkt_StreamClose(a, b) {
					let c = this.packetWorker.wsCreatePacket("stream_close", b);
					return c.handle = a, c
				}
				tcPktPrepareText(a) {
					return a
				}
				tcPkt_UserParse(a) {
					let b = new TinychatApp.DAL.UserEntity;
					return b.path = a.handle || 0, b.nickname = a.nick || "", b.username = a.username || "", b.subscriptionType = a.subscription || 0, b.avatarUrl = a.avatar || "", b.giftpoints = a.giftpoints || 0, b.achivementUrl = a.achievement_url || "", b.isLurker = a.lurker || !1, b.isOwner = a.owner || !1, b.isOperator = a.mod || !1, b.isFeatured = a.featured || !1, b
				}
				tcPkt_RoomSettingsParse(a) {
					let b = new TinychatApp.DAL.RoomSettingsEntity;
					b.type = a.type || "", b.name = a.name || "", b.topic = a.topic || "", b.subtype = a.subscription || 0, b.giftpoints = a.giftpoints || 0, b.pushtotalk = "boolean" == typeof a.pushtotalk ? a.pushtotalk : a.pushtotalk || !1;
					let c = a.recent_gifts,
						d = [];
					return Array.isArray(c) && Object.keys(c).forEach(a => {
						let b = new TinychatApp.DAL.GiftEntity;
						b.giftUrl = c[a], d.push(b)
					}), b.recent_gifts = d, b.biography = a.biography || "", b.location = a.location || "", b.website = a.website || "", b.avatar = a.avatar || "", b.isYTavailable = a.youtube_enabled || 0, b.sessionTimeoutForGuests = a.session_timeout_for_guests || 60, b.msgConstraints = a.msg_constraints || 0, b
				}
				tcPkt_MsgParse(a) {
					let b = new TinychatApp.DAL.ChatLogItemEntity;
					b.message_text = a.text || "";
					let c = a.handle || 0;
					return b.user = this.userlist.get(c), b
				}
				tcPkt_GiftParse(a) {
					let b = new TinychatApp.DAL.GiftEntity,
						c = a.gift,
						d = c.anon;
					if (b.giftComment = c.comment, b.giftExt = c.extensions, b.giftName = c.name, b.giftStore = c.store_url, b.giftUrl = c.url, !d) {
						let c = a.from;
						b.fromUsername = c.name, b.fromUrl = c.url
					}
					else b.fromUsername = "", b.fromUrl = "";
					let e = a.to;
					return b.toUsername = e.name, b.toUrl = e.url, b
				}
				tcPkt_BanlistItemParse(a) {
					let b = new TinychatApp.DAL.BanlistItemEntity;
					return b.id = a.id || "", b.username = a.username || "", b.nickname = a.nick || "", b.reason = a.reason || "", b.moderator = a.moderator || "", b
				}
				tcPkt_TcCallbackCheck(a, b) {
					return !(a.tc !== b) || (console.error("Unexpected pkt: " + JSON.stringify(a)), console.error("Protocol Callback error:" + b + " ~ " + a.tc), !1)
				}
				_stopRemoteMediaConnection(a) {
					this.mediaConnections.remote[a] !== void 0 && (this.mediaConnections.remote[a].Close(), delete this.mediaConnections.remote[a])
				}
				onPing() {
					this.packetWorker.send(this.tcPkt_Pong())
				}
				onRoomUserlist(a) {
					let b = a.users,
						c = [];
					for (let d in b) {
						let a = b[d],
							e = this.tcPkt_UserParse(a);
						e.handle == this.self_handle && (e.isSelf = !0), c.push(e)
					}
					this.userlist.start(c)
				}
				onRoomUserJoin(a) {
					let b = this.tcPkt_UserParse(a);
					b.handle == this.self_handle && (b.isSelf = !0), this.userlist.joined(b)
				}
				onRoomSettings(a) {
					if (this.tcPkt_TcCallbackCheck(a, "room_settings")) {
						let b = this.tcPkt_RoomSettingsParse(a.room);
						this.updateRoomSettings(b)
					}
				}
				onRoomUserQuit(a) {
					let b = a.handle;
					this._stopRemoteMediaConnection(b), this.userlist.quited(b)
				}
				onRoomPublish(a) {
					let b = a.handle;
					if (this.userlist.updateBroadcasting(b, !0), b === this.self_handle) return void this.videolist.PublishedVideoSelf();
					let c = this.tcPkt_Subscribe(b, this.onRemoteConnectionReadyCallback);
					this.packetWorker.send(c)
				}
				onRoomPublishReconnect(a) {
					if (a !== this.self_handle) {
						let b = this.userlist.get(a);
						if (null !== b && (b.isBroadcasting || b.needToUpprove)) {
							let b = this.tcPkt_Subscribe(a, this.onRemoteConnectionReadyCallback);
							this.packetWorker.send(b)
						}
					}
				}
				onRoomUnPublish(a) {
					let b = a.handle;
					this._stopRemoteMediaConnection(b), this.userlist.updateBroadcasting(b, !1)
				}
				onStreamConnected(a) {
					!this.tcPkt_TcCallbackCheck(a, "stream_connected")
				}
				onPendingModeration(a) {
						let b = a.handle;
						if (b === this.self_handle) return void this.videolist.PendingModerationVideoSelf();



const c=this.userlist.get(b);c.needToUpprove=!0;let d=this.tcPkt_Subscribe(b,this.onRemoteConnectionReadyCallback);this.packetWorker.send(d)}onWaitingSlot(a){let b=a.handle;b===this.self_handle&&this.videolist.WaitingSlotVideoSelf()}onStreamClosed(a){if(!this.tcPkt_TcCallbackCheck(a,"stream_closed"))return;let b=a.publish,c=a.handle;this.self_handle==c?(this._selfMediaStreamStop(c,"Broadcast closed due server request"),a.reason!==void 0&&null!==a.reason&&this._selfShowReason(a.reason)):(this._stopRemoteMediaConnection(c),this.onRoomPublishReconnect(c),this.videolist.RemoveVideoRemote(c))}onStreamModerAllow(a){if(!this.tcPkt_TcCallbackCheck(a,"stream_moder_allow"))return;let b=a.handle,c=a.allowed_by;this._stopRemoteMediaConnection(b);let d=this.userlist.get(b),e=this.userlist.get(c);d.needToUpprove=!1,null!==e&&this.app.showToast(` [$ {
						d.nickname
					}]
					's broadcast allowed by [${e.nickname}]`)}_selfMediaStreamStop(a,b){if(null!=this.mediaConnections.local){if(null!=this.mediaStream&&this.mediaStream.active&&this.mediaLastState!==y.MEDIA_STOPING){this.mediaStream.stop(),null!=this.mediaStreamOrigin&&this.mediaStreamOrigin.stop();let a=TinychatApp.BLL.BroadcastProgressEvent,c=new a(a.MEDIA_RTC_FAILED);c.error=new Error(b),this.EventBus.broadcast(a.ID,c)}this.mediaConnections.local.Close(),this.mediaConnections.local=null}null!=this.mediaStream&&(this.mediaStream.stop(),this.mediaStream=null,this.streamReset()),this.videolist.RemoveVideoSelf(a);let c=new y(y.MEDIA_STOPED);this.EventBus.broadcast(y.ID,c)}_selfShowReason(a){this.app.Notify(a.text)}onMediaSuccessCallback(a){this.mediaStream=this.mediaLastConstraints.video?this.prepareStream(a):a;let b=this.tcPkt_GetICE(this.onPublisherConnectionReadyCallback);this.packetWorker.send(b),console.log("Broadcast: Media OK ...");let c=new y(y.MEDIA_OK);this.EventBus.broadcast(y.ID,c)}applyFilter(a){this.mediaStreamFilter=a}prepareStream(a){function b(){if(null==c.mediaStreamCanvas)return;d.clearRect(0,0,c.mediaStreamCanvas.width,c.mediaStreamCanvas.height);let a=c.mediaStreamVideo.videoHeight,e=c.mediaStreamVideo.videoWidth;c.mediaStreamCanvas.width=e,c.mediaStreamCanvas.height=a,window.TinychatApp.BLL.VideoFilters.getFilter(c.mediaStreamFilter).apply(d,e,a),d.drawImage(c.mediaStreamVideo,0,0,e,a,0,0,c.mediaStreamCanvas.width,c.mediaStreamCanvas.height),requestAnimationFrame(b)}if(this.app.isSafari())return a;this.mediaStreamOrigin=a,this.mediaStreamVideo=document.createElement("video"),this.mediaStreamVideo.srcObject=this.mediaStreamOrigin,this.mediaStreamVideo.pause(),this.mediaStreamVideo.oncanplay=function(){requestAnimationFrame(b)},this.mediaStreamVideo.autoplay=!0,this.mediaStreamVideo.muted=!0,this.mediaStreamCanvas=document.createElement("canvas");let c=this,d=this.mediaStreamCanvas.getContext("2d");this.mediaStreamVideo.play();let e=this.mediaStreamCanvas.captureStream(15);return e.addTrack(this.mediaStreamOrigin.getAudioTracks()[0]),e}onMediaFailedCallback(a){console.warn("Broadcast: Media Failed ..."),this.mediaStream=null,this.videolist.RemoveVideoSelf(this.self_handle);let b=a.message;if(""==a.message)switch(a.name){case"NotFoundError":case"DevicesNotFoundError":b="Please setup your webcam first.";break;case"SourceUnavailableError":b="Your webcam is busy.";break;case"PermissionDeniedError":case"SecurityError":case"NotAllowedError":b="CAMERA/MICROPHONE access permission denied!";break;case"PermissionDismissedError":b="Tinychat is required to access CAMERA/MICROPHONE to have media broadcast!";break;default:b="Failed to start broadcast... Please check your webcam!";}else switch(a.name){case"OverconstrainedError":b="Failed to start broadcast... Please check your webcam!";}let c=new y(y.MEDIA_FAILED);c.error=new Error(b),this.EventBus.broadcast(y.ID,c)}onBanCallback(a){if(this.tcPkt_TcCallbackCheck(a,"ban")){let b=a.success;if(!0===b);else{a.reason;console.error(a)}}}onUnbanCallback(a){if(this.tcPkt_TcCallbackCheck(a,"unban")){let b=a.success;if(!0===b){a.id}else{a.reason;console.error(a)}}}onBanlistCallback(a){if(!this.tcPkt_TcCallbackCheck(a,"banlist"))return;let b=a.success,c=a.items;if(!0===b&&Array.isArray(c))for(let a in this.banlist=[],c){let b=this.tcPkt_BanlistItemParse(c[a]);this.banlist.push(b)}else{a.reason;console.error(a)}}onVideoForceCloseCallback(a){if(this.tcPkt_TcCallbackCheck(a,"stream_moder_close")){let b=a.success;if(!0===b){const b=a.handle,c=this.userlist.get(b);null===c?this.app.showToast("There is no such user to close video"):this.app.showToast("["+c.nickname+"] video was closed")}else{const b=a.error;this.app.showToastWarn(b.text)}}}onRoomConnectCallback(a){if("joined"===a.tc){let b=this.tcPkt_UserParse(a.self),c=this.tcPkt_RoomSettingsParse(a.room);this.updateSelfUser(b),this.updateRoomSettings(c),b.isLurker?console.warn("Chatroom.Connected: nickname: "+b.nickname+" - IsLurker!"):console.log("Chatroom.Connected: nickname: "+b.nickname),this.reconnect_wait=0,b.username||this.app.showToastTimeoutToLogin(this.roomSettings.sessionTimeoutForGuests);let d=new q;this.EventBus.broadcast(q.ID,d),""===this.nickname}else if("password"===a.tc){let a=new k;this.EventBus.broadcast(k.ID,a)}else if("captcha"===a.tc){let b=a.key,c=new i(b);this.EventBus.broadcast(i.ID,c)}else"closed"===a.tc?this.onClosed(a):this.tcPkt_TcCallbackCheck(a,null)}onPublisherConnectionReadyCallback(a){if(this.tcPkt_TcCallbackCheck(a,"iceservers"))if(!0==a.success){let b=a.servers,c=this.self_handle,d=new TinychatApp.BLL.MediaConnection(this.videolist,c,!0,b);d.AddStream(this.mediaStream),this.mediaConnections.local=d,console.log("Broadcast: Media.ICE.SDP ...");let e=new y(y.MEDIA_ICE);this.EventBus.broadcast(y.ID,e),d.Connect()}else{console.error(a);try{this._selfMediaStreamStop(this.self_handle,"Broadcast closed due server request (ICE)");let a=TinychatApp.BLL.BroadcastProgressEvent,b=new a(a.MEDIA_RTC_FAILED);b.error=new Error("Broadcast closed due server request (ICE)"),this.EventBus.broadcast(a.ID,b)}catch(a){console.error(a)}}}onRemoteConnectionReadyCallback(a){if(!this.tcPkt_TcCallbackCheck(a,"sdp"))return;if(!0!==a.success||"offer"!==a.type)return;let b=a.servers,c=a.sdp,d=a.handle,e=new TinychatApp.BLL.MediaConnection(this.videolist,d,!1,b,c);this.mediaConnections.remote[d]=e,e.Connect()}onSendMessagePublicCallback(a){if(this.tcPkt_TcCallbackCheck(a,"msg")){let b=this.tcPkt_MsgParse(a);this._userlist.isIgnored(b.user)||this.chatlog.public_add(b)}}onSendMessagePrivateCallback(a){if(!this.tcPkt_TcCallbackCheck(a,"pvtmsg"))return;let b=this.tcPkt_MsgParse(a),c=TinychatApp.DAL.ChatLogItemEntity;b.type=c.PRIVATE,b.chatname=b.user.handle;this._userlist.isIgnored(b.user)||this.chatlog.private_add(b)}onSystemMessage(a){if(!this.tcPkt_TcCallbackCheck(a,"sysmsg"))return;let b=a.handle||0;if(0<b){let a=this.userlist.get(b);null==a&&(b=0)}let c=0<b?b:TinychatApp.BLL.Chatlog.PUBLIC,d=a.text||"";this.chatlog.system_add(c,d)}onGuestSessTimeout(a){this.tcPkt_TcCallbackCheck(a,"guest_session_timeout")&&this.app.Login(777)}onMultipleVideosTimeout(a){this.tcPkt_TcCallbackCheck(a,"multiple_videos_timeout")&&(this.videolist.setNeedToBlurOtherVids(!0),this.videolist.blurOtherVids(a.locked,a.unlocked))}onGiftMessage(a){if(!this.tcPkt_TcCallbackCheck(a,"gift"))return;let b=this.tcPkt_GiftParse(a),c=new TinychatApp.DAL.ChatLogItemEntity;c.chatname=TinychatApp.BLL.Chatlog.PUBLIC,c.user=null,c.message_text="["+(b.fromUsername.isEmpty()?"Anonymous":b.fromUsername)+"] sent gift '
					"+b.giftName+"
					' to ["+b.toUsername+"]\n >"+b.giftComment+"",c.giftUrl=b.giftUrl,this.chatlog.gift_add(c)}onClosed(a){if(this.tcPkt_TcCallbackCheck(a,"closed")){let b=a.error;this.closedLastReasonCode=b,console.warn("Chatroom.ConnectionClosed: "+this.closedLastReasonCode)}}onNicknameChanged(a){if(!this.tcPkt_TcCallbackCheck(a,"nick"))return;let b=a.handle,c=a.nick;if(!(b==this.self_handle))this.userlist.updateNickname(b,c);else if(!0===a.success){let a=this.selfUser();a.nickname=c,this.updateSelfUser(a),this.userlist.updateNickname(b,c)}else console.warn(a),this.app.showToastWarn("Nickname was not changed for some reason...")}onYoutube(a){if(!this.app.settings.isYoutube())return void console.log("YouTube cmds blocked by chat settings...");let b="",c=a.tc;if("yut_play"===c)b=A.YT_PLAY;else if("yut_stop"===c)b=A.YT_STOP;else return void this.tcPkt_TcCallbackCheck(a,"-");let d=new A(b);if(d.cmd=b,void 0!=a.item){let b=a.item;d.id=b.id,d.duration=b.duration,d.offset=parseFloat(b.offset),d.playlist=b.playlist}else d.id=a.id,d.duration=a.duration,d.offset=parseFloat(a.offset);d.handle=parseInt(a.handle),d.server=!0,d.success=void 0==a.success||a.success,d.reason=void 0==a.reason?"":a.reason,isNaN(d.offset)&&(d.offset=0),isNaN(d.handle)&&(d.handle=-1),d.success?this.EventBus.broadcast(A.ID,d):this.app.showToastWarn("Youtube command has failed, due: "+d.reason)}onYoutubePlaylist(a){if(!this.tcPkt_TcCallbackCheck(a,"yut_playlist"))return;let b=TinychatApp.DAL.YoutubeItem,c=a.success,d=a.reason;if(!0===c){let c=[],d=a.items;if(Array.isArray(d))for(let a in d){let e=d[a],f=new b;f.id=e.id,f.duration=e.duration,f.title=e.title,f.imgurl=e.image,f.playlist=!0,c.push(f)}if(void 0!=a.mode){let b=a.mode;this.youtubelist_random=b.random,this.youtubelist_repeat=b.repeat}this.youtubelist=c}else this.app.showToastWarn("Youtube Playlist load has failed, due: "+d)}sendPushForUnreadPrivateMessage(){if(this.pushNotificationSentYet)return;this.pushNotificationSentYet=!0;let a="username="+encodeURIComponent(this.enterroomresult.selfuser.username)+"&roomname="+encodeURIComponent(this.chatroomName()),b=new XMLHttpRequest;b.open("POST","/pushnotification/privatemessage",!0),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.send(a)}}const d="RoomSettingsEvent_"+a.newGuid();class e{static get ID(){return d}constructor(a){return this.roomSettings=a,this}}const f="RoomConnectEvent_"+a.newGuid();class g{static get ID(){return f}constructor(a){return this.attempts=a,this}}const h="RoomConnectCaptcha_"+a.newGuid();class i{static get ID(){return h}constructor(a){return this.key=a,this}}const j="RoomConnectPassword_"+a.newGuid();class k{static get ID(){return j}constructor(){return this}}const l="RoomConnectStandby_"+a.newGuid();class m{static get ID(){return l}constructor(a,b){return this.tries=a,this.waitms=b,this}}const n="RoomConnectFatal_"+a.newGuid();class o{static get ID(){return n}constructor(){return this}}const p="RoomConnected_"+a.newGuid();class q{static get ID(){return p}constructor(){return this}}const r="RoomReconnected_"+a.newGuid();class s{static get ID(){return r}constructor(){return this}}const t="RoomQuitEvent_"+a.newGuid();class u{static get ID(){return t}constructor(a,b){return this.reasonCode=a,this.chatroom=b,this}static get WS(){return-3}static ConvertReason(a){let b="";switch(a){case 0:b="There is no internet connection...";break;case 1:b="Opss, chatroom has no free slots for users";break;case 2:b="Chatroom has been closed by administrator";break;case 3:b="This room does not allow guests to join, please sign in";break;case 4:b="You have been banned by a moderator";break;case 5:b="Wrong password";break;case 6:b="Single connection is allowed for chatroom";break;case 7:b="An error occurred while connecting to the server...";break;case 8:b="An error occurred while connecting to the server...";break;case 9:b="An error occurred while connecting to the server...";break;case 10:b="An error occurred while connecting to the server...";break;case 11:b="An error occurred while connecting to the server...";break;case 12:b="You have been kicked by a moderator";break;case 22:b="You must be at least 18 years old to join this room";break;case 23:b="Your connection limit is exceeded.";break;case 24:b="This alias has been expired.";break;case 25:b="Your connection limit is exceeded. You can upgrade to get more.";break;default:b="There is no internet connection...";}return b}static ConvertAction(a){let b="";switch(a){case 3:b="SIGN IN";break;case 25:b="UPGRADE";break;default:b="RETRY";}return b}}const v="RoomNicknameChangeEvent_"+a.newGuid();class w{static get ID(){return v}constructor(a,b){return this.nickname=a,this.type=b,this}}const x="BroadcastProgressEvent_"+a.newGuid();class y{static get ID(){return x}static get MEDIA_START(){return"media_start"}static get MEDIA_OK(){return"media_ok"}static get MEDIA_ICE(){return"media_ice"}static get MEDIA_STARTED_SUCCESS(){return"media_started_success"}static get MEDIA_FAILED(){return"media_failed"}static get MEDIA_RTC_FAILED(){return"media_rtc_failed"}static get MEDIA_STOPING(){return"media_stoping"}static get MEDIA_STOPED(){return"media_stoped"}constructor(a){return this.stage=a,this.error="",this}}const z="YoutubeEvent_"+a.newGuid();class A{static get ID(){return z}static get YT_PLAY(){return"yut_play"}static get YT_STOP(){return"yut_stop"}constructor(a){return this.handle=-1,this.cmd=a,this.id="",this.offset=0,this.duration=void 0,this.seekByUser=void 0,this.playlist=void 0,this.success=!0,this.reason="",this.server=void 0,this}}window.TinychatApp.BLL.ChatRoom=c,window.TinychatApp.BLL.RoomSettingsEvent=e,window.TinychatApp.BLL.RoomConnectEvent=g,window.TinychatApp.BLL.RoomConnectCaptcha=i,window.TinychatApp.BLL.RoomConnectPassword=k,window.TinychatApp.BLL.RoomConnectStandby=m,window.TinychatApp.BLL.RoomConnectFatal=o,window.TinychatApp.BLL.RoomConnected=q,window.TinychatApp.BLL.RoomReconnected=s,window.TinychatApp.BLL.RoomQuitEvent=u,window.TinychatApp.BLL.RoomNicknameChangeEvent=w,window.TinychatApp.BLL.BroadcastProgressEvent=y,window.TinychatApp.BLL.YoutubeEvent=A})();</script>

<script>(function(){"use strict";class a{static get getAll(){return[{name:"No Filter",css:"nofilter",filter:"",background:"",mixBlendMode:"",apply:function(){}},{name:"1977",css:"_1977",filter:"contrast(1.1) brightness(1.1) saturate(1.3)",background:"rgba(243,106,188,.3)",mixBlendMode:"screen",apply:function(a,b,c){a.filter=this.filter,a.fillStyle=this.background,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Aden",css:"aden",filter:"hue-rotate(-20deg) contrast(.9) saturate(.85) brightness(1.2)",background:"linear-gradient(to right,rgba(66,10,14,.2),transparent)",mixBlendMode:"darken",apply:function(a,b,c){a.filter=this.filter;let d=a.createLinearGradient(0,0,b,c);d.addColorStop(0,"rgba(66, 10, 14, .2)"),d.addColorStop(1,"rgba(0, 0, 0, .0)"),a.fillStyle=d,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Brannan",css:"brannan",filter:"sepia(.5) contrast(1.4)",background:"rgba(161,44,199,.31)",mixBlendMode:"lighten",apply:function(a,b,c){a.filter=this.filter,a.fillStyle=this.background,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Brooklyn",css:"brooklyn",filter:"contrast(.9) brightness(1.1)",background:"radial-gradient(circle, rgba(168,223,193,.4) 70%, #c4b7c8)",mixBlendMode:"overlay",apply:function(a,b,c){a.filter=this.filter;let d=a.createRadialGradient(b/2,c/2,0,b/2,c/2,.7*b);d.addColorStop(0,"rgba(168,223,193,.4)"),d.addColorStop(1,"#c4b7c8"),a.fillStyle=d,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Clarendon",css:"clarendon",filter:"contrast(1.2) saturate(1.35)",background:"rgba(127,187,227,.2)",mixBlendMode:"overlay",apply:function(a,b,c){a.filter=this.filter,a.fillStyle=this.background,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Earlybird",css:"earlybird",filter:"contrast(.9) sepia(.2)",background:"radial-gradient(circle,#d0ba8e 20%,#360309 85%,#1d0210 100%)",mixBlendMode:"overlay",apply:function(a,b,c){a.filter=this.filter;let d=a.createRadialGradient(b/2,c/2,.2*(b/2),b/2,c/2,.85*(b/2));d.addColorStop(0,"rgba(208, 186, 142, .5)"),d.addColorStop(1,"rgba(54, 3, 9, .5)"),a.fillStyle=d,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Gingham",css:"gingham",filter:"brightness(1.05) hue-rotate(-10deg)",background:"rgba(230, 230, 250, .3)",mixBlendMode:"soft-light",apply:function(a,b,c){a.filter=this.filter,a.fillStyle=this.background,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Hudson",css:"hudson",filter:"brightness(1.2) contrast(.9) saturate(1.1)",background:"radial-gradient(circle,#a6b1ff 50%,#342134)",mixBlendMode:"multiply",apply:function(a,b,c){a.filter=this.filter;let d=a.createRadialGradient(b/2,c/2,.5*(b/2),b/2,c/2,b/2);d.addColorStop(0,"rgba(166, 177, 255, .5)"),d.addColorStop(1,"rgba(52, 33, 52, .5)"),a.fillStyle=d,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Inkwell",css:"inkwell",filter:"sepia(.3) contrast(1.1) brightness(1.1) grayscale(1)",background:"",mixBlendMode:"",apply:function(a){a.filter=this.filter}},{name:"Lo-Fi",css:"lofi",filter:"saturate(1.1) contrast(1.5)",background:"radial-gradient(circle,transparent 70%,#222 150%)",mixBlendMode:"multiply",apply:function(a,b,c){a.filter=this.filter;let d=a.createRadialGradient(b/2,c/2,.7*(b/2),b/2,c/2,1.5*(b/2));d.addColorStop(0,"rgba(0, 0, 0, 0)"),d.addColorStop(1,"rgb(34, 34, 34)"),a.fillStyle=d,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}},{name:"Maven",css:"maven",filter:"sepia(.25) brightness(.95) contrast(.95) saturate(1.5)",background:"rgba(3, 230, 26, .2)",mixBlendMode:"hue",apply:function(a,b,c){a.filter=this.filter,a.fillStyle=this.background,a.fillRect(0,0,b,c),a.globalCompositeOperation=this.mixBlendMode}}]}static getFilter(b){return a.getAll.find(a=>a.name===b)}}window.TinychatApp.BLL.VideoFilters=a})();</script>


<script type="text/javascript" charset="utf-8">(function(e){if("object"===typeof exports&&"undefined"!==typeof module)module.exports=e();else if("function"===typeof define&&define.amd)define([],e);else{var t;t="undefined"===typeof window?"undefined"===typeof global?"undefined"===typeof self?this:self:global:window,t.adapter=e()}})(function(){var e=Math.min;return function c(d,e,t){function r(i,o){if(!e[i]){if(!d[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '
					"+i+"
					'");throw a.code="MODULE_NOT_FOUND",a}var p=e[i]={exports:{}};d[i][0].call(p.exports,function(t){var e=d[i][1][t];return r(e?e:t)},p,p.exports,c,d,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,a=0;a<t.length;a++)r(t[a]);return r}({1:[function(t,r){"use strict";function a(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function n(e,t,r,a,n){var i=p.writeRtpDescription(e.kind,t);if(i+=p.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=p.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":n||"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var s="msid:"+(a?a.id:"-")+" "+o+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+p.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+p.localCName+"\r\n"),i}function o(e,t){var r=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(e){if(e&&(e.urls||e.url)){var a=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"===typeof a;return n&&(a=[a]),a=a.filter(function(e){var a=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r;return a?(r=!0,!0):0===e.indexOf("stun:")&&14393<=t&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=n?a[0]:a,!!a.length}})}function i(t,r){var a={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,a){var i=n(e.parameters.apt,r),o=n(t.parameters.apt,a);return i&&o&&i.name.toLowerCase()===o.name.toLowerCase()};return t.codecs.forEach(function(n){for(var o,s=0;s<r.codecs.length;s++)if(o=r.codecs[s],n.name.toLowerCase()===o.name.toLowerCase()&&n.clockRate===o.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&o.parameters.apt&&!i(n,o,t.codecs,r.codecs))continue;o=JSON.parse(JSON.stringify(o)),o.numChannels=e(n.numChannels,o.numChannels),a.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}),t.headerExtensions.forEach(function(e){for(var t,n=0;n<r.headerExtensions.length;n++)if(t=r.headerExtensions[n],e.uri===t.uri){a.headerExtensions.push(t);break}}),a}function s(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function c(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function d(t,r){var a=new Error(r);return a.name=t,a.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],a}var p=t("sdp");r.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function m(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function l(t,r,a,n){var i=new Event("track");i.track=r,i.receiver=a,i.transceiver={receiver:a},i.streams=n,e.setTimeout(function(){t._dispatchEvent("track",i)})}var h=function(r){var a=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){a[e]=n[e].bind(n)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw d("NotSupportedError","rtcpMuxPolicy '
					negotiate ' is not supported");else r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require");switch(r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all";}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced";}if(r.iceServers=o(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;0<s;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=p.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};h.prototype.onicecandidate=null,h.prototype.onaddstream=null,h.prototype.ontrack=null,h.prototype.onremovestream=null,h.prototype.onsignalingstatechange=null,h.prototype.oniceconnectionstatechange=null,h.prototype.onconnectionstatechange=null,h.prototype.onicegatheringstatechange=null,h.prototype.onnegotiationneeded=null,h.prototype.ondatachannel=null,h.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},h.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},h.prototype.getConfiguration=function(){return this._config},h.prototype.getLocalStreams=function(){return this.localStreams},h.prototype.getRemoteStreams=function(){return this.remoteStreams},h.prototype._createTransceiver=function(e,t){var r=0<this.transceivers.length,a={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)a.iceTransport=this.transceivers[0].iceTransport,a.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();a.iceTransport=n.iceTransport,a.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(a),a},h.prototype.addTrack=function(t,r){if(this._isClosed)throw d("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var a=this.transceivers.find(function(e){return e.track===t});if(a)throw d("InvalidAccessError","Track already exists.");for(var n,o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},h.prototype.addStream=function(e){var r=this;if(15025<=t)e.getTracks().forEach(function(t){r.addTrack(t,e)});else{var a=e.clone();e.getTracks().forEach(function(e,t){var r=a.getTracks()[t];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),a.getTracks().forEach(function(e){r.addTrack(e,a)})}},h.prototype.removeTrack=function(r){if(this._isClosed)throw d("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(r instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var t=this.transceivers.find(function(e){return e.rtpSender===r});if(!t)throw d("InvalidAccessError","Sender was not created by this connection.");var a=t.stream;t.rtpSender.stop(),t.rtpSender=null,t.track=null,t.stream=null;var n=this.transceivers.map(function(e){return e.stream});-1===n.indexOf(a)&&-1<this.localStreams.indexOf(a)&&this.localStreams.splice(this.localStreams.indexOf(a),1),this._maybeFireNegotiationNeeded()},h.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},h.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},h.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},h.prototype._createIceGatherer=function(t,r){var a=this;if(r&&0<t)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?"completed":"gathering",null!==a.transceivers[t].bufferedCandidateEvents&&a.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),n},h.prototype._gather=function(t,r){var a=this,n=this.transceivers[r].iceGatherer;if(!n.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,n.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),n.onlocalcandidate=function(e){if(!(a.usingBundle&&0<r)){var i=new Event("icecandidate");i.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate,s=!o||0===Object.keys(o).length;if(s)("new"===n.state||"gathering"===n.state)&&(n.state="completed");else{"new"===n.state&&(n.state="gathering"),o.component=1,o.ufrag=n.getLocalParameters().usernameFragment;var c=p.writeCandidate(o);i.candidate=Object.assign(i.candidate,p.parseCandidate(c)),i.candidate.candidate=c,i.candidate.toJSON=function(){return{candidate:i.candidate.candidate,sdpMid:i.candidate.sdpMid,sdpMLineIndex:i.candidate.sdpMLineIndex,usernameFragment:i.candidate.usernameFragment}}}var d=p.getMediaSections(a.localDescription.sdp);d[i.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+i.candidate.candidate+"\r\n",a.localDescription.sdp=p.getDescription(a.localDescription.sdp)+d.join("");var m=a.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==a.iceGatheringState&&(a.iceGatheringState="gathering",a._emitGatheringStateChange()),s||a._dispatchEvent("icecandidate",i),m&&(a._dispatchEvent("icecandidate",new Event("icecandidate")),a.iceGatheringState="complete",a._emitGatheringStateChange())}},e.setTimeout(function(){i.forEach(function(t){n.onlocalcandidate(t)})},0)}},h.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var a=new e.RTCDtlsTransport(r);return a.ondtlsstatechange=function(){t._updateConnectionState()},a.onerror=function(){Object.defineProperty(a,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:a}},h.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var a=this.transceivers[e].dtlsTransport;a&&(delete a.ondtlsstatechange,delete a.onerror,delete this.transceivers[e].dtlsTransport)},h.prototype._transceive=function(e,r,a){var n=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(n.encodings=e.sendEncodingParameters,n.rtcp={cname:p.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(n.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(n)),a&&e.rtpReceiver&&0<n.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&15019>t&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),n.encodings=e.recvEncodingParameters.length?e.recvEncodingParameters:[{}],n.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(n.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(n.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(n))},h.prototype.setLocalDescription=function(e){var t=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(d("TypeError","Unsupported type \""+e.type+"\""));if(!s("setLocalDescription",e.type,t.signalingState)||t._isClosed)return Promise.reject(d("InvalidStateError","Can not set local "+e.type+" in state "+t.signalingState));var r,a;if("offer"===e.type)r=p.splitSections(e.sdp),a=r.shift(),r.forEach(function(e,r){var a=p.parseRtpParameters(e);t.transceivers[r].localCapabilities=a}),t.transceivers.forEach(function(e,r){t._gather(e.mid,r)});else if("answer"===e.type){r=p.splitSections(t.remoteDescription.sdp),a=r.shift();var n=0<p.matchPrefix(a,"a=ice-lite").length;r.forEach(function(e,r){var o=t.transceivers[r],s=o.iceGatherer,c=o.iceTransport,d=o.dtlsTransport,m=o.localCapabilities,l=o.remoteCapabilities,h=p.isRejected(e)&&0===p.matchPrefix(e,"a=bundle-only").length;if(!h&&!o.rejected){var g=p.getIceParameters(e,a),f=p.getDtlsParameters(e,a);n&&(f.role="server"),t.usingBundle&&0!==r||(t._gather(o.mid,r),"new"===c.state&&c.start(s,g,n?"controlling":"controlled"),"new"===d.state&&d.start(f));var C=i(m,l);t._transceive(o,0<C.codecs.length,!1)}})}return t.localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?t._updateSignalingState("have-local-offer"):t._updateSignalingState("stable"),Promise.resolve()},h.prototype.setRemoteDescription=function(a){var n=this;if(-1===["offer","answer"].indexOf(a.type))return Promise.reject(d("TypeError","Unsupported type \""+a.type+"\""));if(!s("setRemoteDescription",a.type,n.signalingState)||n._isClosed)return Promise.reject(d("InvalidStateError","Can not set remote "+a.type+" in state "+n.signalingState));var i={};n.remoteStreams.forEach(function(e){i[e.id]=e});var o=[],h=p.splitSections(a.sdp),g=h.shift(),f=0<p.matchPrefix(g,"a=ice-lite").length,C=0<p.matchPrefix(g,"a=group:BUNDLE ").length;n.usingBundle=C;var v=p.matchPrefix(g,"a=ice-options:")[0];return n.canTrickleIceCandidates=!!v&&0<=v.substr(14).split(" ").indexOf("trickle"),h.forEach(function(s,d){var l=p.splitLines(s),h=p.getKind(s),v=p.isRejected(s)&&0===p.matchPrefix(s,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],u=p.getDirection(s,g),T=p.parseMsid(s),S=p.getMid(s)||p.generateIdentifier();if("application"===h&&"DTLS/SCTP"===y||v)return void(n.transceivers[d]={mid:S,kind:h,rejected:!0});!v&&n.transceivers[d]&&n.transceivers[d].rejected&&(n.transceivers[d]=n._createTransceiver(h,!0));var R,P,E,k,b,_,x,M,L,I,D,w=p.parseRtpParameters(s);v||(I=p.getIceParameters(s,g),D=p.getDtlsParameters(s,g),D.role="client"),x=p.parseRtpEncodingParameters(s);var j=p.parseRtcpParameters(s),O=0<p.matchPrefix(s,"a=end-of-candidates",g).length,A=p.matchPrefix(s,"a=candidate:").map(function(e){return p.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===a.type||"answer"===a.type)&&!v&&C&&0<d&&n.transceivers[d]&&(n._disposeIceAndDtlsTransports(d),n.transceivers[d].iceGatherer=n.transceivers[0].iceGatherer,n.transceivers[d].iceTransport=n.transceivers[0].iceTransport,n.transceivers[d].dtlsTransport=n.transceivers[0].dtlsTransport,n.transceivers[d].rtpSender&&n.transceivers[d].rtpSender.setTransport(n.transceivers[0].dtlsTransport),n.transceivers[d].rtpReceiver&&n.transceivers[d].rtpReceiver.setTransport(n.transceivers[0].dtlsTransport)),"offer"===a.type&&!v){R=n.transceivers[d]||n._createTransceiver(h),R.mid=S,R.iceGatherer||(R.iceGatherer=n._createIceGatherer(d,C)),A.length&&"new"===R.iceTransport.state&&(O&&(!C||0===d)?R.iceTransport.setRemoteCandidates(A):A.forEach(function(e){c(R.iceTransport,e)})),M=e.RTCRtpReceiver.getCapabilities(h),15019>t&&(M.codecs=M.codecs.filter(function(e){return"rtx"!==e.name})),_=R.sendEncodingParameters||[{ssrc:1001*(2*d+2)}];var U=!1;if("sendrecv"!==u&&"sendonly"!==u)R.rtpReceiver&&R.rtpReceiver.track&&(R.associatedRemoteMediaStreams.forEach(function(e){var t=e.getTracks().find(function(e){return e.id===R.rtpReceiver.track.id});t&&m(t,e)}),R.associatedRemoteMediaStreams=[]);else if(U=!R.rtpReceiver,b=R.rtpReceiver||new e.RTCRtpReceiver(R.dtlsTransport,h),U){var G;L=b.track,T&&"-"===T.stream||(T?(!i[T.stream]&&(i[T.stream]=new e.MediaStream,Object.defineProperty(i[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(L,"id",{get:function(){return T.track}}),G=i[T.stream]):(!i.default&&(i.default=new e.MediaStream),G=i.default)),G&&(r(L,G),R.associatedRemoteMediaStreams.push(G)),o.push([L,b,G])}R.localCapabilities=M,R.remoteCapabilities=w,R.rtpReceiver=b,R.rtcpParameters=j,R.sendEncodingParameters=_,R.recvEncodingParameters=x,n._transceive(n.transceivers[d],!1,U)}else"answer"!==a.type||v||(R=n.transceivers[d],P=R.iceGatherer,E=R.iceTransport,k=R.dtlsTransport,b=R.rtpReceiver,_=R.sendEncodingParameters,M=R.localCapabilities,n.transceivers[d].recvEncodingParameters=x,n.transceivers[d].remoteCapabilities=w,n.transceivers[d].rtcpParameters=j,A.length&&"new"===E.state&&((f||O)&&(!C||0===d)?E.setRemoteCandidates(A):A.forEach(function(e){c(R.iceTransport,e)})),C&&0!==d||("new"===E.state&&E.start(P,I,"controlling"),"new"===k.state&&k.start(D)),n._transceive(R,"sendrecv"===u||"recvonly"===u,"sendrecv"===u||"sendonly"===u),b&&("sendrecv"===u||"sendonly"===u)?(L=b.track,T?(!i[T.stream]&&(i[T.stream]=new e.MediaStream),r(L,i[T.stream]),o.push([L,b,i[T.stream]])):(!i.default&&(i.default=new e.MediaStream),r(L,i.default),o.push([L,b,i.default]))):delete R.rtpReceiver)}),void 0===n._dtlsRole&&(n._dtlsRole="offer"===a.type?"active":"passive"),n.remoteDescription={type:a.type,sdp:a.sdp},"offer"===a.type?n._updateSignalingState("have-remote-offer"):n._updateSignalingState("stable"),Object.keys(i).forEach(function(t){var r=i[t];if(r.getTracks().length){if(-1===n.remoteStreams.indexOf(r)){n.remoteStreams.push(r);var a=new Event("addstream");a.stream=r,e.setTimeout(function(){n._dispatchEvent("addstream",a)})}o.forEach(function(e){var t=e[0],a=e[1];r.id!==e[2].id||l(n,t,a,[r])})}}),o.forEach(function(e){e[2]||l(n,e[0],e[1],[])}),e.setTimeout(function(){n&&n.transceivers&&n.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},h.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},h.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},h.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},h.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++}),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},h.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},h.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(d("InvalidStateError","Can not call createOffer after close"));var a=r.transceivers.filter(function(e){return"audio"===e.kind}).length,i=r.transceivers.filter(function(e){return"video"===e.kind}).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(!0===o.offerToReceiveAudio?a=1:!1===o.offerToReceiveAudio?a=0:a=o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(!0===o.offerToReceiveVideo?i=1:!1===o.offerToReceiveVideo?i=0:i=o.offerToReceiveVideo)}for(r.transceivers.forEach(function(e){"audio"===e.kind?(a--,0>a&&(e.wantReceive=!1)):"video"===e.kind&&(i--,0>i&&(e.wantReceive=!1))});0<a||0<i;)0<a&&(r._createTransceiver("audio"),a--),0<i&&(r._createTransceiver("video"),i--);var s=p.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(a,n){var i=a.track,o=a.kind,s=a.mid||p.generateIdentifier();a.mid=s,a.iceGatherer||(a.iceGatherer=r._createIceGatherer(n,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(o);15019>t&&(c.codecs=c.codecs.filter(function(e){return"rtx"!==e.name})),c.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),a.remoteCapabilities&&a.remoteCapabilities.codecs&&a.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),c.headerExtensions.forEach(function(e){var t=a.remoteCapabilities&&a.remoteCapabilities.headerExtensions||[];t.forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var d=a.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];i&&15019<=t&&"video"===o&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),a.wantReceive&&(a.rtpReceiver=new e.RTCRtpReceiver(a.dtlsTransport,o)),a.localCapabilities=c,a.sendEncodingParameters=d}),"max-compat"!==r._config.bundlePolicy&&(s+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",r.transceivers.forEach(function(e,t){s+=n(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),s+="a=rtcp-rsize\r\n",e.iceGatherer&&"new"!==r.iceGatheringState&&(0===t||!r.usingBundle)&&(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,s+="a="+p.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))});var c=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(c)},h.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(d("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(d("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=p.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var o=p.getMediaSections(r.remoteDescription.sdp).length;r.transceivers.forEach(function(e,s){if(!(s+1>o)){if(e.rejected)return"application"===e.kind?a+="m=application 0 DTLS/SCTP 5000\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");if(e.stream){var c;"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&15019<=t&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1})}var d=i(e.localCapabilities,e.remoteCapabilities),p=d.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length;!p&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=n(e,d,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}});var s=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(s)},h.prototype.addIceCandidate=function(e){var t,r=this;return e&&!(void 0!==e.sdpMLineIndex||e.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,n){if(!r.remoteDescription)return n(d("InvalidStateError","Can not add ICE candidate without a remote description"));if(!e||""===e.candidate)for(var o=0;o<r.transceivers.length&&(r.transceivers[o].rejected||(r.transceivers[o].iceTransport.addRemoteCandidate({}),t=p.getMediaSections(r.remoteDescription.sdp),t[o]+="a=end-of-candidates\r\n",r.remoteDescription.sdp=p.getDescription(r.remoteDescription.sdp)+t.join(""),!r.usingBundle));o++);else{var s=e.sdpMLineIndex;if(e.sdpMid)for(var m=0;m<r.transceivers.length;m++)if(r.transceivers[m].mid===e.sdpMid){s=m;break}var i=r.transceivers[s];if(i){if(i.rejected)return a();var l=0<Object.keys(e.candidate).length?p.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return a();if(l.component&&1!==l.component)return a();if((0===s||0<s&&i.iceTransport!==r.transceivers[0].iceTransport)&&!c(i.iceTransport,l))return n(d("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),t=p.getMediaSections(r.remoteDescription.sdp),t[s]+="a="+(l.type?h:"end-of-candidates")+"\r\n",r.remoteDescription.sdp=p.getDescription(r.remoteDescription.sdp)+t.join("")}else return n(d("OperationError","Can not add ICE candidate"))}a()})},h.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)}),!r)throw d("InvalidAccessError","Invalid selector.");return r.getStats()}var a=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&a.push(e[t].getStats())})}),Promise.all(a).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(r){e[r].type=a(e[r]),t.set(r,e[r])}),t})}}});var g=["createOffer","createAnswer"];return g.forEach(function(e){var t=h.prototype[e];h.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"===typeof e[0]&&e[0].apply(null,[t])},function(t){"function"===typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),g=["setLocalDescription","setRemoteDescription","addIceCandidate"],g.forEach(function(e){var t=h.prototype[e];h.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then(function(){"function"===typeof e[1]&&e[1].apply(null)},function(t){"function"===typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=h.prototype[e];h.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then(function(){"function"===typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),h}},{sdp:2}],2:[function(e,t){"use strict";var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){var t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var r={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},a=8;a<t.length;a+=2)switch(t[a]){case"raddr":r.relatedAddress=t[a+1];break;case"rport":r.relatedPort=parseInt(t[a+1],10);break;case"tcptype":r.tcpType=t[a+1];break;case"ufrag":r.ufrag=t[a+1],r.usernameFragment=t[a+1];break;default:r[t[a]]=t[a+1];}return r},r.writeCandidate=function(e){var t=[e.foundation,e.component,e.protocol.toUpperCase(),e.priority,e.ip,e.port],r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},r.writeRtpMap=function(e){var t=e.payloadType;e.preferredPayloadType!==void 0&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1===r?"":"/"+r)+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,r={},a=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<a.length;n++)t=a[n].trim().split("="),r[t[0].trim()]=t[1];return r},r.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var a=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?a.push(t+"="+e.parameters[t]):a.push(t)}),t+="a=fmtp:"+r+" "+a.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},a=e.indexOf(":",t);return-1<a?(r.attribute=e.substr(t+1,a-t-1),r.value=e.substr(a+1)):r.attribute=e.substr(t+1),r},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){var a=r.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:a.map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},r.getIceParameters=function(e,t){var a=r.splitLines(e);a=a.concat(r.splitLines(t));var n={usernameFragment:a.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:a.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return n},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=r.splitLines(e),n=a[0].split(" "),o=3;o<n.length;o++){var i=n[o],s=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var c=r.parseRtpMap(s),d=r.matchPrefix(e,"a=fmtp:"+i+" ");switch(c.parameters=d.length?r.parseFmtp(d[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase());break;default:}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var a="";a+="m="+e+" ",a+=0<t.codecs.length?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=t.codecs.map(function(e){return void 0===e.preferredPayloadType?e.payloadType:e.preferredPayloadType}).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){a+=r.writeRtpMap(e),a+=r.writeFmtp(e),a+=r.writeRtcpFb(e)});var n=0;return t.codecs.forEach(function(e){e.maxptime>n&&(n=e.maxptime)}),0<n&&(a+="a=maxptime:"+n+"\r\n"),a+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){a+=r.writeExtmap(e)}),a},r.parseRtpEncodingParameters=function(e){var t,a=[],n=r.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=0<s.length&&s[0].ssrc,d=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.substr(17).split(" ");return t.map(function(e){return parseInt(e,10)})});0<d.length&&1<d[0].length&&d[0][0]===c&&(t=d[0][1]),n.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),a.push(r),i&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:t,mechanism:o?"red+ulpfec":"red"},a.push(r))}}),0===a.length&&c&&a.push({ssrc:c});var p=r.matchPrefix(e,"b=");return p.length&&(p=0===p[0].indexOf("b=TIAS:")?parseInt(p[0].substr(7),10):0===p[0].indexOf("b=AS:")?.95*(1e3*parseInt(p[0].substr(5),10))-16000:void 0,a.forEach(function(e){e.maxBitrate=p})),a},r.parseRtcpParameters=function(e){var t={},a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=0<n.length,t.compound=0===n.length;var i=r.matchPrefix(e,"a=rtcp-mux");return t.mux=0<i.length,t},r.parseMsid=function(e){var t,a=r.matchPrefix(e,"a=msid:");if(1===a.length)return t=a[0].substr(7).split(" "),{stream:t[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});if(0<n.length)return t=n[0].value.split(" "),{stream:t[0],track:t[1]}},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t){var a,n=void 0===t?2:t;return a=e?e:r.generateSessionId(),"v=0\r\no=thisisadapterortc "+a+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,a,n){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),i},r.getDirection=function(e,t){for(var a=r.splitLines(e),n=0;n<a.length;n++)switch(a[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[n].substr(2);default:}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){var t=r.splitLines(e),a=t[0].split(" ");return a[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e),a=t[0].substr(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0],a=t.substr(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},"object"===typeof t&&(t.exports=r)},{}],3:[function(e,t){(function(r){"use strict";var a=e("./adapter_factory.js");t.exports=a({window:r.window})}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"./adapter_factory.js":4}],4:[function(e,t){"use strict";var r=e("./utils");t.exports=function(t,a){var n=t&&t.window,i={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var o in a)hasOwnProperty.call(a,o)&&(i[o]=a[o]);var s=r.log,c=r.detectBrowser(n),d=e("./chrome/chrome_shim")||null,p=e("./edge/edge_shim")||null,m=e("./firefox/firefox_shim")||null,l=e("./safari/safari_shim")||null,h=e("./common_shim")||null,g={browserDetails:c,commonShim:h,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(c.browser){case"chrome":if(!d||!d.shimPeerConnection||!i.shimChrome)return s("Chrome shim is not included in this adapter release."),g;s("adapter.js shimming chrome."),g.browserShim=d,h.shimCreateObjectURL(n),d.shimGetUserMedia(n),d.shimMediaStream(n),d.shimSourceObject(n),d.shimPeerConnection(n),d.shimOnTrack(n),d.shimAddTrackRemoveTrack(n),d.shimGetSendersWithDtmf(n),d.shimSenderReceiverGetStats(n),h.shimRTCIceCandidate(n),h.shimMaxMessageSize(n),h.shimSendThrowTypeError(n);break;case"firefox":if(!m||!m.shimPeerConnection||!i.shimFirefox)return s("Firefox shim is not included in this adapter release."),g;s("adapter.js shimming firefox."),g.browserShim=m,h.shimCreateObjectURL(n),m.shimGetUserMedia(n),m.shimSourceObject(n),m.shimPeerConnection(n),m.shimOnTrack(n),m.shimRemoveStream(n),m.shimSenderGetStats(n),m.shimReceiverGetStats(n),m.shimRTCDataChannel(n),h.shimRTCIceCandidate(n),h.shimMaxMessageSize(n),h.shimSendThrowTypeError(n);break;case"edge":if(!p||!p.shimPeerConnection||!i.shimEdge)return s("MS edge shim is not included in this adapter release."),g;s("adapter.js shimming edge."),g.browserShim=p,h.shimCreateObjectURL(n),p.shimGetUserMedia(n),p.shimPeerConnection(n),p.shimReplaceTrack(n),h.shimMaxMessageSize(n),h.shimSendThrowTypeError(n);break;case"safari":if(!l||!i.shimSafari)return s("Safari shim is not included in this adapter release."),g;s("adapter.js shimming safari."),g.browserShim=l,h.shimCreateObjectURL(n),l.shimRTCIceServerUrls(n),l.shimCallbacksAPI(n),l.shimLocalStreamsAPI(n),l.shimRemoteStreamsAPI(n),l.shimTrackEventTransceiver(n),l.shimGetUserMedia(n),l.shimCreateOfferLegacy(n),h.shimRTCIceCandidate(n),h.shimMaxMessageSize(n),h.shimSendThrowTypeError(n);break;default:s("Unsupported browser!");}return g}},{"./chrome/chrome_shim":5,"./common_shim":7,"./edge/edge_shim":8,"./firefox/firefox_shim":11,"./safari/safari_shim":13,"./utils":14}],5:[function(e,t){"use strict";function r(e,t,a){!t||a.has(t.id)||(a.set(t.id,t),Object.keys(t).forEach(function(n){n.endsWith("Id")?r(e,e.get(t[n]),a):n.endsWith("Ids")&&t[n].forEach(function(t){r(e,e.get(t),a)})}))}function a(e,t,a){var n=a?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(a){a.type===n&&a.trackId===t.id&&r(e,a,i)})}),i}var n=e("../utils.js"),i=n.log;t.exports={shimGetUserMedia:e("./getusermedia"),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(t){if("object"===typeof t&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return r._ontrackpoly||(r._ontrackpoly=function(a){a.stream.addEventListener("addtrack",function(e){var n=t.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(t){return t.track&&t.track.id===e.track.id}):{track:e.track};var i=new Event("track");i.track=e.track,i.receiver=n,i.transceiver={receiver:n},i.streams=[a.stream],r.dispatchEvent(i)}),a.stream.getTracks().forEach(function(e){var n=t.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(t){return t.track&&t.track.id===e.id}):{track:e};var i=new Event("track");i.track=e,i.receiver=n,i.transceiver={receiver:n},i.streams=[a.stream],r.dispatchEvent(i)})},r.addEventListener("addstream",r._ontrackpoly)),e.apply(r,arguments)}}else"RTCRtpTransceiver"in t||n.wrapPeerConnectionEvent(t,"track",function(t){return t.transceiver||(t.transceiver={receiver:t.receiver}),t})},shimGetSendersWithDtmf:function(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e){var a=this,n=r.apply(a,arguments);return n||(n=t(a,e),a._senders.push(n)),n};var a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;a.apply(t,arguments);var r=t._senders.indexOf(e);-1!==r&&t._senders.splice(r,1)}}var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;r._senders=r._senders||[],n.apply(r,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],i.apply(t,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(e,[]);return r.forEach(function(t){t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return a(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(e,[]);return t.forEach(function(t){t._pc=e}),t}),n.wrapPeerConnectionEvent(e,"track",function(t){return t.receiver._pc=t.srcElement,t}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return a(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var t=this;if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){var r,a,n,i=arguments[0];return(t.getSenders().forEach(function(e){e.track===i&&(r?n=!0:r=e)}),t.getReceivers().forEach(function(e){return e.track===i&&(a?n=!0:a=e),e.track===i}),n||r&&a)?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(t,arguments)}}}},shimSourceObject:function(e){var t=e&&e.URL;"object"===typeof e&&e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)&&Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var r=this;return this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?void(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)})):void(this.src="")}})},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var a=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(a)&&this._shimmedLocalStreams[r.id].push(a):this._shimmedLocalStreams[r.id]=[r,a],a};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});if(r)throw new DOMException("Track already exists.","InvalidAccessError")});var a=t.getSenders();r.apply(this,arguments);var n=t.getSenders().filter(function(e){return-1===a.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(n)};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],a.apply(this,arguments)};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var a=t._shimmedLocalStreams[r].indexOf(e);-1!==a&&t._shimmedLocalStreams[r].splice(a,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),n.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){function t(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var a=e._reverseStreams[t],n=e._streams[a.id];r=r.replace(new RegExp(n.id,"g"),a.id)}),new RTCSessionDescription({type:t.type,sdp:r})}function r(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var a=e._reverseStreams[t],n=e._streams[a.id];r=r.replace(new RegExp(a.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}var a=n.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&65<=a.version)return this.shimAddTrackRemoveTrackWithNative(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{},t.getTracks().forEach(function(e){var t=r.getSenders().find(function(t){return t.track===e});if(t)throw new DOMException("Track already exists.","InvalidAccessError")}),!r._reverseStreams[t.id]){var a=new e.MediaStream(t.getTracks());r._streams[t.id]=a,r._reverseStreams[a.id]=t,t=a}o.apply(r,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},s.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(r,t){var a=this;if("closed"===a.signalingState)throw new DOMException("The RTCPeerConnection'
					s signalingState is 'closed'.
					","
					InvalidStateError ");var n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(function(e){return e===r}))throw new DOMException("
					The adapter.js addTrack polyfill only supports a single stream which is associated with the specified track.
					","
					NotSupportedError ");var i=a.getSenders().find(function(e){return e.track===r});if(i)throw new DOMException("
					Track already exists.
					","
					InvalidAccessError ");a._streams=a._streams||{},a._reverseStreams=a._reverseStreams||{};var o=a._streams[t.id];if(o)o.addTrack(r),Promise.resolve().then(function(){a.dispatchEvent(new Event("
					negotiationneeded "))});else{var s=new e.MediaStream([r]);a._streams[t.id]=s,a._reverseStreams[s.id]=t,a.addStream(s)}return a.getSenders().find(function(e){return e.track===r})},["
					createOffer ","
					createAnswer "].forEach(function(r){var a=e.RTCPeerConnection.prototype[r];e.RTCPeerConnection.prototype[r]=function(){var e=this,r=arguments,n=arguments.length&&"

					function "===typeof arguments[0];return n?a.apply(e,[function(a){var n=t(e,a);r[0].apply(null,[n])},function(e){r[1]&&r[1].apply(null,e)},arguments[2]]):a.apply(e,arguments).then(function(r){return t(e,r)})}});var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this;return arguments.length&&arguments[0].type?(arguments[0]=r(e,arguments[0]),c.apply(e,arguments)):c.apply(e,arguments)};var d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"
					localDescription ");Object.defineProperty(e.RTCPeerConnection.prototype,"
					localDescription ",{get:function(){var e=this,r=d.get.apply(this);return"
					"===r.type?r:t(e,r)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("
					closed "===t.signalingState)throw new DOMException("
					The RTCPeerConnection 's signalingState is '
					closed '.","InvalidStateError");

if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");

var r=e._pc===t;if(!r)
throw new DOMException("Sender was not created by this connection.","InvalidAccessError");

t._streams = t._streams || {};
var a;
Object.keys(t._streams).forEach(function (r) {
	var n = t._streams[r].getTracks().find(function (t) {
		return e.track === t
	});
	n && (a = t._streams[r])
}), a && (1 === a.getTracks().length ? t.removeStream(t._reverseStreams[a.id]) : a.removeTrack(e.track), t.dispatchEvent(new Event("negotiationneeded")))
}
}, shimPeerConnection: function (e) {
	var t = n.detectBrowser(e);
	if (!e.RTCPeerConnection && e.webkitRTCPeerConnection) e.RTCPeerConnection = function (t, r) {
		return i("PeerConnection"), t && t.iceTransportPolicy && (t.iceTransports = t.iceTransportPolicy), new e.webkitRTCPeerConnection(t, r)
	}, e.RTCPeerConnection.prototype = e.webkitRTCPeerConnection.prototype, e.webkitRTCPeerConnection.generateCertificate && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
		get: function () {
			return e.webkitRTCPeerConnection.generateCertificate
		}
	});
	else {
		var r = e.RTCPeerConnection;
		e.RTCPeerConnection = function (e, t) {
			if (e && e.iceServers) {
				for (var a, o = [], s = 0; s < e.iceServers.length; s++) a = e.iceServers[s], !a.hasOwnProperty("urls") && a.hasOwnProperty("url") ? (n.deprecated("RTCIceServer.url", "RTCIceServer.urls"), a = JSON.parse(JSON.stringify(a)), a.urls = a.url, o.push(a)) : o.push(e.iceServers[s]);
				e.iceServers = o
			}
			return new r(e, t)
		}, e.RTCPeerConnection.prototype = r.prototype, Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
			get: function () {
				return r.generateCertificate
			}
		})
	}
	var a = e.RTCPeerConnection.prototype.getStats;
	e.RTCPeerConnection.prototype.getStats = function (e, t, r) {
		var n = this,
			i = arguments;
		if (0 < arguments.length && "function" === typeof e) return a.apply(this, arguments);
		if (0 === a.length && (0 === arguments.length || "function" !== typeof arguments[0])) return a.apply(this, []);
		var o = function (e) {
				var t = {},
					r = e.result();
				return r.forEach(function (e) {
					var r = {
						id: e.id,
						timestamp: e.timestamp,
						type: {
							localcandidate: "local-candidate",
							remotecandidate: "remote-candidate"
						}[e.type] || e.type
					};
					e.names().forEach(function (t) {
						r[t] = e.stat(t)
					}), t[r.id] = r
				}), t
			},
			s = function (e) {
				return new Map(Object.keys(e).map(function (t) {
					return [t, e[t]]
				}))
			};
		if (2 <= arguments.length) {
			var c = function (e) {
				i[1](s(o(e)))
			};
			return a.apply(this, [c, arguments[0]])
		}
		return new Promise(function (e, t) {
			a.apply(n, [function (t) {
				e(s(o(t)))
			}, t])
		}).then(t, r)
	}, 51 > t.version && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function (t) {
		var r = e.RTCPeerConnection.prototype[t];
		e.RTCPeerConnection.prototype[t] = function () {
			var e = arguments,
				t = this,
				a = new Promise(function (a, n) {
					r.apply(t, [e[0], a, n])
				});
			return 2 > e.length ? a : a.then(function () {
				e[1].apply(null, [])
			}, function (t) {
				3 <= e.length && e[2].apply(null, [t])
			})
		}
	}), 52 > t.version && ["createOffer", "createAnswer"].forEach(function (t) {
		var r = e.RTCPeerConnection.prototype[t];
		e.RTCPeerConnection.prototype[t] = function () {
			var e = this;
			if (1 > arguments.length || 1 === arguments.length && "object" === typeof arguments[0]) {
				var t = 1 === arguments.length ? arguments[0] : void 0;
				return new Promise(function (a, n) {
					r.apply(e, [a, n, t])
				})
			}
			return r.apply(this, arguments)
		}
	}), ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function (t) {
		var r = e.RTCPeerConnection.prototype[t];
		e.RTCPeerConnection.prototype[t] = function () {
			return arguments[0] = new("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), r.apply(this, arguments)
		}
	});
	var o = e.RTCPeerConnection.prototype.addIceCandidate;
	e.RTCPeerConnection.prototype.addIceCandidate = function () {
		return arguments[0] ? o.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve())
	}
}
}
}, {
	"../utils.js": 14,
	"./getusermedia": 6
}], 6: [function (e, t) {
	"use strict";
	var r = e("../utils.js"),
		a = r.log;
	t.exports = function (e) {
		var t = r.detectBrowser(e),
			n = e && e.navigator,
			i = function (e) {
				if ("object" !== typeof e || e.mandatory || e.optional) return e;
				var t = {};
				return Object.keys(e).forEach(function (a) {
					if ("require" !== a && "advanced" !== a && "mediaSource" !== a) {
						var n = "object" === typeof e[a] ? e[a] : {
							ideal: e[a]
						};
						void 0 !== n.exact && "number" === typeof n.exact && (n.min = n.max = n.exact);
						var r = function (e, t) {
							return e ? e + t.charAt(0).toUpperCase() + t.slice(1) : "deviceId" === t ? "sourceId" : t
						};
						if (void 0 !== n.ideal) {
							t.optional = t.optional || [];
							var i = {};
							"number" === typeof n.ideal ? (i[r("min", a)] = n.ideal, t.optional.push(i), i = {}, i[r("max", a)] = n.ideal, t.optional.push(i)) : (i[r("", a)] = n.ideal, t.optional.push(i))
						}
						void 0 !== n.exact && "number" !== typeof n.exact ? (t.mandatory = t.mandatory || {}, t.mandatory[r("", a)] = n.exact) : ["min", "max"].forEach(function (e) {
							void 0 !== n[e] && (t.mandatory = t.mandatory || {}, t.mandatory[r(e, a)] = n[e])
						})
					}
				}), e.advanced && (t.optional = (t.optional || []).concat(e.advanced)), t
			},
			o = function (e, r) {
				if (61 <= t.version) return r(e);
				if (e = JSON.parse(JSON.stringify(e)), e && "object" === typeof e.audio) {
					var o = function (e, t, r) {
						t in e && !(r in e) && (e[r] = e[t], delete e[t])
					};
					e = JSON.parse(JSON.stringify(e)), o(e.audio, "autoGainControl", "googAutoGainControl"), o(e.audio, "noiseSuppression", "googNoiseSuppression"), e.audio = i(e.audio)
				}
				if (e && "object" === typeof e.video) {
					var s = e.video.facingMode;
					s = s && ("object" === typeof s ? s : {
						ideal: s
					});
					var c = 66 > t.version;
					if (s && ("user" === s.exact || "environment" === s.exact || "user" === s.ideal || "environment" === s.ideal) && !(n.mediaDevices.getSupportedConstraints && n.mediaDevices.getSupportedConstraints().facingMode && !c)) {
						delete e.video.facingMode;
						var p;
						if ("environment" === s.exact || "environment" === s.ideal ? p = ["back", "rear"] : ("user" === s.exact || "user" === s.ideal) && (p = ["front"]), p) return n.mediaDevices.enumerateDevices().then(function (t) {
							t = t.filter(function (e) {
								return "videoinput" === e.kind
							});
							var n = t.find(function (e) {
								return p.some(function (t) {
									return -1 !== e.label.toLowerCase().indexOf(t)
								})
							});
							return !n && t.length && -1 !== p.indexOf("back") && (n = t[t.length - 1]), n && (e.video.deviceId = s.exact ? {
								exact: n.deviceId
							} : {
								ideal: n.deviceId
							}), e.video = i(e.video), a("chrome: " + JSON.stringify(e)), r(e)
						})
					}
					e.video = i(e.video)
				}
				return a("chrome: " + JSON.stringify(e)), r(e)
			},
			s = function (t) {
				return {
					name: {
						PermissionDeniedError: "NotAllowedError",
						PermissionDismissedError: "NotAllowedError",
						InvalidStateError: "NotAllowedError",
						DevicesNotFoundError: "NotFoundError",
						ConstraintNotSatisfiedError: "OverconstrainedError",
						TrackStartError: "NotReadableError",
						MediaDeviceFailedDueToShutdown: "NotAllowedError",
						MediaDeviceKillSwitchOn: "NotAllowedError",
						TabCaptureError: "AbortError",
						ScreenCaptureError: "AbortError",
						DeviceCaptureError: "AbortError"
					}[t.name] || t.name,
					message: t.message,
					constraint: t.constraintName,
					toString: function () {
						return this.name + (this.message && ": ") + this.message
					}
				}
			};
		n.getUserMedia = function (e, t, r) {
			o(e, function (e) {
				n.webkitGetUserMedia(e, t, function (t) {
					r && r(s(t))
				})
			})
		};
		var c = function (e) {
			return new Promise(function (t, r) {
				n.getUserMedia(e, t, r)
			})
		};
		if (n.mediaDevices || (n.mediaDevices = {
				getUserMedia: c,
				enumerateDevices: function () {
					return new Promise(function (t) {
						var r = {
							audio: "audioinput",
							video: "videoinput"
						};
						return e.MediaStreamTrack.getSources(function (e) {
							t(e.map(function (e) {
								return {
									label: e.label,
									kind: r[e.kind],
									deviceId: e.id,
									groupId: ""
								}
							}))
						})
					})
				},
				getSupportedConstraints: function () {
					return {
						deviceId: !0,
						echoCancellation: !0,
						facingMode: !0,
						frameRate: !0,
						height: !0,
						width: !0
					}
				}
			}), !n.mediaDevices.getUserMedia) n.mediaDevices.getUserMedia = function (e) {
			return c(e)
		};
		else {
			var d = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
			n.mediaDevices.getUserMedia = function (e) {
				return o(e, function (e) {
					return d(e).then(function (t) {
						if (e.audio && !t.getAudioTracks().length || e.video && !t.getVideoTracks().length) throw t.getTracks().forEach(function (e) {
							e.stop()
						}), new DOMException("", "NotFoundError");
						return t
					}, function (t) {
						return Promise.reject(s(t))
					})
				})
			}
		}
		"undefined" === typeof n.mediaDevices.addEventListener && (n.mediaDevices.addEventListener = function () {
			a("Dummy mediaDevices.addEventListener called.")
		}), "undefined" === typeof n.mediaDevices.removeEventListener && (n.mediaDevices.removeEventListener = function () {
			a("Dummy mediaDevices.removeEventListener called.")
		})
	}
}, {
	"../utils.js": 14
}], 7: [function (t, r) {
	"use strict";
	var a = t("sdp"),
		n = t("./utils");
	r.exports = {
		shimRTCIceCandidate: function (t) {
			if (!(!t.RTCIceCandidate || t.RTCIceCandidate && "foundation" in t.RTCIceCandidate.prototype)) {
				var e = t.RTCIceCandidate;
				t.RTCIceCandidate = function (t) {
					if ("object" === typeof t && t.candidate && 0 === t.candidate.indexOf("a=") && (t = JSON.parse(JSON.stringify(t)), t.candidate = t.candidate.substr(2)), t.candidate && t.candidate.length) {
						var r = new e(t),
							n = a.parseCandidate(t.candidate),
							i = Object.assign(r, n);
						return i.toJSON = function () {
							return {
								candidate: i.candidate,
								sdpMid: i.sdpMid,
								sdpMLineIndex: i.sdpMLineIndex,
								usernameFragment: i.usernameFragment
							}
						}, i
					}
					return new e(t)
				}, t.RTCIceCandidate.prototype = e.prototype, n.wrapPeerConnectionEvent(t, "icecandidate", function (r) {
					return r.candidate && Object.defineProperty(r, "candidate", {
						value: new t.RTCIceCandidate(r.candidate),
						writable: "false"
					}), r
				})
			}
		},
		shimCreateObjectURL: function (e) {
			var t = e && e.URL;
			if ("object" === typeof e && e.HTMLMediaElement && "srcObject" in e.HTMLMediaElement.prototype && t.createObjectURL && t.revokeObjectURL) {
				var r = t.createObjectURL.bind(t),
					a = t.revokeObjectURL.bind(t),
					i = new Map,
					o = 0;
				t.createObjectURL = function (e) {
					if ("getTracks" in e) {
						var t = "polyblob:" + ++o;
						return i.set(t, e), n.deprecated("URL.createObjectURL(stream)", "elem.srcObject = stream"), t
					}
					return r(e)
				}, t.revokeObjectURL = function (e) {
					a(e), i.delete(e)
				};
				var s = Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype, "src");
				Object.defineProperty(e.HTMLMediaElement.prototype, "src", {
					get: function () {
						return s.get.apply(this)
					},
					set: function (e) {
						return this.srcObject = i.get(e) || null, s.set.apply(this, [e])
					}
				});
				var c = e.HTMLMediaElement.prototype.setAttribute;
				e.HTMLMediaElement.prototype.setAttribute = function () {
					return 2 === arguments.length && "src" === ("" + arguments[0]).toLowerCase() && (this.srcObject = i.get(arguments[1]) || null), c.apply(this, arguments)
				}
			}
		},
		shimMaxMessageSize: function (t) {
			if (!t.RTCSctpTransport && t.RTCPeerConnection) {
				var r = n.detectBrowser(t);
				"sctp" in t.RTCPeerConnection.prototype || Object.defineProperty(t.RTCPeerConnection.prototype, "sctp", {
					get: function () {
						return "undefined" === typeof this._sctp ? null : this._sctp
					}
				});
				var i = function (e) {
						var t = a.splitSections(e.sdp);
						return t.shift(), t.some(function (e) {
							var t = a.parseMLine(e);
							return t && "application" === t.kind && -1 !== t.protocol.indexOf("SCTP")
						})
					},
					o = function (e) {
						var t = e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
						if (null === t || 2 > t.length) return -1;
						var r = parseInt(t[1], 10);
						return r === r ? r : -1
					},
					s = function (e) {
						var t = 65536;
						return "firefox" === r.browser && (57 > r.version ? -1 === e ? t = 16384 : t = 2147483637 : 60 > r.version ? t = 57 === r.version ? 65535 : 65536 : t = 2147483637), t
					},
					c = function (e, t) {
						var n = 65536;
						"firefox" === r.browser && 57 === r.version && (n = 65535);
						var i = a.matchPrefix(e.sdp, "a=max-message-size:");
						return 0 < i.length ? n = parseInt(i[0].substr(19), 10) : "firefox" === r.browser && -1 !== t && (n = 2147483637), n
					},
					d = t.RTCPeerConnection.prototype.setRemoteDescription;
				t.RTCPeerConnection.prototype.setRemoteDescription = function () {
					var t = this;
					if (t._sctp = null, i(arguments[0])) {
						var r, a = o(arguments[0]),
							n = s(a),
							p = c(arguments[0], a);
						r = 0 === n && 0 === p ? Number.POSITIVE_INFINITY : 0 === n || 0 === p ? Math.max(n, p) : e(n, p);
						var m = {};
						Object.defineProperty(m, "maxMessageSize", {
							get: function () {
								return r
							}
						}), t._sctp = m
					}
					return d.apply(t, arguments)
				}
			}
		},
		shimSendThrowTypeError: function (e) {
			function t(e, t) {
				var r = e.send;
				e.send = function () {
					var a = arguments[0],
						n = a.length || a.size || a.byteLength;
					if ("open" === e.readyState && t.sctp && n > t.sctp.maxMessageSize) throw new TypeError("Message too large (can send a maximum of " + t.sctp.maxMessageSize + " bytes)");
					return r.apply(e, arguments)
				}
			}
			if (e.RTCPeerConnection && "createDataChannel" in e.RTCPeerConnection.prototype) {
				var r = e.RTCPeerConnection.prototype.createDataChannel;
				e.RTCPeerConnection.prototype.createDataChannel = function () {
					var e = this,
						a = r.apply(e, arguments);
					return t(a, e), a
				}, n.wrapPeerConnectionEvent(e, "datachannel", function (r) {
					return t(r.channel, r.target), r
				})
			}
		}
	}
}, {
	"./utils": 14,
	sdp: 2
}], 8: [function (e, t) {
	"use strict";
	var r = e("../utils"),
		a = e("./filtericeservers"),
		n = e("rtcpeerconnection-shim");
	t.exports = {
		shimGetUserMedia: e("./getusermedia"),
		shimPeerConnection: function (e) {
			var t = r.detectBrowser(e);
			if (e.RTCIceGatherer && (e.RTCIceCandidate || (e.RTCIceCandidate = function (e) {
					return e
				}), e.RTCSessionDescription || (e.RTCSessionDescription = function (e) {
					return e
				}), 15025 > t.version)) {
				var i = Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype, "enabled");
				Object.defineProperty(e.MediaStreamTrack.prototype, "enabled", {
					set: function (e) {
						i.set.call(this, e);
						var t = new Event("enabled");
						t.enabled = e, this.dispatchEvent(t)
					}
				})
			}
			e.RTCRtpSender && !("dtmf" in e.RTCRtpSender.prototype) && Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", {
				get: function () {
					return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = new e.RTCDtmfSender(this) : "video" === this.track.kind && (this._dtmf = null)), this._dtmf
				}
			}), e.RTCDtmfSender && !e.RTCDTMFSender && (e.RTCDTMFSender = e.RTCDtmfSender);
			var o = n(e, t.version);
			e.RTCPeerConnection = function (e) {
				return e && e.iceServers && (e.iceServers = a(e.iceServers)), new o(e)
			}, e.RTCPeerConnection.prototype = o.prototype
		},
		shimReplaceTrack: function (e) {
			e.RTCRtpSender && !("replaceTrack" in e.RTCRtpSender.prototype) && (e.RTCRtpSender.prototype.replaceTrack = e.RTCRtpSender.prototype.setTrack)
		}
	}
}, {
	"../utils": 14,
	"./filtericeservers": 9,
	"./getusermedia": 10,
	"rtcpeerconnection-shim": 1
}], 9: [function (e, t) {
	"use strict";
	var r = e("../utils");
	t.exports = function (e, t) {
		var a = !1;
		return e = JSON.parse(JSON.stringify(e)), e.filter(function (e) {
			if (e && (e.urls || e.url)) {
				var n = e.urls || e.url;
				e.url && !e.urls && r.deprecated("RTCIceServer.url", "RTCIceServer.urls");
				var i = "string" === typeof n;
				return i && (n = [n]), n = n.filter(function (e) {
					var r = 0 === e.indexOf("turn:") && -1 !== e.indexOf("transport=udp") && -1 === e.indexOf("turn:[") && !a;
					return r ? (a = !0, !0) : 0 === e.indexOf("stun:") && 14393 <= t && -1 === e.indexOf("?transport=udp")
				}), delete e.url, e.urls = i ? n[0] : n, !!n.length
			}
		})
	}
}, {
	"../utils": 14
}], 10: [function (e, t) {
	"use strict";
	t.exports = function (e) {
		var t = e && e.navigator,
			r = function (t) {
				return {
					name: {
						PermissionDeniedError: "NotAllowedError"
					}[t.name] || t.name,
					message: t.message,
					constraint: t.constraint,
					toString: function () {
						return this.name
					}
				}
			},
			a = t.mediaDevices.getUserMedia.bind(t.mediaDevices);
		t.mediaDevices.getUserMedia = function (e) {
			return a(e).catch(function (t) {
				return Promise.reject(r(t))
			})
		}
	}
}, {}], 11: [function (e, t) {
	"use strict";
	var r = e("../utils");
	t.exports = {
		shimGetUserMedia: e("./getusermedia"),
		shimOnTrack: function (e) {
			"object" === typeof e && e.RTCPeerConnection && !("ontrack" in e.RTCPeerConnection.prototype) && Object.defineProperty(e.RTCPeerConnection.prototype, "ontrack", {
				get: function () {
					return this._ontrack
				},
				set: function (e) {
					this._ontrack && (this.removeEventListener("track", this._ontrack), this.removeEventListener("addstream", this._ontrackpoly)), this.addEventListener("track", this._ontrack = e), this.addEventListener("addstream", this._ontrackpoly = function (t) {
						t.stream.getTracks().forEach(function (e) {
							var r = new Event("track");
							r.track = e, r.receiver = {
								track: e
							}, r.transceiver = {
								receiver: r.receiver
							}, r.streams = [t.stream], this.dispatchEvent(r)
						}.bind(this))
					}.bind(this))
				}
			}), "object" === typeof e && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
				get: function () {
					return {
						receiver: this.receiver
					}
				}
			})
		},
		shimSourceObject: function (e) {
			"object" === typeof e && e.HTMLMediaElement && !("srcObject" in e.HTMLMediaElement.prototype) && Object.defineProperty(e.HTMLMediaElement.prototype, "srcObject", {
				get: function () {
					return this.mozSrcObject
				},
				set: function (e) {
					this.mozSrcObject = e
				}
			})
		},
		shimPeerConnection: function (e) {
			var t = r.detectBrowser(e);
			if ("object" === typeof e && (e.RTCPeerConnection || e.mozRTCPeerConnection)) {
				e.RTCPeerConnection || (e.RTCPeerConnection = function (r, a) {
					if (38 > t.version && r && r.iceServers) {
						for (var n, o = [], s = 0; s < r.iceServers.length; s++)
							if (n = r.iceServers[s], n.hasOwnProperty("urls"))
								for (var i, c = 0; c < n.urls.length; c++) i = {
									url: n.urls[c]
								}, 0 === n.urls[c].indexOf("turn") && (i.username = n.username, i.credential = n.credential), o.push(i);
							else o.push(r.iceServers[s]);
						r.iceServers = o
					}
					return new e.mozRTCPeerConnection(r, a)
				}, e.RTCPeerConnection.prototype = e.mozRTCPeerConnection.prototype, e.mozRTCPeerConnection.generateCertificate && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
					get: function () {
						return e.mozRTCPeerConnection.generateCertificate
					}
				}), e.RTCSessionDescription = e.mozRTCSessionDescription, e.RTCIceCandidate = e.mozRTCIceCandidate), ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function (t) {
					var r = e.RTCPeerConnection.prototype[t];
					e.RTCPeerConnection.prototype[t] = function () {
						return arguments[0] = new("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), r.apply(this, arguments)
					}
				});
				var a = e.RTCPeerConnection.prototype.addIceCandidate;
				e.RTCPeerConnection.prototype.addIceCandidate = function () {
					return arguments[0] ? a.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve())
				};
				var n = function (e) {
						var t = new Map;
						return Object.keys(e).forEach(function (r) {
							t.set(r, e[r]), t[r] = e[r]
						}), t
					},
					o = {
						inboundrtp: "inbound-rtp",
						outboundrtp: "outbound-rtp",
						candidatepair: "candidate-pair",
						localcandidate: "local-candidate",
						remotecandidate: "remote-candidate"
					},
					i = e.RTCPeerConnection.prototype.getStats;
				e.RTCPeerConnection.prototype.getStats = function (e, r, a) {
					return i.apply(this, [e || null]).then(function (a) {
						if (48 > t.version && (a = n(a)), 53 > t.version && !r) try {
							a.forEach(function (e) {
								e.type = o[e.type] || e.type
							})
						}
						catch (t) {
							if ("TypeError" !== t.name) throw t;
							a.forEach(function (e, t) {
								a.set(t, Object.assign({}, e, {
									type: o[e.type] || e.type
								}))
							})
						}
						return a
					}).then(r, a)
				}
			}
		},
		shimSenderGetStats: function (e) {
			if ("object" === typeof e && e.RTCPeerConnection && e.RTCRtpSender && !(e.RTCRtpSender && "getStats" in e.RTCRtpSender.prototype)) {
				var t = e.RTCPeerConnection.prototype.getSenders;
				t && (e.RTCPeerConnection.prototype.getSenders = function () {
					var e = this,
						r = t.apply(e, []);
					return r.forEach(function (t) {
						t._pc = e
					}), r
				});
				var r = e.RTCPeerConnection.prototype.addTrack;
				r && (e.RTCPeerConnection.prototype.addTrack = function () {
					var e = r.apply(this, arguments);
					return e._pc = this, e
				}), e.RTCRtpSender.prototype.getStats = function () {
					return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map)
				}
			}
		},
		shimReceiverGetStats: function (e) {
			if ("object" === typeof e && e.RTCPeerConnection && e.RTCRtpSender && !(e.RTCRtpSender && "getStats" in e.RTCRtpReceiver.prototype)) {
				var t = e.RTCPeerConnection.prototype.getReceivers;
				t && (e.RTCPeerConnection.prototype.getReceivers = function () {
					var e = this,
						r = t.apply(e, []);
					return r.forEach(function (t) {
						t._pc = e
					}), r
				}), r.wrapPeerConnectionEvent(e, "track", function (t) {
					return t.receiver._pc = t.srcElement, t
				}), e.RTCRtpReceiver.prototype.getStats = function () {
					return this._pc.getStats(this.track)
				}
			}
		},
		shimRemoveStream: function (e) {
			!e.RTCPeerConnection || "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function (e) {
				var t = this;
				r.deprecated("removeStream", "removeTrack"), this.getSenders().forEach(function (r) {
					r.track && -1 !== e.getTracks().indexOf(r.track) && t.removeTrack(r)
				})
			})
		},
		shimRTCDataChannel: function (e) {
			e.DataChannel && !e.RTCDataChannel && (e.RTCDataChannel = e.DataChannel)
		}
	}
}, {
	"../utils": 14,
	"./getusermedia": 12
}], 12: [function (e, t) {
	"use strict";
	var r = e("../utils"),
		a = r.log;
	t.exports = function (e) {
		var t = r.detectBrowser(e),
			n = e && e.navigator,
			i = e && e.MediaStreamTrack,
			o = function (t) {
				return {
					name: {
						InternalError: "NotReadableError",
						NotSupportedError: "TypeError",
						PermissionDeniedError: "NotAllowedError",
						SecurityError: "NotAllowedError"
					}[t.name] || t.name,
					message: {
						"The operation is insecure.": "The request is not allowed by the user agent or the platform in the current context."
					}[t.message] || t.message,
					constraint: t.constraint,
					toString: function () {
						return this.name + (this.message && ": ") + this.message
					}
				}
			},
			s = function (e, r, i) {
				var s = function (e) {
					if ("object" !== typeof e || e.require) return e;
					var t = [];
					return Object.keys(e).forEach(function (a) {
						if ("require" !== a && "advanced" !== a && "mediaSource" !== a) {
							var n = e[a] = "object" === typeof e[a] ? e[a] : {
								ideal: e[a]
							};
							if ((void 0 !== n.min || void 0 !== n.max || void 0 !== n.exact) && t.push(a), void 0 !== n.exact && ("number" === typeof n.exact ? n.min = n.max = n.exact : e[a] = n.exact, delete n.exact), void 0 !== n.ideal) {
								e.advanced = e.advanced || [];
								var r = {};
								r[a] = "number" === typeof n.ideal ? {
									min: n.ideal,
									max: n.ideal
								} : n.ideal, e.advanced.push(r), delete n.ideal, Object.keys(n).length || delete e[a]
							}
						}
					}), t.length && (e.require = t), e
				};
				return e = JSON.parse(JSON.stringify(e)), 38 > t.version && (a("spec: " + JSON.stringify(e)), e.audio && (e.audio = s(e.audio)), e.video && (e.video = s(e.video)), a("ff37: " + JSON.stringify(e))), n.mozGetUserMedia(e, r, function (t) {
					i(o(t))
				})
			};
		if (n.mediaDevices || (n.mediaDevices = {
				getUserMedia: function (e) {
					return new Promise(function (t, r) {
						s(e, t, r)
					})
				},
				addEventListener: function () {},
				removeEventListener: function () {}
			}), n.mediaDevices.enumerateDevices = n.mediaDevices.enumerateDevices || function () {
				return new Promise(function (e) {
					e([{
						kind: "audioinput",
						deviceId: "default",
						label: "",
						groupId: ""
					}, {
						kind: "videoinput",
						deviceId: "default",
						label: "",
						groupId: ""
					}])
				})
			}, 41 > t.version) {
			var c = n.mediaDevices.enumerateDevices.bind(n.mediaDevices);
			n.mediaDevices.enumerateDevices = function () {
				return c().then(void 0, function (t) {
					if ("NotFoundError" === t.name) return [];
					throw t
				})
			}
		}
		if (49 > t.version) {
			var d = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
			n.mediaDevices.getUserMedia = function (e) {
				return d(e).then(function (t) {
					if (e.audio && !t.getAudioTracks().length || e.video && !t.getVideoTracks().length) throw t.getTracks().forEach(function (e) {
						e.stop()
					}), new DOMException("The object can not be found here.", "NotFoundError");
					return t
				}, function (t) {
					return Promise.reject(o(t))
				})
			}
		}
		if (!(55 < t.version && "autoGainControl" in n.mediaDevices.getSupportedConstraints())) {
			var p = function (e, t, r) {
					t in e && !(r in e) && (e[r] = e[t], delete e[t])
				},
				m = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
			if (n.mediaDevices.getUserMedia = function (e) {
					return "object" === typeof e && "object" === typeof e.audio && (e = JSON.parse(JSON.stringify(e)), p(e.audio, "autoGainControl", "mozAutoGainControl"), p(e.audio, "noiseSuppression", "mozNoiseSuppression")), m(e)
				}, i && i.prototype.getSettings) {
				var l = i.prototype.getSettings;
				i.prototype.getSettings = function () {
					var e = l.apply(this, arguments);
					return p(e, "mozAutoGainControl", "autoGainControl"), p(e, "mozNoiseSuppression", "noiseSuppression"), e
				}
			}
			if (i && i.prototype.applyConstraints) {
				var h = i.prototype.applyConstraints;
				i.prototype.applyConstraints = function (e) {
					return "audio" === this.kind && "object" === typeof e && (e = JSON.parse(JSON.stringify(e)), p(e, "autoGainControl", "mozAutoGainControl"), p(e, "noiseSuppression", "mozNoiseSuppression")), h.apply(this, [e])
				}
			}
		}
		n.getUserMedia = function (e, a, i) {
			return 44 > t.version ? s(e, a, i) : void(r.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), n.mediaDevices.getUserMedia(e).then(a, i))
		}
	}
}, {
	"../utils": 14
}], 13: [function (e, t) {
	"use strict";
	var r = e("../utils");
	t.exports = {
		shimLocalStreamsAPI: function (e) {
			if ("object" === typeof e && e.RTCPeerConnection) {
				if ("getLocalStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function () {
						return this._localStreams || (this._localStreams = []), this._localStreams
					}), "getStreamById" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getStreamById = function (e) {
						var t = null;
						return this._localStreams && this._localStreams.forEach(function (r) {
							r.id === e && (t = r)
						}), this._remoteStreams && this._remoteStreams.forEach(function (r) {
							r.id === e && (t = r)
						}), t
					}), !("addStream" in e.RTCPeerConnection.prototype)) {
					var t = e.RTCPeerConnection.prototype.addTrack;
					e.RTCPeerConnection.prototype.addStream = function (e) {
						this._localStreams || (this._localStreams = []), -1 === this._localStreams.indexOf(e) && this._localStreams.push(e);
						var r = this;
						e.getTracks().forEach(function (a) {
							t.call(r, a, e)
						})
					}, e.RTCPeerConnection.prototype.addTrack = function (e, r) {
						return r && (this._localStreams ? -1 === this._localStreams.indexOf(r) && this._localStreams.push(r) : this._localStreams = [r]), t.call(this, e, r)
					}
				}
				"removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function (e) {
					this._localStreams || (this._localStreams = []);
					var t = this._localStreams.indexOf(e);
					if (-1 !== t) {
						this._localStreams.splice(t, 1);
						var r = this,
							a = e.getTracks();
						this.getSenders().forEach(function (e) {
							-1 !== a.indexOf(e.track) && r.removeTrack(e)
						})
					}
				})
			}
		},
		shimRemoteStreamsAPI: function (e) {
			"object" === typeof e && e.RTCPeerConnection && (!("getRemoteStreams" in e.RTCPeerConnection.prototype) && (e.RTCPeerConnection.prototype.getRemoteStreams = function () {
				return this._remoteStreams ? this._remoteStreams : []
			}), !("onaddstream" in e.RTCPeerConnection.prototype) && Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", {
				get: function () {
					return this._onaddstream
				},
				set: function (e) {
					var t = this;
					this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = e), this.addEventListener("track", this._onaddstreampoly = function (r) {
						r.streams.forEach(function (e) {
							if (t._remoteStreams || (t._remoteStreams = []), !(0 <= t._remoteStreams.indexOf(e))) {
								t._remoteStreams.push(e);
								var r = new Event("addstream");
								r.stream = e, t.dispatchEvent(r)
							}
						})
					})
				}
			}))
		},
		shimCallbacksAPI: function (e) {
			if ("object" === typeof e && e.RTCPeerConnection) {
				var t = e.RTCPeerConnection.prototype,
					r = t.createOffer,
					a = t.createAnswer,
					n = t.setLocalDescription,
					i = t.setRemoteDescription,
					o = t.addIceCandidate;
				t.createOffer = function (e, t) {
					var a = 2 <= arguments.length ? arguments[2] : arguments[0],
						n = r.apply(this, [a]);
					return t ? (n.then(e, t), Promise.resolve()) : n
				}, t.createAnswer = function (e, t) {
					var r = 2 <= arguments.length ? arguments[2] : arguments[0],
						n = a.apply(this, [r]);
					return t ? (n.then(e, t), Promise.resolve()) : n
				};
				var s = function (e, t, r) {
					var a = n.apply(this, [e]);
					return r ? (a.then(t, r), Promise.resolve()) : a
				};
				t.setLocalDescription = s, s = function (e, t, r) {
					var a = i.apply(this, [e]);
					return r ? (a.then(t, r), Promise.resolve()) : a
				}, t.setRemoteDescription = s, s = function (e, t, r) {
					var a = o.apply(this, [e]);
					return r ? (a.then(t, r), Promise.resolve()) : a
				}, t.addIceCandidate = s
			}
		},
		shimGetUserMedia: function (e) {
			var t = e && e.navigator;
			t.getUserMedia || (t.webkitGetUserMedia ? t.getUserMedia = t.webkitGetUserMedia.bind(t) : t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function (e, r, a) {
				t.mediaDevices.getUserMedia(e).then(r, a)
			}.bind(t)))
		},
		shimRTCIceServerUrls: function (e) {
			var t = e.RTCPeerConnection;
			e.RTCPeerConnection = function (e, a) {
				if (e && e.iceServers) {
					for (var n, o = [], s = 0; s < e.iceServers.length; s++) n = e.iceServers[s], !n.hasOwnProperty("urls") && n.hasOwnProperty("url") ? (r.deprecated("RTCIceServer.url", "RTCIceServer.urls"), n = JSON.parse(JSON.stringify(n)), n.urls = n.url, delete n.url, o.push(n)) : o.push(e.iceServers[s]);
					e.iceServers = o
				}
				return new t(e, a)
			}, e.RTCPeerConnection.prototype = t.prototype, "generateCertificate" in e.RTCPeerConnection && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
				get: function () {
					return t.generateCertificate
				}
			})
		},
		shimTrackEventTransceiver: function (e) {
			"object" === typeof e && e.RTCPeerConnection && "receiver" in e.RTCTrackEvent.prototype && !e.RTCTransceiver && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
				get: function () {
					return {
						receiver: this.receiver
					}
				}
			})
		},
		shimCreateOfferLegacy: function (e) {
			var t = e.RTCPeerConnection.prototype.createOffer;
			e.RTCPeerConnection.prototype.createOffer = function (e) {
				var r = this;
				if (e) {
					"undefined" !== typeof e.offerToReceiveAudio && (e.offerToReceiveAudio = !!e.offerToReceiveAudio);
					var a = r.getTransceivers().find(function (e) {
						return e.sender.track && "audio" === e.sender.track.kind
					});
					!1 === e.offerToReceiveAudio && a ? "sendrecv" === a.direction ? a.setDirection ? a.setDirection("sendonly") : a.direction = "sendonly" : "recvonly" === a.direction && (a.setDirection ? a.setDirection("inactive") : a.direction = "inactive") : !0 === e.offerToReceiveAudio && !a && r.addTransceiver("audio"), "undefined" !== typeof e.offerToReceiveAudio && (e.offerToReceiveVideo = !!e.offerToReceiveVideo);
					var n = r.getTransceivers().find(function (e) {
						return e.sender.track && "video" === e.sender.track.kind
					});
					!1 === e.offerToReceiveVideo && n ? "sendrecv" === n.direction ? n.setDirection("sendonly") : "recvonly" === n.direction && n.setDirection("inactive") : !0 === e.offerToReceiveVideo && !n && r.addTransceiver("video")
				}
				return t.apply(r, arguments)
			}
		}
	}
}, {
	"../utils": 14
}], 14: [function (e, t) {
	"use strict";

	function r(e, t, r) {
		var a = e.match(t);
		return a && a.length >= r && parseInt(a[r], 10)
	}
	var a = !0,
		n = !0;
	t.exports = {
		extractVersion: r,
		wrapPeerConnectionEvent: function (e, t, r) {
			if (e.RTCPeerConnection) {
				var a = e.RTCPeerConnection.prototype,
					n = a.addEventListener;
				a.addEventListener = function (e, a) {
					if (e !== t) return n.apply(this, arguments);
					var i = function (t) {
						a(r(t))
					};
					return this._eventMap = this._eventMap || {}, this._eventMap[a] = i, n.apply(this, [e, i])
				};
				var i = a.removeEventListener;
				a.removeEventListener = function (e, r) {
					if (e !== t || !this._eventMap || !this._eventMap[r]) return i.apply(this, arguments);
					var a = this._eventMap[r];
					return delete this._eventMap[r], i.apply(this, [e, a])
				}, Object.defineProperty(a, "on" + t, {
					get: function () {
						return this["_on" + t]
					},
					set: function (e) {
						this["_on" + t] && (this.removeEventListener(t, this["_on" + t]), delete this["_on" + t]), e && this.addEventListener(t, this["_on" + t] = e)
					},
					enumerable: !0,
					configurable: !0
				})
			}
		},
		disableLog: function (e) {
			return "boolean" === typeof e ? (a = e, e ? "adapter.js logging disabled" : "adapter.js logging enabled") : new Error("Argument type: " + typeof e + ". Please use a boolean.")
		},
		disableWarnings: function (e) {
			return "boolean" === typeof e ? (n = !e, "adapter.js deprecation warnings " + (e ? "disabled" : "enabled")) : new Error("Argument type: " + typeof e + ". Please use a boolean.")
		},
		log: function () {
			if ("object" === typeof window) {
				if (a) return;
				"undefined" !== typeof console && "function" === typeof console.log && console.log.apply(console, arguments)
			}
		},
		deprecated: function (e, t) {
			n && console.warn(e + " is deprecated, please use " + t + " instead.")
		},
		detectBrowser: function (e) {
			var t = e && e.navigator,
				a = {};
			if (a.browser = null, a.version = null, "undefined" === typeof e || !e.navigator) return a.browser = "Not a browser.", a;
			if (t.mozGetUserMedia) a.browser = "firefox", a.version = r(t.userAgent, /Firefox\/(\d+)\./, 1);
			else if (t.webkitGetUserMedia) a.browser = "chrome", a.version = r(t.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
			else if (t.mediaDevices && t.userAgent.match(/Edge\/(\d+).(\d+)$/)) a.browser = "edge", a.version = r(t.userAgent, /Edge\/(\d+).(\d+)$/, 2);
			else if (e.RTCPeerConnection && t.userAgent.match(/AppleWebKit\/(\d+)\./)) a.browser = "safari", a.version = r(t.userAgent, /AppleWebKit\/(\d+)\./, 1);
			else return a.browser = "Not a supported browser.", a;
			return a
		}
	}
}, {}]
}, {}, [3])(3)
});

</script>


< script > (function () {
	"use strict";
	class a {
		constructor(a, b, c, d, e) {
			this.videolist = a, 
			this.chatroom = a.chatroom, 
			this.app = a.chatroom.app, 
			this.EventBus = a.chatroom.app.EventBus, 
			this.handle = b, 
			this.outgoing = c, 
			this.sdp = e, 
			this.mediaStream = null, 
			this.iceStateLast = "", 
			this.iceConnectedCount = 0;

			let f = this;
			this.rtc = new RTCPeerConnection({
				rtcpMuxPolicy: "require",
				bundlePolicy: "max-bundle",
				iceServers: [{
					urls: d
				}]
			}, {}), this.rtc.onicecandidate = function (a) {
				f.onICE_Candidate(a)
			}, this.rtc.oniceconnectionstatechange = function (a) {
				f.onICE_ConnectionStateChange(a)
			}, this.rtc.onaddstream = function (a) {
				f.onAddStream(a)
			}, this.rtc.onremovestream = a => {
				f.onRemoveStream(a)
			}
		}
		get ingoing() {
			return !this.outgoing
		}
		Connect() {
			this.outgoing ? this._sendOfferPublisher() : this._sendOfferRemote()
		}
		Close() {
			if (null != this.rtc) {
				let a = this.rtc;
				this.rtc = null, null != this.mediaStream && (this.mediaStream.active && "closed" !== a.signalingState && "function" === typeof a.removeStream && a.removeStream(this.mediaStream), this.mediaStream.stop(), this.mediaStream = null), "closed" !== a.signalingState && a.close(), console.log("MediaConnection.SignalingState: " + a.signalingState + " ->>> Close")
			}
		}
		AddStream(a) {
			this.rtc.addStream(a), this.mediaStream = a
		}
		onICE_Candidate(a) {
			if (console.log(a.candidate), null != a.candidate && "object" === typeof a.candidate && "string" === typeof a.candidate.candidate) {
				var b = this.chatroom.tcPkt_Trickle(this.handle, a.candidate.candidate);
				this.chatroom.packetWorker.send(b)
			}
		}
		onICE_ConnectionStateChange(a) {
			console.log(a);
			let b = TinychatApp.BLL.BroadcastProgressEvent,
				c = a.target;
			if (null != c) {
				switch (c.iceConnectionState) {
					case "starting":
						break;
					case "checking":
						break;
					case "completed":
						break;
					case "connected":
						if (this.outgoing && 0 === this.iceConnectedCount) {
							console.log("Broadcast: Started Successfully"), this.videolist.AddVideoSelf(this.handle, this.mediaStream);
							let a = new b(b.MEDIA_STARTED_SUCCESS);
							this.EventBus.broadcast(b.ID, a)
						}
						this.iceConnectedCount += 1;
						break;
					case "disconnected":
						break;
					case "failed":
						console.error(a);
					case "closed":
						if (this.outgoing) {
							this.videolist.RemoveVideoSelf(this.handle);
							let a = new b(b.MEDIA_STOPED);
							this.EventBus.broadcast(b.ID, a)
						}
						else this.videolist.RemoveVideoRemote(this.handle);
				}
				this.iceStateLast = c.iceConnectionState
			}
		}
		onAddStream(a) {
			return this.outgoing ? void console.log("Broadcast: LocalMedia.Added (" + this.handle + ")!!!") : void(console.log("Broadcast: RemoteMedia.Added (" + this.handle + ")!!!"), this.videolist.AddVideoRemote(this.handle, a.stream))
		}
		onRemoveStream() {
			return this.outgoing ? void console.log("Broadcast: LocalMedia.Removed (" + this.handle + ")!!!") : void(console.log("Broadcast: RemoteMedia.Removed (" + this.handle + ")!!!"), this.videolist.RemoveVideoRemote(this.handle, event.stream))
		}
		_sendOfferPublisher() {
			let a = this,
				b = new Map;
			b.set("offerToReceiveAudio", !1), b.set("offerToReceiveVideo", !1), this.rtc.createOffer(b).then(function (b) {
				a.rtc.setLocalDescription(b), console.log({
					sdp: b.sdp
				});
				let c = a.chatroom.tcPkt_SDP(b.type, b.sdp, 0, function (b) {
					a._onOfferPublisher(b)
				});
				a.chatroom.packetWorker.send(c)
			}, function (a) {
				console.error(a);
				let b = TinychatApp.BLL.BroadcastProgressEvent,
					c = new b(b.MEDIA_RTC_FAILED);
				c.error = a, this.EventBus.broadcast(b.ID, c)
			})
		}
		_onOfferPublisher(a) {
			if (this.chatroom.tcPkt_TcCallbackCheck(a, "sdp"))
				if (!0 === a.success) console.log({
					sdp: a.sdp
				}), this.rtc.setRemoteDescription(new RTCSessionDescription({
					type: a.type,
					sdp: a.sdp
				}));
				else {
					if (void 0 !== a.reason && null !== a.reason)
						if (16 === a.reason.code) {
							let b = a.timeout.timeToReadable();
							60 < a.timeout ? this.app.showToastWarn(`${a.reason.text}, you can try to broadcast again in ${b}`, 4e3) : this.app.showToast(`${a.reason.text}, you can try to broadcast again in ${b}`, 4e3)
						}
					else 18 === a.reason.code && this.app.showToast(a.reason.text, 3e3);
					this.rtc.close()
				}
		}
		_sendOfferRemote() {
			let a = this;
			this.rtc.setRemoteDescription(new RTCSessionDescription({
				type: "offer",
				sdp: this.sdp
			})).then(function () {
				return a.rtc.remoteDescription
			}).then(function () {
				a.rtc.createAnswer().then(function (b) {
					return a.rtc.setLocalDescription(b)
				}).then(function () {
					let b = a.rtc.localDescription.type,
						c = a.rtc.localDescription.sdp,
						d = a.handle;
					var e = a.chatroom.tcPkt_SDP(b, c, d, function () {});
					a.chatroom.packetWorker.send(e)
				}).catch(function (a) {
					console.error(a)
				})
			}).catch(function (a) {
				console.error(a)
			})
		}
		_onOfferRemote(a) {
			this.chatroom.tcPkt_TcCallbackCheck(a, "sdp") && (!0 !== a.success && this.Close(), console.log("Broadcast: RemoteMedia.SDP ..."))
		}
	}
	window.TinychatApp.BLL.MediaConnection = a
})(); 
</script>

<script>(function(){"use strict";var a=Math.Guid;let b=null;class c{constructor(a,b,c){this.debug=c,c&&(window.DEBUG=c),this.EventBus=new EventBus,this._version=new i(2,0,20,420,c),window.rootDir=this._version.rootDir(),this.defaultChatroom=null,console.log("App.useragent - "+this.useragent),this.tc_token=a,this.loginState=null,this.LoginInfo(b),this.showShareHandler=null,this.showMediaFiltersHandler=null,this.showMediaSettingsHandler=null,this.showSettingsHandler=null,this.showUpgradeHandler=null,this.showNotificationHandler=null,this.showUserProfile=null,this.showBanlistHandler=null,this.showYoutubeHandler=null}static getInstance(a,d,e){return null==b&&(b=new c(a,d,e)),b}static get RegExp_Nickname(){return /\w+/ig}static get url(){return"https://tinychat.com"}static url_avatar(a){var a=a==void 0?"guest":a;return"https://upload.tinychat.com/pic/"+encodeURI(a)}static url_api_v1_0(){return c.url+"/api/v1.0"}static url_api_login_info(){return this.url_api_v1_0()+"/user/info"}static url_api_room_token(a){return this.url_api_v1_0()+"/room/token/"+encodeURI(a)}static url_api_settings_switchclient(a){return"/settings/version/"+encodeURI(a)}static url_api_userprofile(a){var a=a==void 0?"guest":a;return this.url_api_v1_0()+"/user/profile?username="+encodeURI(a)}static url_api_follow(){return this.url+"/user/follow"}get version(){return this._version}get useragent(){return this._version.userAgent()}get settings(){return TinychatApp.BLL.SettingsFeature.getInstance(this.EventBus)}get _tracker(){return TinychatApp.BLL.Tracker.getInstance()}get _router(){return TinychatApp.BLL.Router.getInstance()}get _api(){return WebAPI.getInstance()}get _cookie(){return CookieUtils}isDebug(){return this.debug}setDarkModeCSSclass(a){return a?"dark":""}GetChatroom(a){if(this.isDebug()&&console.warn("App.isDebug"),void 0==a)throw new Exception("Roomname is empty");let b=this.settings.getSettings();return this.defaultChatroom=new TinychatApp.BLL.ChatRoom(this,this.tc_token,a,b.nickname),this.defaultChatroom}GiveAGift(a){"string"==typeof a&&0<a.length?this._router.GiveAGift(a):this._router.GiveAGift()}LiveDirectory(){this._router.LiveDirectory()}EarnCoins(){this._router.EarnCoins()}UpgradeSub(){this._router.UpgradeSub()}SwitchClientVersion(){let a=this;this._api.wsj({src:a.url_api_settings_switchclient("old")}).then(a=>{console.log(a),window.location.reload()}).catch(b=>{console.error(b),a.showToastWarn("Some unknown server error occurred")})}PromoteRoom(){this._router.PromoteRoom()}Login(a){this._router.Login(a)}Register(){this._router.Register()}Logout(){this._router.Logout()}Share(){Object.isFunc(this.showShareHandler)&&this.showShareHandler()}Banlist(){Object.isFunc(this.showBanlistHandler)&&this.showBanlistHandler()}Youtube(){Object.isFunc(this.showYoutubeHandler)&&this.showYoutubeHandler()}MediaFilters(){Object.isFunc(this.showMediaFiltersHandler)&&this.showMediaFiltersHandler()}MediaSettings(a){Object.isFunc(this.showMediaSettingsHandler)&&this.showMediaSettingsHandler(a)}Settings(){Object.isFunc(this.showSettingsHandler)&&this.showSettingsHandler()}Upgrade(a){Object.isFunc(this.showUpgradeHandler)&&this.showUpgradeHandler(a)}Notify(a,b){Object.isFunc(this.showNotificationHandler)&&this.showNotificationHandler(a,b)}DevNews(){this._router.DevNews()}WebSettings(){this._router.WebSettings()}UserProfile(a){Object.isFunc(this.showUserProfile)&&this.showUserProfile(a)}LoginInfo(a){var b=this;if("object"===typeof a){let b=a,c=new TinychatApp.DAL.LoginUserInfoEntity,d=new TinychatApp.DAL.LoginResultEntity;return d.loggedIn=b.loggedIn,d.loginName=b.username,d.userInfo=c,void this.OnLoginInfo(d)}this._api.wsj({src:c.url_api_login_info()}).then(function(a){let c=new TinychatApp.DAL.LoginResultEntity;if(c.errorcode=a.result,c.errormsg=a.message,"success"==a.result){var d=new TinychatApp.DAL.LoginUserInfoEntity;c.usersuggestion=a.username,c.userInfo=d,b.OnLoginInfo(c)}let f=b._parseLoginCookies();c.loggedIn=null!=f,c.loginName=null==f?"":f.login_name;let g=b.loginState,h=new e(g,c);b.EventBus.broadcast(e.ID,h)}).catch(function(a){console.error(a)})}OnLoginInfo(a){this.loginState=a==void 0?null:a}LoginState(){return this.loginState}IsLoggedIn(){return null!=this.loginState&&this.loginState.loggedIn}LoginName(){return null==this.loginState?null:this.loginState.loginName}IsFree(){return!(null!=this.loginState)||null==this.loginState.userInfo||0===this.loginState.userInfo.stype}GetAvatarUrl(a){return c.url_avatar(a)}Follow(a,b,d){return this._api.wsj({src:c.url_api_follow(),params:{event:1,favourite:a}},!0).then(function(a){Object.isFunc(b)&&b(a)}).catch(function(a){console.error(a),Object.isFunc(d)&&d(a)})}GetProfile(a,b,d){return this._api.wsj({src:c.url_api_userprofile(a)}).then(function(a){if("success"!=a.result)return!1;let c=new TinychatApp.DAL.UserProfileEntity;c.username=a.username,c.biography=a.biography,c.gender=a.gender,c.age=a.age,c.location=a.location,c.role=a.role,c.stype=a.stype,c.avatarUrl=a.avatarUrl,c.achieveUrl=a.achieveUrl,c.percentToNextAchieve=a.percentToNextAchieve,c.giftpoints=a.giftpoints;let d=a.virtualgifts,e=[];Array.isArray(d)&&Object.keys(d).forEach(a=>{let b=new TinychatApp.DAL.GiftEntity,c=d[a];b.giftUrl=c.imageSource,b.giftName=c.name,e.push(b)}),c.gifts=e,Object.isFunc(b)&&b(c)}).catch(function(a){console.error(a),Object.isFunc(d)&&d(a)})}IsValidNickname(a){if("string"!=typeof a)return!1;if(1>a.length)return!1;var b=c.RegExp_Nickname.exec(a);return null!=b&&b.input.length==b[0].length}IsValidRoomname(a){return this.IsValidNickname(a)}ReconnectDefaultChatroom(){this.defaultChatroom?this.defaultChatroom.Reconnect():window.location.reload()}showToastLurker(){let a=this,b=Toast.TYPE.WARN,c=new g(b,"You'
					re in view - only mode.Reconnect and solve captcha...",4e3,()=>{a.ReconnectDefaultChatroom()},"
					Solve Captcha ");this.EventBus.broadcast(g.ID,c)}showToastWarn(a,b=2e3){let c=Toast.TYPE.WARN,d=new g(c,a,b,null);this.EventBus.broadcast(g.ID,d)}showToast(a,b=2e3){let c=new g("
					",a,b,null);this.EventBus.broadcast(g.ID,c)}showToastTimeoutToLogin(a=60){let b=Toast.TYPE.TIMEOUT_TO_LOGIN,c=new g(b,"
					",a,null);this.EventBus.broadcast(g.ID,c)}_readLoginState(){let a=this._parseLoginCookies(),b=new TinychatApp.DAL.LoginResultEntity;return b.loggedIn=null!=a,b.loginName=null==a?"
					":a.login_name,b}_parseLoginCookies(){try{let a=this._cookie.getCookie("
					pass "),b=this._cookie.getCookie("
					user "),c=this._cookie.getCookie("
					hash "),d=new h;if(d.login_hash=c,d.login_passhash=a,d.login_name=b,void 0!=d.login_hash&&"
					string "===typeof d.login_hash&&void 0!=d.login_passhash&&"
					string "===typeof d.login_passhash&&void 0!=d.login_name&&"
					string "===typeof d.login_name)return d}catch(a){}return null}isSafari(){let a=new UAParser;return-1!==a.getBrowser().name.indexOf("
					Safari ")}}const d="
					LoginStateChangedEvent_ "+a.newGuid();class e{static get ID(){return d}constructor(a,b){return this.beforeState=a,this.loginState=b,this}}const f="
					ToastEvent_ "+a.newGuid();class g{static get ID(){return f}constructor(a,b,c,d,e){return this.type=a,this.text=b,this.wait=c,this.ok_handler=d,this.ok_text=e,this}}class h{constructor(){this.login_hash="
					",this.login_passhash="
					",this.login_name="
					"}}class i{constructor(a,b,c,d,e){this.app_name="
					Tinychat ",this.major=a,this.minor=b,this.patch=c,this.build=d,this.debug=e!=void 0&&e}toString(){return this.shortTitle()}










userAgent(){return this.format(" {
	0
} - client - webrtc - {
	3
} - {
	1
} - {
	2
}
").toLowerCase()}shortTitle(){return this.format("
v {
	1
}({
	2
})
")}title(){return this.format(" {
	0
}
for WebRTC v {
	1
}({
	2
})
")}rootDir(){return this.format(" / webrtc / {
	1
} - {
	2
}
")}format(a){a=a==void 0?" {
	0
}
for WebRTC v {
	1
}({
	2
} - {
	3
})
":a;let b=this.major+".
"+this.minor+".
"+this.patch+(this.debug?"~d ":"
"),c=this.getBrowser()+"
_ "+navigator.platform,d=this.build;return a.format(this.app_name,b,d,c)}getBrowser(){try{var a,b=a.width}catch(a){var c=a.toString();return-1===c.search("
not an object ")?-1===c.search("
Cannot read ")?-1===c.search("
e is undefined ")?-1===c.search("
Unable to get property 'width' of undefined or null reference ")?-1===c.search("
cannot convert e into object ")?void 0:"
opera ":document.documentMode||!window.StyleMedia?"
IE ":"
edge ":"
firefox ":"
chrome ":"
safari "}}}c.BLL=window.TinychatApp.BLL,c.DAL=window.TinychatApp.DAL,c.BLL.LoginStateChangedEvent=e,c.BLL.ToastEvent=g,window.TinychatApp=c})();</script>


<script>(function(){"
use strict ";var a=window.TinychatApp||{};a.UI={},window.TinychatApp=a})();</script>





<script>(function(){"
use strict ";var a=Math.Guid;const b="
UISideMenuToggle_ "+a.newGuid();class c{static get ID(){return b}constructor(){return this}}const d="
UIChatlogWiderToggle_ "+a.newGuid();class e{static get ID(){return d}constructor(){return this}}window.TinychatApp.UI.UISideMenuToggle=c,window.TinychatApp.UI.UIChatlogWiderToggle=e})();</script><dom-module id="
tc - chatlist - style " assetpath=".. / ui / tc - chatlist / ">






<template>